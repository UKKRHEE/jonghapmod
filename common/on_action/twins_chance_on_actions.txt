on_birth_child = {
	on_actions = { 
		on_twins_chance
	}
}

on_twins_chance = {
	on_actions = { 
		on_mother_had_twins_birth
		on_paternal_grandmother_had_twins_birth
		on_real_paternal_grandmother_had_twins_birth
		on_maternal_grandmother_had_twins_birth
	}
}

on_mother_had_twins_birth = {
		trigger = { 
			Not = { has_character_flag = mother_had_twins }
			exists = scope:mother
			trigger_if = {
				limit = { exists = scope:mother }
				scope:mother = { is_alive = yes }
				trigger_if = {
					limit = { scope:mother = { is_alive = yes } }
					scope:mother = { has_character_flag = had_twins }
				}
			}
		}
		effect = {
			add_character_flag = mother_had_twins
		}
	}

on_paternal_grandmother_had_twins_birth = {
		trigger = { 
			Not = { has_character_flag = paternal_grandmother_had_twins }
			exists = scope:father 
			Not = { exists = scope:real_father }
			trigger_if = {
				limit = { 
					exists = scope:father
					Not = { exists = scope:real_father }
				}
				scope:father = { is_alive = yes }
				trigger_if = {
					limit = { scope:father = { is_alive = yes } }
					scope:father = { has_character_flag = mother_had_twins }
				}
			}
		}
		effect = {
			add_character_flag = paternal_grandmother_had_twins
		}
	}

on_real_paternal_grandmother_had_twins_birth = {
		trigger = { 
			Not = { has_character_flag = paternal_grandmother_had_twins }
			exists = scope:real_father
			trigger_if = {
				limit = { exists = scope:real_father }
				scope:real_father = { is_alive = yes }
				trigger_if = {
					limit = { scope:real_father = { is_alive = yes } }
					scope:real_father = { has_character_flag = mother_had_twins }
				}
			}
		}
		effect = {
			add_character_flag = paternal_grandmother_had_twins
		}
	}

on_maternal_grandmother_had_twins_birth = {
		trigger = { 
			Not = { has_character_flag = maternal_grandmother_had_twins }
			exists = scope:mother
			trigger_if = {
				limit = { exists = scope:mother }
				scope:mother = { is_alive = yes }
				trigger_if = {
					limit = { scope:mother = { is_alive = yes } }
					scope:mother = { has_character_flag = mother_had_twins }
				}
			}
		}
		effect = {
			add_character_flag = maternal_grandmother_had_twins
		}
	}

on_mother_had_twins = {
			on_actions = {
				on_mother_had_twins_male
				on_mother_had_twins_female
			}
		}

on_mother_had_twins_male = {
		trigger = {
			is_male = yes
			Not = { has_character_flag = mother_had_twins }
		}
		effect = {
			save_temporary_scope_as = mother_had_twins_character
			add_character_flag = mother_had_twins
			every_child = {
				limit = {
					is_alive = yes
					is_female = yes
					Not = { has_character_flag = paternal_grandmother_had_twins }
					trigger_if = {
						limit = { exists = real_father }
						real_father = scope:mother_had_twins_character
					}
				}
				trigger_event = {
					on_action = on_paternal_grandmother_had_twins
					days = 5
				}
			}
		}
	}

on_mother_had_twins_female = {
		trigger = { 
			is_female = yes
			Not = { has_character_flag = mother_had_twins }
		}
		effect = {
			add_character_flag = mother_had_twins
			every_child = {
				limit = {
					is_alive = yes
					is_female = yes
					Not = { has_character_flag = maternal_grandmother_had_twins }
				}
				trigger_event = {
					on_action = on_maternal_grandmother_had_twins
					days = 5
				}
			}
		}
	}

on_paternal_grandmother_had_twins = {
		trigger = { 
			is_female = yes
			Not = { has_character_flag = paternal_grandmother_had_twins }
		}
		effect = {
			add_character_flag = paternal_grandmother_had_twins
		}
	}

on_maternal_grandmother_had_twins = {
		trigger = { 
			is_female = yes
			Not = { has_character_flag = maternal_grandmother_had_twins }
		}
		effect = {
			add_character_flag = maternal_grandmother_had_twins
		}
	}