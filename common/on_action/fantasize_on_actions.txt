on_fantasize = {
	trigger = {
		Not = { has_sexuality = asexual }
	}
	on_actions = { 
		on_add_fantasy
		on_fantasize_event
	}
}
on_add_fantasy = {
		trigger = {
			has_variable = breast_size_preference
			is_adult = yes
			any_relation = {
				type = fantasy
				is_adult = yes
				is_alive = yes
				has_variable = breast_size_preference
				count <= 4
			}
		}
		effect = {
		save_scope_as = root_fantasize_character
		every_consort = {
			limit = { 
				is_adult = yes
				is_alive = yes
				has_variable = breast_size_preference
				Not = { has_relation_fantasized = scope:root_fantasize_character }
			}
			save_temporary_scope_as = potential_fantasy_consort
			scope:root_fantasize_character = {
				if = {
					limit = {  
						is_attracted_to_gender_of = scope:potential_fantasy_consort
						Not = {
							is_target_in_variable_list = {
								name = potential_fantasies
								target = scope:potential_fantasy_consort
							}
						}
					}
					add_to_variable_list = {
						name = potential_fantasies
						target = scope:potential_fantasy_consort
					}
				}
			}
		}
		every_relation = {
			type = lover
			limit = { 
				is_adult = yes
				is_alive = yes
				has_variable = breast_size_preference
				Not = { has_relation_fantasized = scope:root_fantasize_character }
			}
			save_temporary_scope_as = potential_fantasy_lover
			scope:root_fantasize_character = {
				if = {
					limit = {  
						is_attracted_to_gender_of = scope:potential_fantasy_lover
						Not = {
							is_target_in_variable_list = {
								name = potential_fantasies
								target = scope:potential_fantasy_lover
							}
						}
					}
					add_to_variable_list = {
						name = potential_fantasies
						target = scope:potential_fantasy_lover
					}
				}
			}
		}
		if = {
			limit = { is_landed = yes }
			every_courtier_or_guest = {
				limit = { 
					is_adult = yes
					is_alive = yes
					has_variable = breast_size_preference
					Not = { has_relation_fantasized = scope:root_fantasize_character }
				}
				save_temporary_scope_as = potential_fantasy_courtier
				scope:root_fantasize_character = {
					if = {
						limit = {  
							is_attracted_to_gender_of = scope:potential_fantasy_courtier
							Not = {
								is_target_in_variable_list = {
									name = potential_fantasies
									target = scope:potential_fantasy_courtier
								}
							}
						}
						add_to_variable_list = {
							name = potential_fantasies
							target = scope:potential_fantasy_courtier
						}
					}
				}
			}
		}
		else_if = {
			limit = { is_courtier = yes }
			scope:root_fantasize_character.liege = {
				every_courtier_or_guest = {
					limit = { 
						Not = { has_relation_fantasized = scope:root_fantasize_character }
						is_adult = yes
						is_alive = yes
						has_variable = breast_size_preference
					}
					save_temporary_scope_as = potential_fantasy_liege_courtier
					scope:root_fantasize_character = {
						if = {
							limit = {  
								is_attracted_to_gender_of = scope:potential_fantasy_liege_courtier
								Not = {
									is_target_in_variable_list = {
										name = potential_fantasies
										target = scope:potential_fantasy_liege_courtier
									}
								}
							}
							add_to_variable_list = {
								name = potential_fantasies
								target = scope:potential_fantasy_liege_courtier
							}
						}
					}
				}
			}
		}
		else_if = {
			limit = { exists = scope:root_fantasize_character.host }
			if = {
				limit = { 
					scope:root_fantasize_character.host = {
						Not = { has_relation_fantasized = scope:root_fantasize_character }
						is_adult = yes
						is_alive = yes
					}
					is_attracted_to_gender_of = scope:root_fantasize_character.host
					Not = {
						is_target_in_variable_list = {
							name = potential_fantasies
							target = scope:root_fantasize_character.host
						}
					}
				}
				add_to_variable_list = {
					name = potential_fantasies
					target = scope:root_fantasize_character.host
				}
			}
			scope:root_fantasize_character.host = {
				every_courtier_or_guest = {
					limit = { 
						Not = { has_relation_fantasized = scope:root_fantasize_character }
						is_adult = yes
						is_alive = yes
						has_variable = breast_size_preference
					}
					save_temporary_scope_as = potential_fantasy_host_courtier
					scope:root_fantasize_character = {
						if = {
							limit = {  
								is_attracted_to_gender_of = scope:potential_fantasy_host_courtier
								Not = {
									is_target_in_variable_list = {
										name = potential_fantasies
										target = scope:potential_fantasy_host_courtier
									}
								}
							}
							add_to_variable_list = {
								name = potential_fantasies
								target = scope:potential_fantasy_host_courtier
							}
						}
					}
				}
			}
		}
		if = {
			limit = { exists = scope:root_fantasize_character.liege }
			every_liege_or_above = {
				save_temporary_scope_as = potential_fantasy_liege
				if = {
					limit = { 
						Not = { has_relation_fantasized = scope:root_fantasize_character }
						is_adult = yes
						is_alive = yes
						scope:root_fantasize_character = { is_attracted_to_gender_of = scope:potential_fantasy_liege }
						Not = {
							is_target_in_variable_list = {
								name = potential_fantasies
								target = scope:potential_fantasy_liege
							}
						}
					}
					add_to_variable_list = {
						name = potential_fantasies
						target = scope:potential_fantasy_liege
					}
				}
			}
		}
		if = {
			limit = { is_landed = yes }
			every_vassal_or_below = {
				save_temporary_scope_as = potential_fantasy_vassal
				if = {
					limit = { 
						Not = { has_relation_fantasized = scope:root_fantasize_character }
						is_adult = yes
						is_alive = yes
						scope:root_fantasize_character = { is_attracted_to_gender_of = scope:potential_fantasy_vassal }
						Not = {
							is_target_in_variable_list = {
								name = potential_fantasies
								target = scope:potential_fantasy_vassal
							}
						}
					}
					add_to_variable_list = {
						name = potential_fantasies
						target = scope:potential_fantasy_vassal
					}
				}
				if = {
					limit = { 
						trigger_if = { 
							limit = { has_variable_list = potential_fantasies }
								variable_list_size = {
								name = potential_fantasies
								value < 5
								}
						}
					}
					every_courtier_or_guest = {
						limit = { 
							Not = { has_relation_fantasized = scope:root_fantasize_character }
							is_adult = yes
							is_alive = yes
							has_variable = breast_size_preference
						}
						save_temporary_scope_as = potential_fantasy_vassal_courtier
						scope:root_fantasize_character = {
							if = {
								limit = {  
									is_attracted_to_gender_of = scope:potential_fantasy_vassal_courtier
									Not = {
										is_target_in_variable_list = {
											name = potential_fantasies
											target = scope:potential_fantasy_vassal_courtier
										}
									}
								}
								add_to_variable_list = {
									name = potential_fantasies
									target = scope:potential_fantasy_vassal_courtier
								}
							}
						}
					}
				}
			}
		}
		if = {
			limit = { 
				trigger_if = { 
					limit = { has_variable_list = potential_fantasies }
					variable_list_size = {
						name = potential_fantasies
						value < 5
					}
				}
				exists = scope:root_fantasize_character.liege
			}
			every_liege_or_above = {
				every_courtier_or_guest = {
					limit = { 
						Not = { has_relation_fantasized = scope:root_fantasize_character }
						is_adult = yes
						is_alive = yes
						has_variable = breast_size_preference
					}
					save_temporary_scope_as = potential_fantasy_liege_above_courtier
					scope:root_fantasize_character = {
						if = {
							limit = {  
								is_attracted_to_gender_of = scope:potential_fantasy_liege_above_courtier
								Not = {
									is_target_in_variable_list = {
										name = potential_fantasies
										target = scope:potential_fantasy_liege_above_courtier
									}
								}
							}
							add_to_variable_list = {
								name = potential_fantasies
								target = scope:potential_fantasy_liege_above_courtier
							}
						}
					}
				}
			}
		}
		if = { 
			limit = { 
				has_variable_list = potential_fantasies
				trigger_if = {
					is_target_in_variable_list = {
						name = potential_fantasies
						target = scope:root_fantasize_character
					}
				}
			}
			remove_list_variable = {
				name = potential_fantasies
				target = scope:root_fantasize_character
			}
		}
		if = { 
			limit = { 
				has_variable_list = potential_fantasies
				trigger_if = {
					limit = { has_variable_list = potential_fantasies }
					variable_list_size = {
						name = potential_fantasies
						value >= 5
					}
				}
			}
			trigger_event = { id = fantasize.0002 }
		}
		else_if = {
			limit = { has_variable_list = potential_fantasies }
			clear_variable_list = potential_fantasies
		}
	}
}
	
on_fantasize_event = {
		trigger = {
			has_variable = breast_size_preference
			is_adult = yes
			any_relation = {
				type = fantasy
				is_adult = yes
				is_alive = yes
				has_variable = breast_size_preference
				count >= 5
			}
		}
		effect = {
			trigger_event = { id = fantasize.0001 }
		}
	}