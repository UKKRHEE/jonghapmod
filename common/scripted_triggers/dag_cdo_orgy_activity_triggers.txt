###TRIGGER LIST
#~dag_cdo_may_sleep_around_trigger
#~dag_cdo_may_attend_orgy_trigger
#~dag_can_attend_orgy_trigger
#~dag_cdo_orgy_potential_guest_trigger
#~dag_cdo_orgy_default_participant_trigger

dag_cdo_may_sleep_around_trigger = {
	is_adult = yes
	NOT = {
		custom_description = {
			text = "carn_cannot_have_sex"
			has_trait_with_flag = carn_cannot_have_sex
			has_character_flag = carn_cannot_have_sex
		}
	}
	save_temporary_scope_as = potential_adulterer
	or = {
		sexually_liberal_trigger = yes
		might_cheat_on_every_partner_trigger = yes
		carn_should_have_no_consequences_for_extramarital_sex_with_no_partner_trigger = yes
		#~Above is currently just 'has_trait = lifestyle_prostitute' but may be expanded by other mods.
		has_trait = rakish
		AND = {
			scope:potential_adulterer = { is_male = yes }
			NOT = { scope:potential_adulterer.faith = { has_doctrine_parameter = adultery_male_crime } }
		}
		AND = {
			scope:potential_adulterer = { is_female = yes }
			NOT = { scope:potential_adulterer.faith = { has_doctrine_parameter = adultery_female_crime } }
		}
	}
}

dag_cdo_may_attend_orgy_trigger = {
	is_available_healthy_adult = yes
	NOR = {
		carn_has_any_disease_trigger = yes
		custom_description = {
			text = "carn_cannot_have_sex"
			has_trait_with_flag = carn_cannot_have_sex
			has_character_flag = carn_cannot_have_sex
		}
	}
}

dag_can_attend_orgy_trigger = {
	dag_cdo_may_attend_orgy_trigger = yes
	is_available_for_activity_trigger = yes
	NOT = {
		any_in_list = {
			list = potential_guests
			this = prev
		}
	}
}

dag_cdo_orgy_potential_guest_trigger = {
	dag_cdo_may_attend_orgy_trigger = yes
	dag_cdo_may_sleep_around_trigger = yes
	NOR = {
		has_RelationToMe_relation = { CHARACTER = root }
	}
#	faith = scope:inviter.faith									#~No idea why we added this restriction???
#	has_same_culture_group_as = scope:inviter					#~No idea why we added this restriction???
}

dag_cdo_orgy_default_participant_trigger = {
	#~This is basically 'feast_default_participant_trigger' with some additional restrictions based on who the ai is willing to fuck.
	is_capable_adult_ai = yes									#~This does mean the player is not getting any sex aside from his own 2-3 events
	NOT = { this = root }
	is_alive = yes
	is_imprisoned = no
	accepts_incest_with_trigger = { CHARACTER = root } 			#~No incest or 100% ok with incest (legally not personally)
	freely_accepts_sodomy_with_trigger = { CHARACTER = root } 	#~No sodomy or 100% ok with sodomy (legally not personally)
	NOT = {
		custom_description = {
			text = "carn_cannot_have_sex"
			has_trait_with_flag = carn_cannot_have_sex
			has_character_flag = carn_cannot_have_sex
		}
	}
	#~Stuff below is more debatable if it belongs here.
	carn_has_any_disease_trigger = no							#~Stops the orgy ending up with everyone having the pox
	NOT = { has_trait = celibate }
	can_have_children = yes										#~principally to rule out anyone in chastity belts
	fertility > 0												#~stops carn_had_sex_with_effect throwing an error
}
