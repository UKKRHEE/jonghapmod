#~dag_cdo_discipline_chastise_effect
#~dag_cdo_discipline_spank_effect
#~dag_cdo_discipline_flog_effect
#~dag_cdo_discipline_shame_effect


#############################################
## Discipline Sub Effects
## These typically should only be run from the effects listed above
#############################################
#~run in scope:recipient
#~NB: When testing these you have to let the game run a couple of seconds before the game updates the characters 

dag_cdo_apply_discipline_miniscule_effect = {	#~Currently included only for completeness
	if = {
		limit = { ai_honor = 100 }
		custom_tooltip = dag_cdo_discipline_applied_no_effect_tt
		}
	else = {
		custom_tooltip = dag_cdo_discipline_applied_miniscule_effect_tt
	}
	hidden_effect = {
		add_character_modifier = {
			modifier = dag_cdo_slave_disciplined_miniscule
		}
	}
}

dag_cdo_apply_discipline_minor_effect = {
	if = {
		limit = { ai_honor = 100 }
		custom_tooltip = dag_cdo_discipline_applied_no_effect_tt
		}
	else = {
		custom_tooltip = dag_cdo_discipline_applied_minor_effect_tt
	}
	hidden_effect = {
		add_character_modifier = {
			modifier = dag_cdo_slave_disciplined_minor
		}
	}
}

dag_cdo_apply_discipline_medium_effect = {
	if = {
		limit = { ai_honor = 100 }
		custom_tooltip = dag_cdo_discipline_applied_no_effect_tt
		}
	else = {
		custom_tooltip = dag_cdo_discipline_applied_medium_effect_tt
	}
	hidden_effect = {
		add_character_modifier = {
			modifier = dag_cdo_slave_disciplined_medium
		}
	}
}

dag_cdo_apply_discipline_major_effect = {
	if = {
		limit = { ai_honor = 100 }
		custom_tooltip = dag_cdo_discipline_applied_no_effect_tt
		}
	else = {
		custom_tooltip = dag_cdo_discipline_applied_major_effect_tt
	}
	hidden_effect = {
		add_character_modifier = {
			modifier = dag_cdo_slave_disciplined_major
		}
	}
}

#############################################
#~We attempted to codify all stress impacts into separate effect(s); it did not go well
#~We attempted to codify all opinion modifiers into separate effect(s); it did not go well

#############################################
## Discipline Effects
#############################################

dag_cdo_discipline_chastise_effect = {
	$ACTOR$ = { save_scope_as = actor }
	$VICTIM$ = { save_scope_as = recipient }
	scope:recipient = {
		dag_cdo_apply_discipline_minor_effect = yes
		add_character_modifier = {
			modifier = dag_cdo_recently_chastised
			years = 1
		}
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = submission } }
			add_stress = minor_stress_impact_loss
		}
		stress_impact = {
			humble = minor_stress_impact_loss
			ambitious = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
			craven = minor_stress_impact_gain
			shy = minor_stress_impact_gain
		}
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = submission } }
			#~Currently there is no other relevant fetish/trigger for liking this
			add_opinion = {
				target = scope:actor
				modifier = dag_cdo_disciplined_me_positive
			}			
		}
		else = {
			add_opinion = {
				target = scope:actor
				modifier = cruelty_opinion
				opinion = -20
			}
		}
	}
	scope:actor = {
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = domination } }
			add_stress = minor_stress_impact_loss
		}
		stress_impact = {
			forgiving = minor_stress_impact_gain
			just = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain		
			sadistic = minor_stress_impact_loss
		}
	}
}

dag_cdo_discipline_spank_effect = {
	$ACTOR$ = { save_scope_as = actor }
	$VICTIM$ = { save_scope_as = recipient }
	scope:recipient = {
		dag_cdo_apply_discipline_minor_effect = yes
		add_character_modifier = {
			modifier = dag_cdo_recently_spanked
			years = 1
		}
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = submission } }
			add_stress = minor_stress_impact_loss
		}		
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = masochism } }
			add_stress = minor_stress_impact_loss
		}
		stress_impact = {
			humble = minor_stress_impact_loss
			ambitious = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
			craven = minor_stress_impact_gain
			shy = minor_stress_impact_gain
		}
		if = {
			limit = { 
				carn_has_fetish_trigger = { FETISH = submission }
				carn_has_fetish_trigger = { FETISH = masochism }
			}
			add_opinion = {
				target = scope:actor
				modifier = dag_cdo_disciplined_me_positive
			}			
		}
		else = {
			add_opinion = {
				target = scope:actor
				modifier = cruelty_opinion
				opinion = -20
			}
		}
	}
	scope:actor = {
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = domination } }
			add_stress = minor_stress_impact_loss
		}
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = sadism } }
			add_stress = minor_stress_impact_loss
		}
		stress_impact = {
			forgiving = minor_stress_impact_gain
			just = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain		
			sadistic = minor_stress_impact_loss
		}
	}
}

dag_cdo_discipline_flog_effect = {
	$ACTOR$ = { save_scope_as = actor }
	$VICTIM$ = { save_scope_as = recipient }
	scope:recipient = {
		increase_wounds_no_death_effect = { REASON = whipping }
		dag_cdo_apply_discipline_medium_effect = yes
		add_character_modifier = {
			modifier = dag_cdo_recently_flogged
			years = 1
		}
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = submission } }
			add_stress = minor_stress_impact_loss
		}		
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = masochism } }
			add_stress = medium_stress_impact_loss
		}
		stress_impact = {
			humble = minor_stress_impact_loss
			ambitious = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
			craven = minor_stress_impact_gain
			shy = minor_stress_impact_gain
		}
		if = {
			limit = { 
				carn_has_fetish_trigger = { FETISH = submission }
				carn_has_fetish_trigger = { FETISH = masochism }
			}
			add_opinion = {
				target = scope:actor
				modifier = dag_cdo_disciplined_me_positive
			}			
		}
		else = {
			add_opinion = {
				target = scope:actor
				modifier = cruelty_opinion
				opinion = -40
			}
		}
	}
	scope:actor = {
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = domination } }
			add_stress = minor_stress_impact_loss
		}
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = sadism } }
			add_stress = medium_stress_impact_loss
		}
		stress_impact = {
			forgiving = minor_stress_impact_gain
			just = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain		
			sadistic = medium_stress_impact_loss
		}
	}
}

dag_cdo_discipline_shame_effect = {
	$ACTOR$ = { save_scope_as = actor }
	$VICTIM$ = { save_scope_as = recipient }
	scope:recipient = {
		dag_cdo_apply_discipline_medium_effect = yes
		add_character_modifier = {
			modifier = dag_cdo_recently_shamed
			years = 1
		}
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = submission } }
			add_stress = minor_stress_impact_loss
		}		
#		if = {
#			#~Currently there is no exhibitionism fetish
#			add_stress = medium_stress_impact_loss
#		}
		stress_impact = {
			humble = minor_stress_impact_loss
			ambitious = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
			craven = minor_stress_impact_gain
			shy = medium_stress_impact_gain
		}
		if = {
			limit = { 
				carn_has_fetish_trigger = { FETISH = submission }
				carn_has_fetish_trigger = { FETISH = masochism }
			}
			add_opinion = {
				target = scope:actor
				modifier = dag_cdo_disciplined_me_positive
			}			
		}
		else = {
			add_opinion = {
				target = scope:actor
				modifier = cruelty_opinion
				opinion = -40
			}
		}
	}
	scope:actor = {
		if = {
			limit = { carn_has_fetish_trigger = { FETISH = domination } }
			add_stress = minor_stress_impact_loss
		}
		stress_impact = {
			forgiving = minor_stress_impact_gain
			just = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain		
			sadistic = minor_stress_impact_loss
		}
	}
}



	
	
	

