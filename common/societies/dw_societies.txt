#### Dark World Societies ####

## Wizard's College
dw_the_wizards = {
	primary_attribute = learning
	is_secret = yes
	# We're not listing the criminal or devil_worshipper tags as those are both no, which is the default setting.
	sound = hermetic_society_interface
	society_ranks_gfx = generic_ranks
	opinion_to_other_members = +5
	opinion_to_pretenders = -40			#Pretenders is the opinion you have of people perceived/discovered to be in your society.
	opinion_to_perceived_members = -40	#Perceived is the opinion you have of people perceived/discovered to be of a society you're not part of
	opinion_per_rank_above = +10
	non_interference = {
		always = yes
	}
	active = {
		# Should be always active, as we've no game rule associated with Wizards.
	}
	indestructible = yes
	
	can_join_society = {
		hidden_trigger = {
			NOR = {
				trait = houseirae_matron_mother
				trait = dwf_ghost
			}
			NAND = {
				ai = yes
				is_society_rank_full = { 
					society = dw_the_wizards
					rank = 1
				}
			}
			OR = {
				is_landed = yes
				is_patrician = yes
			}
		}
		OR = {
			learning = 15
			trait = elf
			trait = houseirae_drow
			trait = dwse_lizard
			trait = fairy
			trait = vampire
			trait = kitsune
			trait = tentacle
			trait = mystic
		}
		NOR = {
			is_nomadic = yes
			is_tribal = yes
		}
		hidden_trigger = { mercenary = no }
		practical_age = 16
		hidden_trigger = {
			NOT = { has_character_flag = society_join_block }
		}
		custom_tooltip = { text = dw_disapproves_of_the_wizards_tooltip }
		hidden_trigger = {
			NOT = { has_character_flag = disapproves_of_the_wizards }
		}
	}

	show_society = {
		# Always
	}
	
	potential = {
		NOR = {
			is_nomadic = yes
			is_tribal = yes
		}
		practical_age = 16
		#If something else is added here, it could break apprenticeship. Create an event if they can get kicked out. title_hermetics_apprentice
	}
	
	society_rank = { # Typically Mundanes who long for arcane power/secrets
		level = 1
		limit = 90
		startup_limit = 9
		modifier = {
			church_opinion = -10
		}
		decisions = {
			dwtw_wizards_acquire_ingredients_decision		
			dwtw_wizards_summon_familiar
			dwtw_wizards_buy_spellbook
			dwtw_wizards_spell_of_trusting
		}
	}
	
	society_rank = { # Knowledge has begun to open possibilities, standing at the edge of opening the door.
		level = 2
		limit = 60
		startup_limit = 6
		modifier = { 
			learning = 1
		}
		decisions = {
			dw_the_wizards_mage_trait_choice # Choose to become a mage or remain a mundane.
			# hermetics_perform_scrying # Enables you to perform a scrying and gain an omen
			# brew_happiness_potion # Enables you to brew a potion
			dwtw_wizards_spell_of_body_enslavement
			dwtw_wizards_spell_of_heart_enslavement
			dw_arcane_college_recruit # Approach a potential recruit to join the Arcane College
		}
	}
	
	society_rank = { # Arcane talents are awakened and a decision point on whether or not they are realized.
		level = 3
		limit = 30
		startup_limit = 3
		modifier = {
			learning = 2
		}
		decisions = {
			dwtw_wizards_spell_of_fireball
			# hermetics_make_horoscope # Enables you to "predict" your children's future
		}
	}

	society_rank = {
		level = 4
		limit = 3
		startup_limit = 1
		modifier = { 
			learning = 3
		}
		decisions = {
			dwtw_wizards_spell_of_flamestrike
			# choose_hermetic_art # Enables you to pick/change your lifestyle trait
			dw_the_wizards_write_arcane_theory # Write a tome of advanced arcane theory (artifact)
		}
	}
	
	plots = {
	}
	
	monthly_currency_gain = {
		name = currency_name_dw_the_wizards
		
		per_attribute = {
    		name = learning
    		value = 0.5
    	}
		has_trait = {
			value = 2
			trait = diligent
		}
		has_trait = {
			value = 1
			trait = scholar
		}
		has_trait = {
			value = 1
			trait = mystic
		}
		has_trait = {
			value = 1
			trait = erudite
		}
		has_trait = {
			value = 1
			trait = stubborn
		}
		has_trait = {
			value = 1
			trait = patient
		}
		has_trait = {
			value = 1
			trait = genius
		}
		has_trait = {
			value = 1
			trait = quick
		}
		has_trait = {
			value = 1
			trait = shrewd
		}
		has_trait = {
			value = 2
			trait = mage
		}
		society_rank = {
			rank = 4
			value = 10
		}
	}

	member_score_per_attribute = 3
	member_score_per_rank = 100

	member_score = {
		value = 10

		modifier = {
			factor = 2
			trait = diligent
		}
		modifier = {
			factor = 1.5
			trait = scholar
		}
		modifier = {
			factor = 1.5
			trait = mystic
		}
		modifier = {
			factor = 1.5
			trait = erudite
		}
		modifier = {
			factor = 1.5
			trait = stubborn
		}
		modifier = {
			factor = 1.5
			trait = patient
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = genius
				trait = quick
				trait = shrewd
			}
		}
		modifier = {
			factor = 2
			trait = mage
		}
	}
	
	startup_populate = {
	    trigger = {
			ai = yes
	    	controls_religion = no
			practical_age = 16
			is_in_society = no
			is_dumb_trigger = no
			NOR = {
				trait = houseirae_matron_mother
				trait = dwf_ghost
			}
			NOT = { trait = zealous } # A zealous view of religion is the enemy of the arcane knowledge seeker
			OR = {
				NOT = { is_priest = yes }				
				OR = {
					trait = mystic
					trait = scholar
					trait = cynical
				}
			}
			OR = {
				AND = {
					is_landed = yes
					learning = 18
					OR = { 
						trait = scholar
						trait = faqih
						trait = erudite
						trait = genius
						trait = quick
						trait = mystic
						learning = 20
					}
				}
				AND = {
					learning = 14
					OR = {
						trait = scholar
						trait = faqih
						trait = erudite
						trait = genius
						trait = mystic
						trait = quick
						trait = reincarnation
						learning = 18
					}
				}
			}
		}
	}
}

## Lilith's Chosen
dw_the_chosen_of_lilith = {
	primary_attribute = intrigue
	is_secret = yes
	sound = devil_worshippers_interface
	opinion_to_other_members = +5
	opinion_to_pretenders = -40			#Pretenders is the opinion you have of people perceived/discovered to be in your society.
	opinion_to_perceived_members = -40	#Perceived is the opinion you have of people perceived/discovered to be of a society you're not part of
	opinion_per_rank_above = +10
	society_ranks_gfx = dw_the_chosen_of_lilith_ranks
	
	active = {
	}
	indestructible = yes
	
	can_join_society = {
		OR = {
			AND = {
				hidden_trigger = {
					NOR = {
						trait = houseirae_matron_mother
						trait = dwf_ghost
					}
					has_heaven_hell_content = yes # We're putting this here just in case the active block above doesn't work - and in vanilla societies they also double-dipped like this.
					NAND = {
						ai = yes
						is_society_rank_full = { 
							society = dw_the_chosen_of_lilith
							rank = 1
						}
					}
				}
				OR = {
					trait = lustful
					trait = hedonist
					trait = alu_fiend
					trait = cambion
					trait = lilith
					trait = incubus
					trait = seducer
					trait = seductress
				}
				NOT = {
					trait = angel
					trait = chaste
					trait = celibate
				}		
				hidden_trigger = { mercenary = no }
				practical_age = 16
				hidden_trigger = {
					NOT = { has_character_flag = society_join_block }
				}
			}
			trait = yiminhyee
		}
	}

	show_society = {
		OR = {
			AND = {
				has_heaven_hell_content = yes
				is_adult = yes
				OR = {
					trait = lustful
					trait = hedonist
					trait = alu_fiend
					trait = cambion
					trait = lilith
					trait = incubus
					trait = seducer
					trait = seductress
				}
				NOR = {
					trait = angel
					trait = chaste
					trait = celibate
				}		
			}
			trait = yiminhyee
		}
	}

	potential = { } #no rules

	society_rank = {
		level = 1
		limit = 96
		startup_limit = 9
		powers = {
			dw_kiss_of_seduction
			dw_alter_cock_size
			dw_alter_tits_size
			dw_futa_morph_spell
			dw_pox_purge
						
		}
		
	}
	
	society_rank = {
		level = 2
		limit = 69
		startup_limit = 6
		modifier = { 
			intrigue = 1
		}
		powers = {
			dw_life_leech_spell
			dw_chosen_recruit
			dw_beautify_self
		}
		max_consorts = 1
		men_can_take_consorts = yes
		women_can_take_consorts = yes
		
		custom_tooltip = dw_max_consorts_1
	}
	
	society_rank = {
		level = 3
		limit = 33
		startup_limit = 3
		modifier = {
			intrigue = 2
		}
		powers = {
			dw_incubus_intimidation_illusion
			dw_lilith_minor_heal_self
			dw_infuse_with_demon_blood_half
		}
		max_consorts = 2
		men_can_take_consorts = yes
		women_can_take_consorts = yes		
		custom_tooltip = dw_max_consorts_2
	}

	society_rank = {
		level = 4
		limit = 14 
		startup_limit = 3
		modifier = { 
			intrigue = 3
		}
		powers = {
			dw_lilith_incubus_death_dream
			dw_succubus_corruption			
			dw_lilith_moderate_heal_self
			dw_blood_moon_ritual
			dw_lilith_major_heal_self
			dw_infuse_with_demon_blood_full
		}
		max_consorts = 3
		men_can_take_consorts = yes
		women_can_take_consorts = yes	
		custom_tooltip = dw_max_consorts_3
		obedience_tooltip = obedience_tooltip #this can be unique per rank/society 
		obedient = {
			ROOT = {
				always = yes
			}
		}
	}

	monthly_currency_gain = {
		name = currency_name_dw_the_chosen_of_lilith
    
		per_attribute = {
			name = intrigue
			value = 1
		}
		has_trait = {
			trait = ambitious
			value = 5
		}
		has_trait = {
			trait = genius
			value = 5
		}
		has_trait = {
			trait = quick
			value = 5
		}
		has_trait = {
			trait = shrewd
			value = 5
		}
		has_trait = {
			trait = hedonist
			value = 6
		}
		has_trait = {
			trait = mystic
			value = 5
		}
		has_trait = {
			trait = seducer
			value = 6
		}
		has_trait = {
			trait = seductress
			value = 6
		}
		has_trait = {
			trait = schemer
			value = 6
		}
		has_trait = {
			trait = impaler
			value = 6
		}
		has_trait = {
			trait = lustful
			value = 4
		}
		has_trait = {
			trait = proud
			value = 2
		}
		has_trait = {
			trait = greedy
			value = 2
		}
		has_trait = {
			trait = deceitful
			value = 2
		}
		has_trait = {
			trait = arbitrary
			value = 2
		}
		has_trait = {
			trait = kind
			value = -2
		}		
		has_trait = {
			trait = temperate
			value = -2
		}
		has_trait = {
			trait = charitable
			value = -2
		}
		has_trait = {
			trait = humble
			value = -2
		}
		has_trait = {
			trait = immortal
			value = 10
		}
		has_trait = {
			trait = monk
			value = -10
		}
		has_trait = {
			trait = nun
			value = -10
		}
		has_trait = {
			trait = is_fat
			value = -4
		}
		has_trait = {
			trait = is_malnourished
			value = -4
		}		
		has_trait = {
			trait = fair
			value = 10
		}
		has_trait = {
			trait = groomed
			value = 4
		}
		has_trait = {
			trait = alu_fiend
			value = 4
		}
		has_trait = {
			trait = cambion
			value = 4
		}
		has_trait = {
			trait = lilith
			value = 8
		}
		has_trait = {
			trait = incubus
			value = 8
		}		
		society_rank = {
			rank = 4
			value = 10
		}
	}

	member_score_per_attribute = 3
	member_score_per_rank = 100

	member_score = {
		value = 10

		modifier = {
			trait = ambitious
			factor = 1.5
		}
		modifier = {
			trait = genius
			factor = 1.3
		}
		modifier = {
			trait = quick
			factor = 1.3
		}
		modifier = {
			trait = shrewd
			factor = 1.3
		}
		modifier = {
			trait = hedonist
			factor = 1.3
		}
		modifier = {
			trait = mystic
			factor = 1.3
		}
		modifier = {
			trait = seducer
			factor = 1.3
		}
		modifier = {
			trait = seductress
			factor = 1.3
		}
		modifier = {
			trait = schemer
			factor = 1.3
		}
		modifier = {
			trait = impaler
			factor = 1.3
		}
		modifier = {
			trait = lustful
			factor = 1.1
		}
		modifier = {
			trait = proud
			factor = 1.1
		}
		modifier = {
			trait = greedy
			factor = 1.1
		}
		modifier = {
			trait = deceitful
			factor = 1.1
		}
		modifier = {
			trait = arbitrary
			factor = 1.1
		}
		modifier = {
			trait = kind
			factor = 0.8
		}
		modifier = {
			trait = temperate
			factor = 0.8
		}
		modifier = {
			trait = charitable
			factor = 0.8
		}
		modifier = {
			trait = humble
			factor = 0.8
		}
		modifier = {
			trait = monk
			factor = 0.5
		}
		modifier = {
			trait = nun
			factor = 0.5
		}
		modifier = {
			trait = immortal
			factor = 2
		}
		modifier = {
			trait = lovers_pox
			factor = 0.5
		}
		modifier = {
			trait = is_fat
			factor = 0.9
		}
		modifier = {
			trait = is_malnourished
			factor = 0.9
		}
		modifier = {
			trait = fair
			factor = 1.5
		}
		modifier = {
			trait = groomed
			factor = 1.1
		}
		
	}
	
	startup_populate = {
		trigger = {
			NOR = {
				trait = houseirae_matron_mother
				trait = dwf_ghost
			}
			NOT = {
				has_game_rule = {
					name = devil_worshipers
					value = none
				}
			}
			ai = yes
			controls_religion = no
			OR = {
				trait = lustful
				trait = hedonist
				trait = alu_fiend
				trait = cambion
				trait = lilith
				trait = incubus
				trait = seducer
				trait = seductress
				trait = drunkard
				trait = possessed
				trait = lunatic
			}
			NOT = {
				trait = angel
				trait = chaste
				trait = celibate
			}
			practical_age = 16
			is_in_society = no
			NOT = { higher_tier_than = DUKE }
			NOR = {
				mercenary = yes
				holy_order = yes
			}
		}
	}
}
