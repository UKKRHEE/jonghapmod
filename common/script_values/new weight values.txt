#################
#	Weight
################
#These values are used to calculate the target weight that characters will trend towards once every three years

underweight_threshold = 0
overweight_threshold = 0

feast_weight_modifier_value = 7
hunt_weight_modifier_value = -5

character_weight_base_value = {
	add = 0
	#Any modifiers that will affect weight?
	if = {
		limit = {
			is_ai = yes # Players gaining weight is handled through health.5004
			has_character_modifier = gaining_weight_modifier
		}
		add = 35
	}
	if = {
		limit = {
			is_ai = yes # Players losing weight is handled through health.5005
			has_character_modifier = losing_weight_modifier
		}
		add = -35
	}
	if = {
		limit = {
			has_character_modifier = fasting_bad_modifier
		}
		add = -10
	}

	#Any activities attended/other things that will affect weight?
	if = {
		limit = {
			has_variable = character_weight_variable
		}
		add = var:character_weight_variable
	}

	# PRISON/STARVATION
	if = {
		limit = {
			is_imprisoned = yes
		}
		if = {
			limit = {
				is_in_prison_type = dungeon
			}
			add = -75
		}
		else = {
			add = -30
		}
	}

	# DISEASE
	if = {
		limit = {
			has_trait = consumption
		}
		add = -75
	}
	if = {
		limit = {
			has_trait = cancer
		}
		add = -50
	}
	if = {
		limit = {
			has_trait = great_pox
		}
		add = -35
	}
	if = {
		limit = {
			has_trait = leper
		}
		add = -15
	}

	########
	#Trait check
	########
	#ADD
	if = {
		limit = {
			faith = { has_doctrine = tenet_hedonistic }
		}
		add = 50
		}
	if = {
		limit = {
			AND = {
			faith = { has_doctrine = tenet_hedonistic }
			has_trait = zealous
		}
		}
		add = 60
		}
	if = {
		limit = {
			AND = {
			faith = { has_doctrine = tenet_hedonistic }
			has_trait = diligent
		}
		}
		add = 30
		}
	if = {
		limit = {
			AND = {
			faith = { has_doctrine = tenet_hedonistic }
			has_trait = humble
		}
		}
		add = 20
		}
	if = {
		limit = { has_trait = gluttonous }
		add = 50
	}
	if = {
		limit = { has_trait = comfort_eater }
		add = 25
	}
	if = {
		limit = { has_trait = drunkard }
		add = 20
	}
	if = {
		limit = { has_trait = hashishiyah }
		add = 20
	}
	if = {
		limit = { has_trait = lazy }
		add = 10
	}
	if = {
		limit = { has_trait = greedy }
		add = 10
	}
	if = {
		limit = { has_trait = calm }
		add = 10
	}
	if = {
		limit = { has_trait = trusting }
		add = 10
	}
	if = {
		limit = { has_trait = gregarious }
		add = 10
	}
	if = {
		limit = { has_trait = patient }
		add = 5
	}
	if = {
		limit = { has_trait = arrogant }
		add = 5
	}
	if = {
		limit = { has_trait = ambitious	}
		add = 5
	}

	if = {
		limit = {
			has_trait = lifestyle_reveler
		}
		if = {
			limit = {
				has_trait = reveler_3
			}
			add = 15
		}
		else_if = {
			limit = {
				has_trait = reveler_2
			}
			add = 10
		}
		else = {
			add = 5
		}
	}

	#SUBTRACT
	if = {
		limit = { has_trait = shy }
		add = -5
	}	
	if = {
		limit = { has_trait = zealous }
		add = -5
	}
	if = {
		limit = { has_trait = craven }
		add = -5
	}
	if = {
		limit = { has_trait = impatient }
		add = -10
	}
	if = {
		limit = { has_trait = fickle}
		add = -10
	}
	if = {
		limit = { has_trait = vengeful }
		add = -10
	}
	if = {
		limit = { has_trait = wrathful }
		add = -10
	}
	if = {
		limit = { has_trait = humble }
		add = -10
	}
	if = {
		limit = { has_trait = content }
		add = -15
	}
	if = {
		limit = { has_trait = generous }
		add = -15
	}
	if = {
		limit = { has_trait = diligent }
		add = -15 # Further 'moderation' impact below.
	}
	if = {
		limit = { has_trait = temperate }
		add = -20 # Further 'moderation' impact below.
	}
	if = {
		limit = { has_trait = reclusive }
		add = -20
	}
	if = {
		limit = { has_trait = paranoid }
		add = -25
	}
	if = {
		limit = { has_trait = inappetetic }
		add = -50
	}

	# MODERATION - reduces weight if overweight, and increases it if underweight
	if = {
		limit = {
			has_trait = athletic
		}
		multiply = 0.8
	}
	if = {
		limit = {
			has_trait = physique_good_1
		}
		multiply = 0.9
	}
	if = {
		limit = {
			has_trait = physique_good_2
		}
		multiply = 0.8
	}
	if = {
		limit = {
			has_trait = physique_good_3
		}
		multiply = 0.7
	}
	if = {
		limit = {
			has_trait = temperate
		}
		multiply = 0.9
	}
	if = {
		limit = {
			has_trait = diligent
		}
		multiply = 0.9
	}

	#Bad physique has the opposite effect, making you skew even further towards extremes
	if = {
		limit = {
			has_trait = physique_bad_1
		}
		multiply = 1.1
	}
	if = {
		limit = {
			has_trait = physique_bad_2
		}
		multiply = 1.2
	}
	if = {
		limit = {
			has_trait = physique_bad_3
		}
		multiply = 1.3
	}
}

base_weight_plus = {
	add = base_weight
	add = 5
}

base_weight_minus = {
	add = base_weight
	add = -5
}

#The actual value that will be looked at
character_weight_target_value = {
	add = character_weight_base_value

	#To even the numbers out some if you have "good" and/or active traits
	if = {
		limit = {
			OR = {
				character_weight_base_value < base_weight_minus
				character_weight_base_value > base_weight_plus
			}
		}
		if = {
			limit = { #You weigh too little
				character_weight_base_value < base_weight_minus
			}
			if = {
				limit = {
					has_trait = lifestyle_hunter
				}
				if = {
					limit = {
						has_trait = hunter_3
					}
					add = 5
				}
				if = {
					limit = {
						has_trait = hunter_2
					}
					add = 4
				}
				else = {
					add = 2
				}
			}
			if = {
				limit = {
					has_lifestyle = martial_lifestyle
				}
				add = 10
			}
		}
		else = { #You weigh too much
			if = {
				limit = {
					has_trait = lifestyle_hunter
				}
				if = {
					limit = {
						has_trait = hunter_3
					}
					add = -5
				}
				if = {
					limit = {
						has_trait = hunter_2
					}
					add = -4
				}
				else = {
					add = -2
				}
			}
			if = {
				limit = {
					has_lifestyle = martial_lifestyle
				}
				add = -10
			}
		}
	}
	if = {
		limit = {
			is_alive = yes
			is_male = yes
			trigger_if = {
				limit = { is_alive = yes }
				has_variable = male_fat_preference
			}
		}
		add = {
			value = var:male_fat_preference
			subtract = actual_fat
			max = 10
			min = -10
		}
	}
	else_if = {
		limit = {
			is_alive = yes
			is_female = yes
			trigger_if = {
				limit = { is_alive = yes }
				has_variable = female_fat_preference
			}
		}
		add = {
			value = var:female_fat_preference
			subtract = actual_fat
			max = 10
			min = -10
		}
	}
}
