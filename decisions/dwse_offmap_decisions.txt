decisions = {
	dragon_battle = {
		is_high_prio = yes
		potential = {
			any_child = {
				trait = dragon_adult
				is_adult = yes
				has_character_modifier = dragon_satisfied
				NOT = { 
					has_character_modifier = dragon_fire
				}
				NOT = {
					OR = {
						trait = wounded
						trait = severely_injured 
					}
				}
			}
			in_battle = yes
			in_command = yes
		}

		allow = {
			hidden_tooltip = { NOT = { has_character_flag = dragon_flames } }
		}

		effect = {
			set_character_flag = dragon_flames
		
	character_event = { id = dwseom.1100 }
		}
		ai_will_do = {
			factor = 1 
		}
	}
	dragon_sex_event = {
		is_high_prio = yes
		potential = {
			NOT = {
				has_character_flag = dragon_sexy_times
			}
			any_child = {
				trait = dragon_adult
				is_female = no
				is_adult = yes
				NOT = { 
					has_character_modifier = dragon_satisfied				
				}
				NOT = {
					OR = {
						trait = wounded
						trait = severely_injured 
					}
				}
			}
			OR = {
				ROOT = {
					is_adult = yes
					is_female = yes
					is_pregnant = no
					practical_age < 45
					prisoner = no
					NOR = {
						trait = dragon_pregnancy
						trait = dwf_ghost
					}
				}
				any_courtier_or_vassal = {
					is_adult = yes
					is_female = yes
					is_pregnant = no
					practical_age < 45
					prisoner = no
					has_assigned_minor_title = dwse_weyrleader
					NOR = {
						trait = dragon_pregnancy
						trait = dwf_ghost
					}
				}
				any_courtier = {
					is_adult = yes
					is_female = yes
					is_pregnant = no
					practical_age < 45
					prisoner = yes
					NOT = {
						trait = dragon_pregnancy
					}
				}
			}			
		}

		allow = {
			any_child = {
				trait = dragon_adult
				is_female = no
				is_adult = yes
				NOT = { 
					has_character_modifier = dragon_satisfied				
				}
				NOT = {
					OR = {
						trait = wounded
						trait = severely_injured 
					}
				}
			}
			OR = {
				ROOT = {
					is_adult = yes
					is_female = yes
					is_pregnant = no
					practical_age < 45
					prisoner = no
					NOT = {
						trait = dragon_pregnancy
					}
				}
				any_courtier_or_vassal = {
					is_adult = yes
					is_female = yes
					is_pregnant = no
					practical_age < 45
					prisoner = no
					has_assigned_minor_title = dwse_weyrleader
					NOT = {
						trait = dragon_pregnancy
					}
				}
				any_courtier = {
					is_adult = yes
					is_female = yes
					is_pregnant = no
					prisoner = yes
					NOT = {
						trait = dragon_pregnancy
					}
				}
			}	
		}

		effect = {
			set_character_flag = dragon_sexy_times
			narrative_event = { id = dwseom.1000 }
		}
		ai_will_do = {
			factor = 1 
		}
	}
}
offmap_decisions = {
	dwse_offer_slave = {
		only_playable = yes
		button_name = dwse_gifts
		
		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		ai_check_interval = 36
		show_third_party_potential = yes

		potential = {
			is_offmap_tag = offmap_dwse	
		}
	
		from_potential = {
			NOT = {
				has_dwse_no_empire = yes
			}			
			mercenary = no
			holy_order = no
			is_landed = yes
		}

		allow = {
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}
		
		third_party_potential = {
			show_only_failed_conditions = yes
			FROMFROM = {
				show_scope_change = no
				ai = yes
				is_adult = yes
				trait = branded_slave
				is_heir = no
				NOT = { trait = dwf_ghost }
				NOT = { is_landed = yes }
				custom_tooltip = {
					text = is_not_incapable_inbred_or_imbecile_tt
					NOT = { trait = incapable }
					NOT = { trait = inbred }
					NOT = { trait = imbecile }
				}
				custom_tooltip = {
					text = is_not_maimed_or_infirm_tt
					NOT = { trait = maimed }
					NOT = { trait = infirm }
				}				
			}
		}

		third_party_allow = {
			show_only_failed_conditions = yes
			FROMFROM = {
				is_ill = no
				custom_tooltip = {
					text = is_not_wounded_severely_injured_tt
					NOT = { trait = wounded }
					NOT = { trait = severely_injured }
				}
				is_inaccessible_trigger = no
			}
		}
		
		third_party_score = {
			factor = 100
			
			additive_modifier = {
				value = -60
				FROM = {
					show_scope_change = no
					NOT = { 
						any_fort = {
							fort_has_building = dwse_dragon_roost
						}
 					}
				}
			}

			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					martial = 12					
					hidden_trigger = {
						NOT = { martial = 14 }
					}
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					martial = 14					
					hidden_trigger = {
						NOT = { martial = 16 }
					}
				}
			}
			additive_modifier = {
				value = 60
				FROMFROM = {
					show_scope_change = no 
					martial = 16				
					hidden_trigger = {
						NOT = { martial = 18 }
					}
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					diplomacy = 8					
					hidden_trigger = {
						NOT = { diplomacy = 12 }
					}
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					diplomacy = 12					
					hidden_trigger = {
						NOT = { diplomacy = 16 }
					}
				}
			}
			additive_modifier = {
				value = 75
				FROMFROM = { 
					show_scope_change = no
					diplomacy = 16				
					hidden_trigger = {
						NOT = { diplomacy = 20 }
					}
				}
			}
			additive_modifier = {
				value = 120
				FROMFROM = { 
					show_scope_change = no
					diplomacy = 20
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					martial = 8					
					hidden_trigger = {
						NOT = { martial = 12 }
					}
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					martial = 12					
					hidden_trigger = {
						NOT = { martial = 16 }
					}
				}
			}
			additive_modifier = {
				value = 75
				FROMFROM = { 
					show_scope_change = no
					martial = 16				
					hidden_trigger = {
						NOT = { martial = 20 }
					}
				}
			}
			additive_modifier = {
				value = 120
				FROMFROM = { 
					show_scope_change = no
					martial = 20
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					stewardship = 8					
					hidden_trigger = {
						NOT = { stewardship = 12 }
					}
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					stewardship = 12					
					hidden_trigger = {
						NOT = { stewardship = 16 }
					}
				}
			}
			additive_modifier = {
				value = 75
				FROMFROM = { 
					show_scope_change = no
					stewardship = 16				
					hidden_trigger = {
						NOT = { stewardship = 20 }
					}
				}
			}
			additive_modifier = {
				value = 120
				FROMFROM = { 
					show_scope_change = no
					stewardship = 20
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					intrigue = 8					
					hidden_trigger = {
						NOT = { intrigue = 12 }
					}
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					intrigue = 12					
					hidden_trigger = {
						NOT = { intrigue = 16 }
					}
				}
			}
			additive_modifier = {
				value = 75
				FROMFROM = { 
					show_scope_change = no
					intrigue = 16				
					hidden_trigger = {
						NOT = { intrigue = 20 }
					}
				}
			}
			additive_modifier = {
				value = 120
				FROMFROM = { 
					show_scope_change = no
					intrigue = 20
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					learning = 8					
					hidden_trigger = {
						NOT = { learning = 12 }
					}
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					learning = 12					
					hidden_trigger = {
						NOT = { learning = 16 }
					}
				}
			}
			additive_modifier = {
				value = 75
				FROMFROM = { 
					show_scope_change = no
					learning = 16				
					hidden_trigger = {
						NOT = { learning = 20 }
					}
				}
			}
			additive_modifier = {
				value = 120
				FROMFROM = { 
					show_scope_change = no
					learning = 20
				}
			}
			additive_modifier = {
				value = 80
				FROMFROM = { 
					show_scope_change = no
					trait = fair
				}
			}
			additive_modifier = {
				value = -80
				FROMFROM = { 
					show_scope_change = no
					trait = ugly
				}
			}
			additive_modifier = {
				value = 25
				FROMFROM = { 
					show_scope_change = no
					has_character_modifier = dw_slave_pleasure_complete 
				}
			}
			additive_modifier = {
				value = 25
				FROMFROM = { 
					show_scope_change = no
					has_character_modifier = dw_slave_warrior_complete 
				}
			}
			additive_modifier = {
				value = 25
				FROMFROM = { 
					show_scope_change = no
					has_character_modifier = dw_slave_common_complete 
				}
			}
			additive_modifier = {
				value = 25
				FROMFROM = { 
					show_scope_change = no
					has_character_modifier = dw_slave_skilled_complete 
				}
			}
			additive_modifier = {
				value = 25
				FROMFROM = { 
					show_scope_change = no
					has_character_modifier = dw_werewolf_bitch 
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = genius
				}
			}
			additive_modifier = {
				value = 30
				FROMFROM = { 
					show_scope_change = no
					trait = quick
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = strong
				}
			}
			additive_modifier = {
				value = 30
				FROMFROM = {
					show_scope_change = no
					trait = robust
				}
			}
			additive_modifier = {
				value = 30
				FROMFROM = {
					show_scope_change = no
					trait = shrewd
				}
			}
			additive_modifier = {
				value = 30
				FROMFROM = {
					show_scope_change = no
					trait = charitable
				}
			}
			additive_modifier = {
				value = 30
				FROMFROM = {
					show_scope_change = no
					trait = gregarious
				}
			}
			additive_modifier = {
				value = 30
				FROMFROM = {
					show_scope_change = no
					trait = kind
				}
			}
			additive_modifier = {
				value = -50
				FROMFROM = {
					show_scope_change = no
					trait = lunatic
				}
			}
			additive_modifier = {
				value = 25
				custom_tooltip = {
					text = tribute_interaction_level3_education_tt
					FROMFROM = { 
						OR = {
							trait = intricate_webweaver
							trait = charismatic_negotiator
							trait = fortune_builder
							trait = skilled_tactician
							trait = scholarly_theologian
						}
					}
				}
			}
			additive_modifier = {
				value = 50
				custom_tooltip = {
					text = tribute_interaction_level4_education_tt
					FROMFROM = { 
						OR = {
							trait = elusive_shadow
							trait = grey_eminence
							trait = midas_touched
							trait = brilliant_strategist
							trait = mastermind_theologian
						}
					}
				}
			}

			additive_modifier = {
				value = 80
				FROMFROM = {
					show_scope_change = no 
					martial = 18				
					hidden_trigger = {
						NOT = { martial = 20 }
					}
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = {
					show_scope_change = no 
					martial = 20				
					hidden_trigger = {
						NOT = { martial = 22 }
					}
				}
			}
			additive_modifier = {
				value = 120
				FROMFROM = {
					show_scope_change = no 
					martial = 22				
					hidden_trigger = {
						NOT = { martial = 24 }
					}
				}
			}
			additive_modifier = {
				value = 140
				FROMFROM = { 
					show_scope_change = no
					martial = 24
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = strategist
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = duelist
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					trait = hunter
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = berserker
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = adventurer
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					trait = patient
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					trait = brave
				}
			}
			additive_modifier = {
				value = 20
				FROMFROM = { 
					show_scope_change = no
					trait = diligent
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = shieldmaiden
				}
			}
		
			additive_modifier = {
				value = 50
				FROMFROM = { 
					show_scope_change = no
					trait = sapper
				}
			}
			additive_modifier = {
				value = 50
				FROMFROM = { 
					show_scope_change = no
					trait = master_of_flame
				}
			}
			additive_modifier = {
				value = 50
				FROMFROM = { 
					show_scope_change = no
					trait = logistics_expert
				}
			}
			additive_modifier = {
				value = 50
				FROMFROM = { 
					show_scope_change = no
					trait = levy_coordinator
				}
			}
			
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = light_foot_leader
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = heavy_infantry_leader
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = cavalry_leader
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = inspiring_leader
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = trickster
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = organizer
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = defensive_leader
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = experimenter
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = flanker
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = aggressive_leader
				}
			}
			additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					trait = siege_leader
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = neko
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = werewolf
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = futa
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = vampire
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = elf
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = orc
				}
			}
						additive_modifier = {
				value = 40
				FROMFROM = { 
					show_scope_change = no
					is_female = yes
				}
			}

			additive_modifier = {
				value = 25
				custom_tooltip = {
					text = tribute_interaction_level3_education_tt
					FROMFROM = { 
						trait = skilled_tactician
					}
				}
			}
			additive_modifier = {
				value = 50
				custom_tooltip = {
					text = tribute_interaction_level4_education_tt
					FROMFROM = { 
						trait = brilliant_strategist
					}
				}
			}
			modifier = {
				factor = 2.0
				FROMFROM = { 
					show_scope_change = no
					liked_by_offmap = {
						type = offmap_dwse
					}
				}
			}
			modifier = {
				factor = 0.5
				FROMFROM = {
					show_scope_change = no 
					disliked_by_offmap = {
						type = offmap_dwse
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = { 
					show_scope_change = no
					liked_by_offmap = {
						type = offmap_dwse
					}
				}
			}
			modifier = {
				factor = 0.66
				FROM = {
					show_scope_change = no 
					disliked_by_offmap = {
						type = offmap_dwse
					}
				}
			}
		}
	
		effect = {
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}
			FROMFROM = {
				save_event_target_as = person_sent_as_tribute
			}
			#if = {
			#	limit = {
			#		FROMFROM = { disliked_by_offmap = offmap_dwse}
			#	}
			#	custom_tooltip = { text = notification_china_dislike_tt }
			#}
			#if = {
			#	limit = {
			#		NOT = { FROMFROM = { disliked_by_offmap = offmap_dwse} }
			#		FROMFROM = { liked_by_offmap = offmap_dwse}
			#	}
			#	custom_tooltip = { text = notification_china_like_tt }
			#}
			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = offmap_dwse
					value = local_third_party_score
				}
			}
			if = {
				limit = {
					FROMFROM = {
						has_character_flag = dwf_personally_branded_slave
					}
				}
				FROM = {
					change_variable = { which = dwf_slaves_sold value = 1 }
				}
			}
			
			# Like/Dislike effect description
			#################################
			if = {
				limit = {
					OR = {
						FROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
					NOR = {
						FROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
				}
				e_offmap_dwse_voice = {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = likes_tt }
					}
				}
			}
			
			if = {
				limit = {
					OR = {
						FROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
					NOR = {
						FROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
				}
				e_offmap_dwse_voice= {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = dislikes_tt }
					}
				}
			}
			if = {
				limit = {
					OR = {
						FROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
					OR = {
						FROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
				}
				e_offmap_dwse_voice= {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = likes_but_dislikes_tt }
					}
				}
			}
			#################################
			
			FROMFROM = {
				show_scope_change = no
				leave_court_for_forest_effect = yes
			}
			hidden_effect = {
				FROM = {
					if = {
						limit = { local_third_party_score_low_trigger = yes }
						set_character_flag = sent_bad_tribute
					}
					if = {
						limit = { local_third_party_score_medium_trigger = yes }
						set_character_flag = sent_decent_tribute
					}
					if = {
						limit = { local_third_party_score_great_trigger = yes }
						set_character_flag = sent_great_tribute
					}
					letter_event = { id = JD.10050 days = 5 random = 2 }
				}
			}
		}
	

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0
				has_dwse_player_only_slaving = yes
			}
		}
	}
	dwse_send_ambassador = {
		only_playable = yes
		button_name = dwse_gifts
		
		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		ai_check_interval = 36
		show_third_party_potential = yes

		potential = {
			is_offmap_tag = offmap_dwse	
		}
	
		from_potential = {
			NOT = {
				has_dwse_no_empire = yes
			}
			NOT = {
				trait = dragon_adult
			}
			mercenary = no
			holy_order = no
			is_landed = yes
		}

		allow = {
			offmap_dwse= {
			}
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
				NOT = {
					has_character_flag = dragon_am_send
				}		
			}
		}
		
		third_party_potential = {
			FROMFROM = {
				show_scope_change = no
				is_child_of = FROMFROM
				is_adult = yes
				prisoner = no
				is_female = yes
				is_pregnant = no
				NOT = { trait = dwf_ghost }
				NOT = {
					practical_age >= 45
				}
				host = { character = FROMFROM }
				NOT = { trait = branded_slave }
				NOT = {
					trait = dragon_ambassador
				}
				custom_tooltip = {
					text = is_not_incapable_inbred_or_imbecile_tt
					NOT = { trait = incapable }
					NOT = { trait = inbred }
					NOT = { trait = imbecile }
				}
				custom_tooltip = {
					text = is_not_maimed_or_infirm_tt
					NOT = { trait = maimed }
					NOT = { trait = infirm }
				}				
			}
		}

		third_party_allow = {
		}
		effect = {
			FROM = {
				narrative_event = { id = dwseom.3000 days = 1 }
				set_character_flag = dragon_am_send
			}
		}
	
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.3 # slow down
			}
		}
	}
	dwse_sell_prisoner = {
		only_playable = yes
		button_name = dwse_gifts
		
		third_party_filter = home_court
		ai_third_party_filter = home_court
		third_party = FROM
		ai_check_interval = 36
		show_third_party_potential = yes

		potential = {
			is_offmap_tag = offmap_dwse	
		}
	
		from_potential = {
			NOT = {
				has_dwse_no_empire = yes
			}
			
			mercenary = no
			holy_order = no
			is_landed = yes
		}

		allow = {
			offmap_dwse= {
			}
			FROM = {
				show_scope_change = no
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}
		}
		
		third_party_potential = {
			FROMFROM = {
				ai = yes
				show_scope_change = no
				prisoner = yes
				host = { character = FROMFROM }
				NOT = { trait = branded_slave }
				NOT = { trait = dwf_ghost }
				custom_tooltip = {
					text = is_not_incapable_inbred_or_imbecile_tt
					NOT = { trait = incapable }
					NOT = { trait = inbred }
					NOT = { trait = imbecile }
				}
				custom_tooltip = {
					text = is_not_maimed_or_infirm_tt
					NOT = { trait = maimed }
					NOT = { trait = infirm }
				}				
			}
		}

		third_party_allow = {
			FROMFROM = {
				prisoner = yes
				host = { character = FROMFROM }
				is_ill = no
				custom_tooltip = {
					text = is_not_wounded_severely_injured_tt
					NOT = { trait = wounded }
					NOT = { trait = severely_injured }
				}
				is_inaccessible_trigger = no
			}
		}
		
		third_party_score = {
			factor = 100
			
			additive_modifier = {
				value = -20
				FROM = {
					show_scope_change = no
					NOT = { 
						any_fort = {
							fort_has_building = dwse_dragon_roost
						}
 					}
				}
			}

			additive_modifier = {
				value = 15
				FROMFROM = { 
					show_scope_change = no
					is_heir = yes
				}
			}
			additive_modifier = {
				value = 15
				FROMFROM = { 
					show_scope_change = no
					is_landed = yes 
				}
			}
			additive_modifier = {
				value = -25
				FROMFROM = { 
					show_scope_change = no
					is_adult = no
				}
			}

			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = neko
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = werewolf
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = futa
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = vampire
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = elf
				}
			}
			additive_modifier = {
				value = 100
				FROMFROM = { 
					show_scope_change = no
					trait = orc
				}
			}
						additive_modifier = {
				value = 10
				FROMFROM = { 
					show_scope_change = no
					is_female = yes
				}
			}
			modifier = {
				factor = 2.0
				FROMFROM = { 
					show_scope_change = no
					liked_by_offmap = {
						type = offmap_dwse
					}
				}
			}
			modifier = {
				factor = 0.5
				FROMFROM = {
					show_scope_change = no 
					disliked_by_offmap = {
						type = offmap_dwse
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = { 
					show_scope_change = no
					liked_by_offmap = {
						type = offmap_dwse
					}
				}
			}
			modifier = {
				factor = 0.66
				FROM = {
					show_scope_change = no 
					disliked_by_offmap = {
						type = offmap_dwse
					}
				}
			}
		}
	
		effect = {
			save_event_target_as = target_governor
			FROM = {
				sound_effect = china_grace_gain
				save_event_target_as = target_tribute_sender
			}
			FROMFROM = {
				save_event_target_as = person_sent_as_tribute
			}
			#if = {
			#	limit = {
			#		FROMFROM = { disliked_by_offmap = offmap_dwse}
			#	}
			#	custom_tooltip = { text = notification_china_dislike_tt }
			#}
			#if = {
			#	limit = {
			#		NOT = { FROMFROM = { disliked_by_offmap = offmap_dwse} }
			#		FROMFROM = { liked_by_offmap = offmap_dwse}
			#	}
			#	custom_tooltip = { text = notification_china_like_tt }
			#}
			FROM = {
				show_scope_change = no
				add_offmap_currency = {
					offmap = offmap_dwse
					value = local_third_party_score
				}
			}
			
			# Like/Dislike effect description
			#################################
			if = {
				limit = {
					OR = {
						FROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
					NOR = {
						FROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
				}
				e_offmap_dwse_voice = {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = likes_tt }
					}
				}
			}
			
			if = {
				limit = {
					OR = {
						FROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
					NOR = {
						FROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
				}
				e_offmap_dwse_voice= {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = dislikes_tt }
					}
				}
			}
			if = {
				limit = {
					OR = {
						FROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							liked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
					OR = {
						FROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
						FROMFROM = {
							disliked_by_offmap = {
								type = offmap_dwse
							}
						}
					}
				}
				e_offmap_dwse_voice= {
					show_scope_change = no
					offmap_power = {
						show_scope_change = no
						custom_tooltip = { text = likes_but_dislikes_tt }
					}
				}
			}
			#################################
			
			FROMFROM = {
				show_scope_change = no
				leave_court_for_forest_effect = yes
			}
			hidden_effect = {
				FROM = {
					if = {
						limit = { local_third_party_score_low_trigger = yes }
						set_character_flag = sent_bad_tribute
					}
					if = {
						limit = { local_third_party_score_medium_trigger = yes }
						set_character_flag = sent_decent_tribute
					}
					if = {
						limit = { local_third_party_score_great_trigger = yes }
						set_character_flag = sent_great_tribute
					}
					letter_event = { id = JD.10050 days = 5 random = 2 }
				}
			}
		}
	
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0
				has_dwse_player_only_slaving = yes
			}
		}
	}

#Get a Futa Slave
	dwse_futa_slave = {
		only_playable = yes
		button_name = dwse_boons
		ai_check_interval = 12

		from_potential = {
			NOT = {
				has_dwse_no_empire = yes
			}
			has_gender_bender_content = yes
			mercenary = no
			holy_order = no
			is_landed = yes		
		}

		potential = {
			is_offmap_tag = offmap_dwse
		}

#		potential = {
#			offmap_dwse = { governor = { character = ROOT } }
#		}

		allow = {
			FROM = {			
				show_scope_change = no
				has_offmap_currency = { offmap = offmap_dwse value = 500 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}

		}

		effect = {
			FROM = {
				show_scope_change = no
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = offmap_dwse
					value = -500
				}
			}
			hidden_effect = { offmap_dwse = { governor = { character_event = { id = dwseom.1 } } } }
		}

		ai_will_do = {
			factor = 0
			#factor = 1
			#modifier = {
			#	factor = 0.1 # slow down
			#}
			#modifier = {
			#	FROM = { NOT = { any_courtier = { learning = 15 } } }
			#	factor = 1.5
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { any_courtier = { learning = 15 } }
			#		OR = {
			#			NOT = { health = 3 }
			#			character_disease_trigger = yes
			#			has_symptom_trigger = yes
			#		}
			#	}
			#	factor = 10
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { has_grace_medium_trigger = yes }
			#	}
			#	factor = 0.1
			#}
		}
	}
	dwse__slavef = {
		only_playable = yes
		button_name = dwse_boons
		ai_check_interval = 12

		from_potential = {
			NOT = {
				has_dwse_no_empire = yes
			}
			mercenary = no
			holy_order = no
			is_landed = yes
		}

		potential = {
			is_offmap_tag = offmap_dwse
		}

#		potential = {
#			offmap_dwse = { governor = { character = ROOT } }
#		}

		allow = {
			FROM = {			
				show_scope_change = no
				has_offmap_currency = { offmap = offmap_dwse value = 250 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}

		}

		effect = {
			FROM = {
				show_scope_change = no
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = offmap_dwse
					value = -250
				}
			}
			hidden_effect = { offmap_dwse = { governor = { character_event = { id = dwseom.2 } } } }
		}


		ai_will_do = {
			factor = 0
			#factor = 1
			#modifier = {
			#	factor = 0.1 # slow down
			#}
			#modifier = {
			#	FROM = { NOT = { any_courtier = { learning = 15 } } }
			#	factor = 1.5
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { any_courtier = { learning = 15 } }
			#		OR = {
			#			NOT = { health = 3 }
			#			character_disease_trigger = yes
			#			has_symptom_trigger = yes
			#		}
			#	}
			#	factor = 10
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { has_grace_medium_trigger = yes }
			#	}
			#	factor = 0.1
			#}
		}
	}
	dwse__slavem = {
		only_playable = yes
		button_name = dwse_boons
		ai_check_interval = 12

		from_potential = {
			NOT = {
				has_dwse_no_empire = yes
			}
			mercenary = no
			holy_order = no
			is_landed = yes
		}

		potential = {
			is_offmap_tag = offmap_dwse
		}

#		potential = {
#			offmap_dwse = { governor = { character = ROOT } }
#		}

		allow = {
			FROM = {			
				show_scope_change = no
				has_offmap_currency = { offmap = offmap_dwse value = 250 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}

		}

		effect = {
			FROM = {
				show_scope_change = no
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = offmap_dwse
					value = -250
				}
			}
			hidden_effect = { offmap_dwse = { governor = { character_event = { id = dwseom.3 } } } }
		}


		ai_will_do = {
			factor = 0
			#factor = 1
			#modifier = {
			#	factor = 0.1 # slow down
			#}
			#modifier = {
			#	FROM = { NOT = { any_courtier = { learning = 15 } } }
			#	factor = 1.5
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { any_courtier = { learning = 15 } }
			#		OR = {
			#			NOT = { health = 3 }
			#			character_disease_trigger = yes
			#			has_symptom_trigger = yes
			#		}
			#	}
			#	factor = 10
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { has_grace_medium_trigger = yes }
			#	}
			#	factor = 0.1
			#}
		}
	}
	dwse__slavefe = {
		only_playable = yes
		button_name = dwse_boons
		ai_check_interval = 12

		from_potential = {
			NOT = {
				has_dwse_no_empire = yes
			}
			mercenary = no
			holy_order = no
			is_landed = yes
		}

		potential = {
			is_offmap_tag = offmap_dwse
		}

#		potential = {
#			offmap_dwse = { governor = { character = ROOT } }
#		}

		allow = {
			FROM = {
				show_scope_change = no				
				has_offmap_currency = { offmap = offmap_dwse value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}

		}

		effect = {
			FROM = {
				show_scope_change = no
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = offmap_dwse
					value = -1000
				}
			}
			hidden_effect = { offmap_dwse = { governor = { character_event = { id = dwseom.4 } } } }
		}


		ai_will_do = {
			factor = 0
			#factor = 1
			#modifier = {
			#	factor = 0.1 # slow down
			#}
			#modifier = {
			#	FROM = { NOT = { any_courtier = { learning = 15 } } }
			#	factor = 1.5
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { any_courtier = { learning = 15 } }
			#		OR = {
			#			NOT = { health = 3 }
			#			character_disease_trigger = yes
			#			has_symptom_trigger = yes
			#		}
			#	}
			#	factor = 10
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { has_grace_medium_trigger = yes }
			#	}
			#	factor = 0.1
			#}
		}
	}
	dwse__slaveme = {
		only_playable = yes
		button_name = dwse_boons
		ai_check_interval = 12

		from_potential = {
			NOT = {
				has_dwse_no_empire = yes
			}
			mercenary = no
			holy_order = no
			is_landed = yes
		}

		potential = {
			is_offmap_tag = offmap_dwse
		}

#		potential = {
#			offmap_dwse = { governor = { character = ROOT } }
#		}

		allow = {
			FROM = {
				show_scope_change = no
				has_offmap_currency = { offmap = offmap_dwse value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}

		}

		effect = {
			FROM = {
				show_scope_change = no
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = offmap_dwse
					value = -1000
				}
			}
			hidden_effect = { offmap_dwse = { governor = { character_event = { id = dwseom.5 } } } }
		}


		ai_will_do = {
			factor = 0
			#factor = 1
			#modifier = {
			#	factor = 0.1 # slow down
			#}
			#modifier = {
			#	FROM = { NOT = { any_courtier = { learning = 15 } } }
			#	factor = 1.5
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { any_courtier = { learning = 15 } }
			#		OR = {
			#			NOT = { health = 3 }
			#			character_disease_trigger = yes
			#			has_symptom_trigger = yes
			#		}
			#	}
			#	factor = 10
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { has_grace_medium_trigger = yes }
			#	}
			#	factor = 0.1
			#}
		}
	}

	dwse_slave_war = {
		only_playable = yes
		button_name = dwse_boons
		ai_check_interval = 12

		from_potential = {
			NOT = {
				has_dwse_no_empire = yes
			}
			mercenary = no
			holy_order = no
			is_landed = yes
		}

		potential = {
			is_offmap_tag = offmap_dwse
		}

#		potential = {
#			offmap_dwse = { governor = { character = ROOT } }
#		}

		allow = {
			FROM = {
				show_scope_change = no
				any_fort = {
					fort_has_building = dwse_dragon_roost
				}				
				has_offmap_currency = { offmap = offmap_dwse value = 1000 }
				prisoner = no
				NOT = { trait = incapable }
				is_inaccessible_trigger = no
			}

		}

		effect = {
			FROM = {
				add_character_modifier = { name = dwse_war duration = -1 }	
				show_scope_change = no
				sound_effect = china_grace_spend
				add_offmap_currency = {
					offmap = offmap_dwse
					value = -1000
				}
			}
		}

		ai_will_do = {
			factor = 0
			#factor = 1
			#modifier = {
			#	factor = 0.1 # slow down
			#}
			#modifier = {
			#	FROM = { NOT = { any_courtier = { learning = 15 } } }
			#	factor = 1.5
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { any_courtier = { learning = 15 } }
			#		OR = {
			#			NOT = { health = 3 }
			#			character_disease_trigger = yes
			#			has_symptom_trigger = yes
			#		}
			#	}
			#	factor = 10
			#}
			#modifier = {
			#	FROM = {
			#		NOT = { has_grace_medium_trigger = yes }
			#	}
			#	factor = 0.1
			#}
		}
	}

	dragon_festival = {
		only_playable = yes
		button_name = dwse_gifts
		ai_check_interval = 100
		
		from_potential = {
			OR = {
				has_dwse_dragon_on = yes
				has_dwse_player_only_slaving = yes
			}
			is_adult = yes
			is_female = yes
			practical_age < 45
			NOT = {
				trait = dragon_adult
			}
			NOT = { trait = dwf_ghost }
			NOT = {
				has_character_modifier = dragon_festival_modifier 
			} 
		}
		
		potential = {
			is_offmap_tag = offmap_dwse
		}
		
		allow = {
			FROM = {
				show_scope_change = no
				war = no				
				custom_tooltip = {
					text = health_travel_condition
					hidden_tooltip = {
						NOR = {
							trait = dragon_pregnancy
							trait = pregnant
							trait = incapable
							trait = blinded
							trait = has_tuberculosis
							trait = has_typhoid_fever
							trait = has_typhus
							trait = has_bubonic_plague
							trait = has_measles
							trait = has_small_pox
							trait = has_aztec_disease
						}
					}
				}
			}
		}
		
		effect = {
			FROM = {
				narrative_event = {
					id = dwseom.500
				}
			}
		}
		
		ai_will_do ={
			factor = 1
			modifier = {
				factor = 0.01 #slow down
			}
		}
	}
	return_dragon_egg = {
		only_playable = yes
		button_name = dwse_gifts
		ai_check_interval = 100
		
		from_potential = {
			OR = {
				has_dwse_dragon_on = yes
				has_dwse_player_only_slaving = yes
			}
			has_artifact = dragon_egg
		}
		
		potential = {
			is_offmap_tag = offmap_dwse
		}
		
		allow = {
			FROM = {
				show_scope_change = no
				any_fort = {
					fort_has_building = dwse_dragon_roost
				}
				war = no
			}
		}
		
		effect = {
			FROM = {
				narrative_event = {
					id = dwseom.700
				}
			}
		}
		
		ai_will_do ={
			factor = 1
			modifier = {
				factor = 0.01 #slow down
			}
		}
	}
}

targetted_decisions = {
	dwse_hatch_dragon = {
		filter = self
		ai_target_filter = self
		from_potential = {
		}
		potential = {
			OR = {
				has_dwse_dragon_on = yes
				has_dwse_player_only_slaving = yes
			}
			prisoner = no
			character = FROM 
			has_artifact = dragon_egg
			OR = {
				is_landed = yes
				mercenary = yes
			}
		}
		allow = {
			prisoner = no
			character = FROM 
			has_artifact = dragon_egg
			OR = {
				is_landed = yes
				mercenary = yes
			}
		}
		effect = {
			narrative_event = { id = dwseom.800 } #Self target
		}
		ai_will_do = {
			factor = 1 # 100%
		}		
	}
	dragon_kidnap = {
		filter = all
		ai_target_filter = realm
		from_potential = {
			OR = {
				has_dwse_dragon_on = yes
				has_dwse_player_only_slaving = yes
			}
			ai = no # Player only
			any_child = {
				trait = dragon_adult
				is_adult = yes
				is_alive = yes
				has_character_modifier = dragon_satisfied
			}
		}
		potential = {
			NOT = { trait = dragon_adult }
			prisoner = no
		}
		allow = {
			always = yes # For our testing purposes
		}
		effect = {
			FROM = { narrative_event = { id = dwseom.3800 }}
		}
		ai_will_do = {
			factor = 0 # Not wanting the ai to do this at this time
		}
	}
	dragon_leave = {
		filter = realm
		ai = yes
		ai_target_filter = realm
		from_potential = {
			ai = yes
		}
		potential = {
			NOT = {
				has_character_flag = dragon_leaving	
			}
			trait = dragon_adult
			mother_even_if_dead = {
				is_alive = no
			}
			is_ruler = no
		}
		allow = {
			always = yes # For our testing purposes
		}
		effect = {
			set_character_flag = dragon_leaving
			liege = {
				narrative_event = { id = dwseom.900}
			}
		}
		ai_will_do = {
			factor = 1 
		}
	}
}
