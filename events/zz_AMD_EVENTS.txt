#	Crusader Kings 2 : Advanced Medieval Desires			#	Events
################################################################################
#	Dark World 모드 제작자에게 감사.
#	그의 모드는 이 모드 제작에 큰 영감을 주었습니다.
#	이 모드는 제작 과정에서 DW모드를 좀 참조하였습니다.
#
#	Jack-O-Ninetail의 제작자인 Old Huntsman에게도 감사.
#	그의 게임은 이 모드의 제작에 큰 도움이 되었습니다.
#	이 모드의 그래픽 및 사운드는 그 게임에 사용된 것을 일부 빌려왔습니다.
#
#	무엇보다도 eramaker의 제작자에게 큰 경의를 표합니다.
#	이 모드는 emuera 기반 게임들에게 정신적으로 매우 큰 영향을 받았습니다.
#	대체 어디서 영향을 받았냐고 하시면 전체적으로 살펴보면 그런 기운이 느껴집니다,
#
#	이 모드에서, '인간 플레이어'는 AMD_T_IS_PLAYER = {	ai = no		is_playable = yes	} 로 정의하고 있습니다.
#	멀티플레이 상황에서 사용할 것은 상정하지 않았습니다.
#

namespace = AMD

#행위 실행 전에 설정해야 하는 것 : 관람자, 당사자를 ATK, DEF, POV 스코프 지정


#10000-19999	on_action
	#10000-10999	on_startup : V-Roll B-Roll
	#11000-11999	on_marriage : 첫날밤 이벤트 출력 또는 행위 처리
	#11000-11999	on_forced_consort : 이벤트 출력 또는 행위 처리
	#12000-12999	on_pregnancy
	#12000-12999	on_birth
	#12000-12999	on_adolescence
	#12000-12999	on_yearly_childhood_pulse
	#12000-12999	on_adulthood
#20000-29999	디시전 이벤트
#30000-39999	추가 이벤트
#90000-99999	내부처리, 장면 출력


character_event = {	id = AMD.9999	#시공의폭풍 및 주인 설정
	ai = no 
	hide_window = yes 
	is_triggered_only = yes
	trigger = {
		NOT = {	has_global_flag = AMD_GF_APU_BOOT	}
	}
	immediate = {
		activate_title = { title = e_AMD_NEXUS status = yes }
		if = {	limit = {	event_target:AMD_ET_APU = {	has_landed_title = event_target:AMD_ET_APU_TITLE	}	}
			break = yes
		}
		else_if = {	limit = {	event_target:AMD_ET_APU = {	is_alive = yes	}	}
			event_target:AMD_ET_APU = {	grant_title = event_target:AMD_ET_APU_TITLE	}
		}
		else = {
			activate_title = { title = e_AMD_NEXUS status = no }
			e_AMD_NEXUS = {
				set_title_flag = AMD_TF_APU
				save_global_event_target_as = AMD_ET_APU_TITLE
			}
			clear_global_event_target = AMD_ET_APU
			create_character = {
				female = no
				age = 99
				immortal_age = 1
				religion = pagan
				culture = cat
				dynasty = NONE
				trait = immortal
				trait = elusive_shadow
				trait = kind
				trait = charitable
				trait = patient
				trait = administrator
				trait = AMD_virgin
				trait = AMD_bodysize_gene_5
				attributes = {
					diplomacy = 100
					martial = 100
					stewardship = 100
					intrigue = 100
					learning = 100
				}
			}
			new_character = {
				AMD_E_APU_SETUP = yes
			}
		}
		set_global_flag = AMD_GF_APU_BOOT
	}
}


#10000-19999	on_action

#	10000-10999	on_startup : initial v roll, b roll
character_event = {	id = AMD.10001		#on_startup AMD_CMF_v_roll
	is_triggered_only = yes
	hide_window = yes
	#게임 로딩시, 그리고 일부 신규캐릭터 대상으로 실행된다.
	#	버진체크를 안 했고, 살아있어야만 실행.
	trigger = {	NOT = {	has_character_modifier = AMD_CMF_v_roll	}	is_alive = yes	}
	immediate = {
		if = {	limit = {	is_adult = yes	}	AMD_E_SET_SEX_SKILL = yes	}	#성인이면 기술부여
		if = {		#모친 생존시 경험 처리
			limit = {	mother = {	is_alive = yes	}	}
			mother = {	AMD_E_SEX_UNKNOWN = yes	}
		}
		if = {		#부친 생존시 경험 처리
			limit = {	father = {	is_alive = yes	}	}
			father = {	AMD_E_SEX_UNKNOWN = yes	}
		}
		if = {		#생부 생존시 경험 처리
			limit = {
				is_father_real_father = no
				real_father = {	is_alive = yes	}
			}
			real_father = {	AMD_E_SEX_UNKNOWN = yes	}
		}
		if = {		#임신중일시 경험 및 종부와 관계 처리 후 종료
			limit = {	is_pregnant = yes	}
			AMD_E_SEX_UNKNOWN = yes
			father_of_unborn = {	#종부가 살아있으면 종부에게도 경험 1회
				if = {	limit = {	is_alive = yes	}
					AMD_E_SEX_UNKNOWN = yes
					AMD_E_SET_SEX_OPINION_WITH_PREV = yes
				}
			}
			break = yes
		}
		if = {		#이미 특성이 있음 - 종료
			limit = {	trait = AMD_virgin	}
			AMD_E_ACM_V_ROLL = yes
			break = yes
		}
		if = {		#결혼 - 경험 및 배우자와 관계 처리 후 종료
			limit = {	is_married = yes	}
			AMD_E_SEX_UNKNOWN = yes
			any_spouse = {
				AMD_E_SEX_UNKNOWN = yes
				AMD_E_SET_SEX_OPINION_WITH_PREV = yes
			}
			break = yes
		}
		if = {		#축첩 - 경험 및 배우자와 관계 처리 후 종료
			limit = {	is_consort = yes	}
			AMD_E_SEX_UNKNOWN = yes
			any_spouse = {
				AMD_E_SEX_UNKNOWN = yes
				AMD_E_SET_SEX_OPINION_WITH_PREV = yes
			}
			break = yes
		}
		if = {		#자식이 있음 - 경험 처리 후 종료
			limit = {	num_of_children = 1	}
			AMD_E_SEX_UNKNOWN = yes
			break = yes
		}
		#이러고도 아무것도 없을 경우에 롤 개시
		AMD_E_V_ROLL_LIST = yes
	}
}
character_event = {	id = AMD.10002		#on_startup	AMD_CMF_b_roll
	is_triggered_only = yes
	hide_window = yes
	trigger = {	NOT = {	has_character_modifier = AMD_CMF_b_roll	}	is_alive = yes	}
	immediate = {
		#이 이벤트는 초기 체크에만 쓰인다.
		if = {	#	아무것도 없다 : 랜덤+종족보정
			limit = {
				NOT = {
					trait = AMD_bodysize_gene_1
					trait = AMD_bodysize_gene_2
					trait = AMD_bodysize_gene_3
					trait = AMD_bodysize_gene_4
					trait = AMD_bodysize_gene_5
					trait = AMD_breast_1
					trait = AMD_breast_2
					trait = AMD_breast_3
					trait = AMD_breast_4
					trait = AMD_breast_5
					trait = AMD_penis_1
					trait = AMD_penis_2
					trait = AMD_penis_3
					trait = AMD_penis_4
					trait = AMD_penis_5
				}
			}
			AMD_E_B_ROLL_LIST = yes
		}
		if = {	#	있긴 한데 이상하다 : gene로 환원
			limit = {
				OR = {
					AND = {	is_female = yes
						OR = {
							trait = AMD_penis_1
							trait = AMD_penis_2
							trait = AMD_penis_3
							trait = AMD_penis_4
							trait = AMD_penis_5
						}
					}
					AND = {	is_female = no
						OR = {
							trait = AMD_breast_1
							trait = AMD_breast_2
							trait = AMD_breast_3
							trait = AMD_breast_4
							trait = AMD_breast_5
						}
					}
					AND = {	#	has b/p but no gene trait
						NOT = {
							trait = AMD_bodysize_gene_1
							trait = AMD_bodysize_gene_2
							trait = AMD_bodysize_gene_3
							trait = AMD_bodysize_gene_4
							trait = AMD_bodysize_gene_5
						}
						OR = {
							trait = AMD_breast_1
							trait = AMD_breast_2
							trait = AMD_breast_3
							trait = AMD_breast_4
							trait = AMD_breast_5
							trait = AMD_penis_1
							trait = AMD_penis_2
							trait = AMD_penis_3
							trait = AMD_penis_4
							trait = AMD_penis_5
						}
					}
				}
			}
			trigger_switch = {
				on_trigger = trait
				AMD_penis_1 = {	add_trait = AMD_bodysize_gene_1	remove_trait = AMD_penis_1	}
				AMD_penis_2 = {	add_trait = AMD_bodysize_gene_2	remove_trait = AMD_penis_2	}
				AMD_penis_3 = {	add_trait = AMD_bodysize_gene_3	remove_trait = AMD_penis_3	}
				AMD_penis_4 = {	add_trait = AMD_bodysize_gene_4	remove_trait = AMD_penis_4	}
				AMD_penis_5 = {	add_trait = AMD_bodysize_gene_5	remove_trait = AMD_penis_5	}
				AMD_breast_1 = {	add_trait = AMD_bodysize_gene_1	remove_trait = AMD_breast_1	}
				AMD_breast_2 = {	add_trait = AMD_bodysize_gene_2	remove_trait = AMD_breast_2	}
				AMD_breast_3 = {	add_trait = AMD_bodysize_gene_3	remove_trait = AMD_breast_3	}
				AMD_breast_4 = {	add_trait = AMD_bodysize_gene_4	remove_trait = AMD_breast_4	}
				AMD_breast_5 = {	add_trait = AMD_bodysize_gene_5	remove_trait = AMD_breast_5	}
			}
		}
		#위 두 가지 경우로, 어떻게든 gene 특성은 있을것이다
		if = {	limit = {	is_adult = yes	}	#성인이면 gene trait에 맞게 설정
			AMD_E_SIZE_SET_BY_GENE = yes
		}
		if = {	#성인이 아니면 1단으로 시작해서 성장판정
			limit = {	is_adult = no	age = 12	}
			if = {	limit = {	is_female = yes	}	add_trait = AMD_breast_1	}
			if = {	limit = {	is_female = no	}	add_trait = AMD_penis_1	}
			
			#13-15	매년 1회 성장함
			if = {	limit = {	age = 13	}	AMD_E_SIZE_GROW = yes	}
			if = {	limit = {	age = 14	}	AMD_E_SIZE_GROW = yes	}
			if = {	limit = {	age = 15	}	AMD_E_SIZE_GROW = yes	}
		}
		
		#그 외의 경우라는게 있는진 모르겠고... 아무튼 여기까지 왔으면 체크 완료.
		AMD_E_ACM_B_ROLL = yes
	}
}

character_event = {	id = AMD.10010		#on_startup 체크 알림 : 룰러 디자이너 대비
	is_triggered_only = yes
	hide_window = yes
	#룰러 디자이너를 사용한 경우 이는 '원래 해당 지역 영주였던 캐릭터'에게 발생함.
	trigger = {	ai = no	NOT = {	has_global_flag = AMD_GF_ENABLED	}	}
	immediate = {
		location = {
			province_event = {	id = AMD.10011	}
		}
		set_global_flag = AMD_GF_ENABLED
	}
}
province_event = {	id = AMD.10011		#on_startup 체크 알림 + 룰러 디자이너 처리
	is_triggered_only = yes
	title = AMD_EV_TITLE_10011	desc = AMD_EV_DESC_10011
	picture = GFX_AMD_TITLE
	option = {	name = AMD_EV_OPT_OK
		ai_chance = {	factor = 100	}
		custom_tooltip = {	text = AMD_EV_String_Pansanim	}
		hidden_tooltip = {
			#영주(플레이어 캐릭터)가 룰러 디자이너 캐릭일 경우, 바디체크 이벤트를 실행해준다.
			holder_scope = {
				if = {
					limit = {	NOT = {	has_character_modifier = AMD_CMF_v_roll	}	}
					character_event = {	id = AMD.10001	}
				}
				if = {
					limit = {	NOT = {	has_character_modifier = AMD_CMF_b_roll	}	}
					character_event = {	id = AMD.10002	}
				}
			}
		}
		c_16 = {
			set_real_father=14 #진종 이변
		}	
		c_217799 = {
			set_real_father=1 #이민희
		}	
		c_217703 = {
			set_real_father=1 #이민희
		}
		c_345028 = {
			set_real_father=1 #
			#set_real_father=345020 #니니와 폰 루텔스부르크
		}	
		c_166826 = {
			set_real_father=1 #
		}	
		c_166827 = {
			set_real_father=1 #
		}	
		c_166821 = {
			set_real_father=1 #
		}	
		c_1 = {
			set_immortal_age = 17
			immortal_age = 17
		}
		c_220811 = {
			set_real_father=1 #
		}
		c_220812 = {
			set_real_father=1 #
		}
		c_220813 = {
			set_real_father=1 #
		}
		c_220814 = {
			set_real_father=1 #
		}
		c_220815 = {
			set_real_father=1 #
		}
	}
}

character_event = {	id = AMD.10022		#on_yearly_pulse 게임 개시후 생성되는 캐릭터 바디체크. 
	is_triggered_only = yes
	hide_window = yes
	trigger = {		#바디체크 안된 12세 이상
		OR = {
			NOT = {	has_character_modifier = AMD_CMF_v_roll	}
			NOT = {	has_character_modifier = AMD_CMF_b_roll	}
		}
		age = 12
	}
	immediate = {
		if = {	limit = {	NOT = {	has_character_modifier = AMD_CMF_v_roll	}	}
			character_event = {	id = AMD.10001	}
		}
		if = {	limit = {	NOT = {	has_character_modifier = AMD_CMF_b_roll	}	}
			character_event = {	id = AMD.10002	}
		}
	}
}
character_event = {	id = AMD.10023		#on_birth	Set V Trait and Gene Trait
	is_triggered_only = yes
	hide_window = yes
	#trigger = {	OR = {	NOT = {	has_character_modifier = AMD_CMF_v_roll	}	NOT = {	has_character_modifier = AMD_CMF_b_roll	}	}	}
	immediate = {
		#if = {	limit = {	AMD_T_IS_HORSE = yes	}	add_trait = horse	}
		AMD_E_SET_VIRGIN = yes
		if = {		#모친 생존시 경험 처리
			limit = {	mother = {	is_alive = yes	}	}
			mother = {
				AMD_E_SEX_UNKNOWN = yes
			}
		}
		if = {		#부친 생존시 경험 및 모친과 관계 처리
			limit = {
				is_father_real_father = yes
				father = {	is_alive = yes	}
			}
			father = {
				AMD_E_SEX_UNKNOWN = yes
				PREV = {	#PREV = 이 이벤트의 ROOT
					mother = {
						AMD_E_SET_SEX_OPINION_WITH_PREV = yes
					}
				}
			}
		}
		if = {		#생부 생존시 경험 및 모친과 관계 처리
			limit = {
				is_father_real_father = no
				real_father = {	is_alive = yes	}
			}
			real_father = {
				AMD_E_SEX_UNKNOWN = yes
				PREV = {	#생부 스코프에서 PREV = 이 이벤트의 ROOT
					mother = {
						AMD_E_SET_SEX_OPINION_WITH_PREV = yes
					}
				}
			}
		}
		if = {	limit = {	is_father_real_father = no	}
			add_character_modifier = {	modifier = AMD_CMF_cuckoo_child	duration = -1	hidden = yes	}
		}
		AMD_E_B_ROLL_LIST = yes		#유전받은게 없을 때... 라는 조건문을 포함한다.
	}
}
character_event = {	id = AMD.10024		#on_yearly_childhood_pulse	12세 이후 매년 발동
	is_triggered_only = yes
	hide_window = yes
	trigger = {	age = 12	}
	immediate = {
		AMD_E_B_ROLL_LIST = yes		#gene trait이 없다는 조건문을 포함하고 있음.
		
		if = {	#body trait이 없으면 부여한다
			limit = {
				NOT = {
					trait = AMD_breast_1
					trait = AMD_breast_2
					trait = AMD_breast_3
					trait = AMD_breast_4
					trait = AMD_breast_5
					trait = AMD_penis_1
					trait = AMD_penis_2
					trait = AMD_penis_3
					trait = AMD_penis_4
					trait = AMD_penis_5
				}
			}
			random_list = {
				90 = {
					if = {	limit = {	is_female = yes	}	add_trait = AMD_breast_1	}
					if = {	limit = {	is_female = no	}	add_trait = AMD_penis_1	}
				}
				10 = {
					modifier = {	factor = 0	trait = AMD_bodysize_gene_1	}
					modifier = {	factor = 0	trait = AMD_bodysize_gene_2	}
					modifier = {	factor = 0.1	trait = AMD_bodysize_gene_3	}
					modifier = {	factor = 3	trait = AMD_bodysize_gene_5	}
					if = {	limit = {	is_female = yes	}	add_trait = AMD_breast_2	}
					if = {	limit = {	is_female = no	}	add_trait = AMD_penis_2	}
				}
			}
		}
		else_if = {	#13세 이상이면 GROW
			limit = {	age = 13	NOT = {	age = 16	}	}
			AMD_E_SIZE_GROW = yes
		}
		AMD_E_ACM_B_ROLL = yes
	}
}
character_event = {	id = AMD.10025		#on_adulthood	성년 기술습득 및 성장판정
	is_triggered_only = yes
	picture = GFX_evt_guardian	#성년/교육
	desc = AMD_EV_DESC_10025_0
	trigger = {		#스킬이 없을 것
		#OR = {	educator = {	always = yes	}	guardian = {	always = yes	}	}
		NOT = {
			trait = AMD_sex_skill_1
			trait = AMD_sex_skill_2
			trait = AMD_sex_skill_3
			trait = AMD_sex_skill_4
			trait = AMD_sex_skill_5
		}
	}
	immediate = {
		#교육자, 보호자 순서로 검색하여 스승으로 지정
		if = {	limit = {	educator = {	always = yes	}	}
			educator = {	save_event_target_as = AMD_ET_TUTOR	}
		}
		else_if = {	limit = {	guardian = {	always = yes	}	}
			guardian = {	save_event_target_as = AMD_ET_TUTOR	}
		}
		else_if = {	#보호자, 교육자 부재시 1단계
			limit = {	NOT = {	guardian = {	always = yes	}	educator = {	always = yes	}	}	}
			set_character_flag = AMD_CF_GET_SKILL_1
		}
		event_target:AMD_ET_TUTOR = {
			trigger_switch = {	on_trigger = trait
				AMD_sex_skill_1 = {
					random_list = {
						150 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_1	}	}
						50 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_2	}	}
					}
				}
				AMD_sex_skill_2 = {
					random_list = {
						50 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_1	}	}
						125 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_2	}	}
						25 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_3	}	}
					}
				}
				AMD_sex_skill_3 = {
					random_list = {
						25 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_1	}	}
						50 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_2	}	}
						100 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_3	}	}
						25 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_4	}	}
					}
				}
				AMD_sex_skill_4 = {
					random_list = {
						20 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_2	}	}
						75 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_3	}	}
						100 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_4	}	}
						5 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_5	}	}
					}
				}
				AMD_sex_skill_5 = {
					random_list = {
						25 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_2	}	}
						75 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_3	}	}
						75 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_4	}	}
						25 = {	ROOT = {	set_character_flag = AMD_CF_GET_SKILL_5	}	}
					}
				}
			}
		}
	}
	desc = {	text = AMD_EV_DESC_10025_1	trigger = {	has_character_flag = AMD_CF_GET_SKILL_1	}	}
	desc = {	text = AMD_EV_DESC_10025_2	trigger = {	has_character_flag = AMD_CF_GET_SKILL_2	}	}
	desc = {	text = AMD_EV_DESC_10025_3	trigger = {	has_character_flag = AMD_CF_GET_SKILL_3	}	}
	desc = {	text = AMD_EV_DESC_10025_4	trigger = {	has_character_flag = AMD_CF_GET_SKILL_4	}	}
	desc = {	text = AMD_EV_DESC_10025_5	trigger = {	has_character_flag = AMD_CF_GET_SKILL_5	}	}
	option = {	name = AMD_EV_OPT_10025_1	trigger = {	has_character_flag = AMD_CF_GET_SKILL_1	}	add_trait = AMD_sex_skill_1	}
	option = {	name = AMD_EV_OPT_10025_2	trigger = {	has_character_flag = AMD_CF_GET_SKILL_2	}	add_trait = AMD_sex_skill_2	}
	option = {	name = AMD_EV_OPT_10025_3	trigger = {	has_character_flag = AMD_CF_GET_SKILL_3	}	add_trait = AMD_sex_skill_3	}
	option = {	name = AMD_EV_OPT_10025_4	trigger = {	has_character_flag = AMD_CF_GET_SKILL_4	}	add_trait = AMD_sex_skill_4	}
	option = {	name = AMD_EV_OPT_10025_5	trigger = {	has_character_flag = AMD_CF_GET_SKILL_5	}	add_trait = AMD_sex_skill_5	}
	after = {
		event_target:AMD_ET_TUTOR = {	 character_event = {	id = AMD.10026	}	}
	}
}
character_event = {	id = AMD.10026			#보호자에게 전달
	is_triggered_only = yes
	picture = GFX_evt_guardian	#성년/교육
	immediate = {
		if = {	limit = {	FROM = {	has_character_flag = AMD_CF_GET_SKILL_1	}	}	set_character_flag = AMD_CF_GET_SKILL_1	}
		if = {	limit = {	FROM = {	has_character_flag = AMD_CF_GET_SKILL_2	}	}	set_character_flag = AMD_CF_GET_SKILL_2	}
		if = {	limit = {	FROM = {	has_character_flag = AMD_CF_GET_SKILL_3	}	}	set_character_flag = AMD_CF_GET_SKILL_3	}
		if = {	limit = {	FROM = {	has_character_flag = AMD_CF_GET_SKILL_4	}	}	set_character_flag = AMD_CF_GET_SKILL_4	}
		if = {	limit = {	FROM = {	has_character_flag = AMD_CF_GET_SKILL_5	}	}	set_character_flag = AMD_CF_GET_SKILL_5	}
	}
	desc = {	text = AMD_EV_DESC_10026_1	trigger = {	has_character_flag = AMD_CF_GET_SKILL_1	}	}
	desc = {	text = AMD_EV_DESC_10026_2	trigger = {	has_character_flag = AMD_CF_GET_SKILL_2	}	}
	desc = {	text = AMD_EV_DESC_10026_3	trigger = {	has_character_flag = AMD_CF_GET_SKILL_3	}	}
	desc = {	text = AMD_EV_DESC_10026_4	trigger = {	has_character_flag = AMD_CF_GET_SKILL_4	}	}
	desc = {	text = AMD_EV_DESC_10026_5	trigger = {	has_character_flag = AMD_CF_GET_SKILL_5	}	}
	option = {	name = AMD_EV_OPT_10026_1	trigger = {	has_character_flag = AMD_CF_GET_SKILL_1	}	}
	option = {	name = AMD_EV_OPT_10026_2	trigger = {	has_character_flag = AMD_CF_GET_SKILL_2	}	}
	option = {	name = AMD_EV_OPT_10026_3	trigger = {	has_character_flag = AMD_CF_GET_SKILL_3	}	}
	option = {	name = AMD_EV_OPT_10026_4	trigger = {	has_character_flag = AMD_CF_GET_SKILL_4	}	}
	option = {	name = AMD_EV_OPT_10026_5	trigger = {	has_character_flag = AMD_CF_GET_SKILL_5	}	}
	after = {
		clear_event_target = AMD_ET_TUTOR
		FROM = {
			clr_character_flag = AMD_CF_GET_SKILL_1
			clr_character_flag = AMD_CF_GET_SKILL_2
			clr_character_flag = AMD_CF_GET_SKILL_3
			clr_character_flag = AMD_CF_GET_SKILL_4
			clr_character_flag = AMD_CF_GET_SKILL_5
		}
		clr_character_flag = AMD_CF_GET_SKILL_1
		clr_character_flag = AMD_CF_GET_SKILL_2
		clr_character_flag = AMD_CF_GET_SKILL_3
		clr_character_flag = AMD_CF_GET_SKILL_4
		clr_character_flag = AMD_CF_GET_SKILL_5
	}
}
character_event = {	id = AMD.10099		#on_death	모든 플래그 제거
	is_triggered_only = yes
	hide_window = yes
	#trigger = {	OR = {	NOT = {	has_character_modifier = AMD_CMF_v_roll	}	NOT = {	has_character_modifier = AMD_CMF_b_roll	}	}	}
	immediate = {
		#캐릭터 사망시, 모든 AMD 모드 플래그를 제거한다.
		clear_flags_with_prefix = AMD
	}
}

#11000~11999	결혼이벤트
#11000~11199	일반적 결혼
#11200~11299	첩과 결혼
#11900~11999	임신
character_event = {	id = AMD.11000		#on_marriage	결혼이벤트 분기
	#	FROM 과 new_character 가 결혼, ROOT는 FROM의 주군(영주). 이 이벤트는 두 당사자가 각각 주군에게 보낸다.
	hide_window = yes
	is_triggered_only = yes
	trigger = {	#두 당사자 중, 자식이 자기 가문 소속이 되는 자 = 혼주만 이벤트 발생.
		FROM = {	AMD_T_IS_MARRIAGE_HEAD = yes	}
	}
	immediate = {
		save_event_target_as = AMD_ET_HOST
		AMD_E_SETA_POV = yes
		new_character = {	AMD_E_SETA_TGT = yes	FROM = {	AMD_E_SET_AD_WITH_PREV = yes	}	}
		if = {	#셋 다 NPC : 즉시 처리
			limit = {
				AMD_T_IS_PLAYER = no
				FROM = {	AMD_T_IS_PLAYER = no	}
				new_character = {	AMD_T_IS_PLAYER = no	}
			}
			random = {	chance = 95	AMD_E_NPC_2P_START = yes	}
		}
		else_if = {	#PC궁정, NPC x NPC : 가신결혼이벤트
			limit = {
				AMD_T_IS_PLAYER = yes
				FROM = {	AMD_T_IS_PLAYER = no	}
				new_character = {	AMD_T_IS_PLAYER = no	}
			}
			#FROM에게 핑, POV에게 돌아올것. POV는 4택->POV최종관람->끝
			FROM = {	save_event_target_as = AMD_ET_BROOM	}
			new_character = {	save_event_target_as = AMD_ET_BRIDE	}
			FROM = {	character_event = {	id = AMD_PING.11001	}	}
		}
		else_if = {	#NPC궁정, NPCxPC : 영주결혼이벤트를 PC에게, PC를 POV로.
			limit = {
				AMD_T_IS_PLAYER = no
				FROM = {	AMD_T_IS_PLAYER = no	}
				new_character = {	AMD_T_IS_PLAYER = yes	}
			}
			clear_event_target = AMD_ET_POV
			FROM = {	save_event_target_as = AMD_ET_BROOM	}
			new_character = {	save_event_target_as = AMD_ET_BRIDE	AMD_E_SETA_POV = yes	character_event = {	id = AMD.11002	}	}
		}
		else_if = {	#PC궁정, PCxNPC : 영주결혼 *핑* 이벤트를 NPC에게
			limit = {
				AMD_T_IS_PLAYER = yes
				FROM = {	AMD_T_IS_PLAYER = yes	}
				new_character = {	AMD_T_IS_PLAYER = no	}
			}
			FROM = {	save_event_target_as = AMD_ET_BROOM	}
			new_character = {	save_event_target_as = AMD_ET_BRIDE	}
			new_character = {	character_event = {	id = AMD_PING.11002	}	}
		}
		else_if = {	#PC궁정, PCxPC : 영주결혼 *핑* 이벤트를 상대에게
			limit = {
				AMD_T_IS_PLAYER = yes
				FROM = {	AMD_T_IS_PLAYER = yes	}
				new_character = {	AMD_T_IS_PLAYER = yes	}
			}
			FROM = {	save_event_target_as = AMD_ET_BROOM	}
			new_character = {	save_event_target_as = AMD_ET_BRIDE	}
			new_character = {	character_event = {	id = AMD_PING.11002	}	}
		}
	}
}
character_event = {	id = AMD.11001		#on_marriage	영주는 PC, NPC가신들의 결혼
	desc = AMD_EV_DESC_11001
	picture = GFX_evt_marriage
	is_triggered_only = yes
	#	가장=AMD_ET_BROOM	상대=AMD_ET_BRIDE
	option = {	name = AMD_EV_OPT_11001_1	#자동처리
		trigger = {		#당사자가 아니어야 함.
			NOT = {
				event_target:AMD_ET_ATK = {	character = ROOT	}
				event_target:AMD_ET_DEF = {	character = ROOT	}
			}
		}
		ai_chance = {	factor = 100	}
		piety = 1
		hidden_tooltip = {	AMD_E_NPC_2P_START = yes	}	#AI간 화간 처리
		custom_tooltip = {	text = AMD_EV_String_11001_1	}
	}
	option = {	name = AMD_EV_OPT_11001_2	#엿보기
		tooltip_info = intrigue
		trigger = {	always = no	#봉인
			intrigue = 12
			NOT = {		#당사자가 아니어야 함.
				event_target:AMD_ET_ATK = {	character = ROOT	}
				event_target:AMD_ET_DEF = {	character = ROOT	}
			}
		}
		piety = -5
		custom_tooltip = {	text = AMD_EV_String_11001_2	}
		#npc가신의 결혼이므로 FROM 조절이나 핑 없이 즉시 실행
		hidden_tooltip = {	AMD_E_2P_SCORE_5 = yes	AMD_E_2P_INDEX = yes	}
	}
	option = {	name = AMD_EV_OPT_11001_3	#방해
		ai_chance = {	factor = 10
			modifier = {	factor = 2.0	war = yes	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BROOM = {	has_symptom_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BROOM = {	has_injury_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BROOM = {	has_mental_disorder_trigger = yes	}	}
			modifier = {	factor = 8.0	event_target:AMD_ET_BROOM = {	is_inaccessible_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BRIDE = {	has_symptom_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BRIDE = {	has_injury_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BRIDE = {	has_mental_disorder_trigger = yes	}	}
			modifier = {	factor = 8.0	event_target:AMD_ET_BRIDE = {	is_inaccessible_trigger = yes	}	}
		}
		tooltip_info = intrigue
		trigger = {	intrigue = 12	}
		custom_tooltip = {	text = AMD_EV_String_11001_3	}
		prestige = -1
		hidden_tooltip = {	AMD_E_END_CHAIN = yes	}
	}
	option = {	name = AMD_EV_OPT_11001_4	#맛보기
		trigger = {	always = no	#원천불가.
			OR = {		#색욕, 광기, 빙의, 초야권 활성 플래그 중 하나 필요.
				trait = lustful	trait = lunatic	trait = possessed
				has_character_flag = AMD_PNA
			}
			#당신은 남성이며, 신부는 여성(???)
			is_female = no
			event_target:AMD_ET_DEF = {	is_female = yes	}
		}
		ai_chance = {	factor = 0	}
		piety = -10
		custom_tooltip = {	text = AMD_EV_String_11001_4	}
		hidden_tooltip = {
			any_courtier = {	#모든 가신이 당신을 싫어함
				opinion = {
					modifier = opinion_tyrant
					who = ROOT
					years = 2
				}
			}
			any_vassal = {	#모든 봉신이 당신을 싫어함
				opinion = {
					modifier = opinion_tyrant
					who = ROOT
					years = 2
				}
			}
		}
	}
}

#영주급 결혼 이벤트 작성 필요?
character_event = {	id = AMD.11002		#on_marriage 결혼당사자 중 한명 이상이 플레이어일시
	desc = AMD_EV_DESC_11001	#11001과 내용은 같음.
	picture = GFX_evt_marriage
	is_triggered_only = yes
	#	가장=AMD_ET_BROOM	상대=AMD_ET_BRIDE
	option = {	name = AMD_EV_OPT_PLAY_SILENT_NIGHT	#조용히
		ai_chance = {	factor = 0	}
		custom_tooltip = {	text = AMD_EV_String_11002_1	}
		piety = 1
		hidden_tooltip = {
			if = {	limit = {	character = event_target:AMD_ET_ATK	}	event_target:AMD_ET_DEF = {	letter_event = {	id = AMD_PLAY_PING.1121	}	}	}
			else_if = {	limit = {	character = event_target:AMD_ET_DEF	}	event_target:AMD_ET_ATK = {	letter_event = {	id = AMD_PLAY_PING.1121	}	}	}
			else = {	#안이시벌 둘중 하나도 아닌데 한쪽이 PC일리가 없잖어 이건 에러다!
				event_target:AMD_ET_ATK = {	character_event = {	id = AMD_PLAY.1192	}	}
				event_target:AMD_ET_DEF = {	character_event = {	id = AMD_PLAY.1192	}	}
			}
		}	#AI간 화간 처리
	}
	option = {	name = AMD_EV_OPT_PLAY_SHORT_NIGHT	#짧게
		ai_chance = {	factor = 10	}
		custom_tooltip = {	text = AMD_EV_String_11002_2	}
		piety = 1
		hidden_tooltip = {
			AMD_E_2P_SCORE_5 = yes
			if = {	limit = {	character = event_target:AMD_ET_ATK	}
				event_target:AMD_ET_DEF = {	letter_event = {	id = AMD_PLAY_PING.1122	}	}
			}
			else_if = {	limit = {	character = event_target:AMD_ET_DEF	}
				event_target:AMD_ET_ATK = {	letter_event = {	id = AMD_PLAY_PING.1122	}	}
			}
			else = {	#안이시벌 둘중 하나도 아닌데 한쪽이 PC일리가 없잖어 이건 에러다!
				event_target:AMD_ET_ATK = {	character_event = {	id = AMD_PLAY.1192	}	}
				event_target:AMD_ET_DEF = {	character_event = {	id = AMD_PLAY.1192	}	}
			}
		}
	}
	option = {	name = AMD_EV_OPT_PLAY_LONG_NIGHT	#길게
		ai_chance = {	factor = 10	}
		custom_tooltip = {	text = AMD_EV_String_11002_3	}
		piety = 1
		hidden_tooltip = {
			AMD_E_2P_SCORE_5 = yes
			if = {	limit = {	character = event_target:AMD_ET_ATK	}
				event_target:AMD_ET_DEF = {	letter_event = {	id = AMD_PLAY_PING.1123	}	}
			}
			else_if = {	limit = {	character = event_target:AMD_ET_DEF	}
				event_target:AMD_ET_ATK = {	letter_event = {	id = AMD_PLAY_PING.1123	}	}
			}
			else = {	#안이시벌 둘중 하나도 아닌데 한쪽이 PC일리가 없잖어 이건 에러다!
				event_target:AMD_ET_ATK = {	character_event = {	id = AMD_PLAY.1192	}	}
				event_target:AMD_ET_DEF = {	character_event = {	id = AMD_PLAY.1192	}	}
			}
		}
	}
	option = {	name = AMD_EV_OPT_11001_3	#안함 (11001_3과 동일)
		ai_chance = {	factor = 10
			modifier = {	factor = 2.0	war = yes	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BROOM = {	has_symptom_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BROOM = {	has_injury_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BROOM = {	has_mental_disorder_trigger = yes	}	}
			modifier = {	factor = 8.0	event_target:AMD_ET_BROOM = {	is_inaccessible_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BRIDE = {	has_symptom_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BRIDE = {	has_injury_trigger = yes	}	}
			modifier = {	factor = 1.5	event_target:AMD_ET_BRIDE = {	has_mental_disorder_trigger = yes	}	}
			modifier = {	factor = 8.0	event_target:AMD_ET_BRIDE = {	is_inaccessible_trigger = yes	}	}
		}
		trigger = {
			OR = {
				event_target:AMD_ET_ATK = {	trait = celibate	}
				event_target:AMD_ET_DEF = {	trait = celibate	}
				intrigue = 12
			}
		}
		custom_tooltip = {	text = AMD_EV_String_11001_3	}
		hidden_tooltip = {	#결혼 당사자들에게 편지 날림
			if = {	limit = {	character = event_target:AMD_ET_ATK	}
				event_target:AMD_ET_DEF = {	letter_event = {	id = AMD_PLAY.1125	}	}
			}
			if = {	limit = {	character = event_target:AMD_ET_DEF	}
				event_target:AMD_ET_ATK = {	letter_event = {	id = AMD_PLAY.1125	}	}
			}
			else = {
				event_target:AMD_ET_ATK = {	letter_event = {	id = AMD_PLAY.1125	}	}
				event_target:AMD_ET_DEF = {	letter_event = {	id = AMD_PLAY.1125	}	}
			}
			AMD_E_END_CHAIN = yes
		}
		prestige = -1
	}
}

character_event = {	id = AMD.13000		#on_pregnancy 동정/처녀 제거
	is_triggered_only = yes
	hide_window = yes
	trigger = {		#이것은 여자가 임신했을 때 기준임. 치트로 남캐를 임신시키면 이렇게는 안됨... 아마?
		OR = {
			father_of_unborn = {	trait = AMD_virgin	}
			trait = AMD_virgin
		}
	}
	immediate = {
		AMD_E_SEX_UNKNOWN = yes
		if = {	limit = {	father_of_unborn = {	is_alive = yes	}	}
			father_of_unborn = {	AMD_E_SETA_ATK = yes	AMD_E_SEX_UNKNOWN = yes	}
			AMD_E_SETA_DEF = yes
			event_target:AMD_ET_ATK = {
				event_target:AMD_ET_DEF = {
					AMD_E_XP_CHECK_COMMON = yes
					AMD_E_XP_CHECK_WITH_PREV = yes
					AMD_E_SET_SEX_OPINION_WITH_PREV = yes
				}
			}
		}
		AMD_E_ACM_PREGNANT_11 = yes
	}
}


#20000 ~ 29999	디시전에서 시작하는 이벤트 라인
character_event = {	id = AMD.20008		#말 삽니다
	desc = AMD_EV_DESC_20008
	picture = GFX_evt_horse_friend
	is_triggered_only = yes
	option = {	name = AMD_EV_OPT_20008_1	#늙은 짐말
		ai_chance = {	factor = 0	}
		trigger = {	wealth = 10	}
		wealth = -10
		hidden_tooltip = {
			random_list = {
				50 = {	#숫말
					AMD_E_CREATE_RANDOM_HORSE_M = yes
				}
				50 = {	#암말
					AMD_E_CREATE_RANDOM_HORSE_F = yes
				}
			}
			new_character = {
				random_list = {
					50 = {	AMD_E_SET_VIRGIN = yes	}
					50 = {	AMD_E_SEX_UNKNOWN = yes	}
				}
				random = {	chance = 20		add_trait = slow	}
				random = {	chance = 20		add_trait = weak	}
				random = {	chance = 20		add_trait = ugly	}
				random = {	chance = 20		add_trait = wounded	}
				random = {	chance = 20		add_trait = stressed	}
				health = 2.5
				AMD_E_ACM_B_ROLL = yes
				AMD_E_SIZE_SET_BY_GENE = yes
			}
		}
		hidden_tooltip = {	character_event = {	id = AMD.20008	}	}
	}
	option = {	name = AMD_EV_OPT_20008_2	#튼튼한 군마
		ai_chance = {	factor = 0	}
		trigger = {	wealth = 50	}
		wealth = -50
		hidden_tooltip = {
			random_list = {
				50 = {	#숫말
					AMD_E_CREATE_RANDOM_HORSE_M = yes
				}
				50 = {	#암말
					AMD_E_CREATE_RANDOM_HORSE_F = yes
				}
			}
			new_character = {
				random_list = {
					50 = {	AMD_E_SET_VIRGIN = yes	}
					50 = {	AMD_E_SEX_UNKNOWN = yes	}
				}
				random = {	chance = 10		add_trait = quick	}
				random = {	chance = 10		add_trait = slow	}
				random = {	chance = 30		add_trait = strong	}
				random = {	chance = 10		add_trait = ugly	}
				random = {	chance = 10		add_trait = fair	}
				health = 2.5
				AMD_E_ACM_B_ROLL = yes
				AMD_E_SIZE_SET_BY_GENE = yes
			}
		}
		hidden_tooltip = {	character_event = {	id = AMD.20008	}	}
	}
	option = {	name = AMD_EV_OPT_20008_3	#탐스러운 종마
		ai_chance = {	factor = 0	}
		trigger = {	wealth = 100	}
		wealth = -100
		hidden_tooltip = {
			random_list = {
				50 = {	#숫말
					AMD_E_CREATE_RANDOM_HORSE_M = yes
				}
				50 = {	#암말
					AMD_E_CREATE_RANDOM_HORSE_F = yes
				}
			}
			new_character = {
				random_list = {
					20 = {	AMD_E_SET_VIRGIN = yes	}
					80 = {	AMD_E_SEX_UNKNOWN = yes	}
				}
				random = {	chance = 10		add_trait = quick	}
				random = {	chance = 30		add_trait = strong	}
				random = {	chance = 30		add_trait = fair	}
				random = {	chance = 30		add_trait = lustful	}
				health = 2.5
				AMD_E_ACM_B_ROLL = yes
				AMD_E_SIZE_SET_BY_GENE = yes
			}
		}
		hidden_tooltip = {	character_event = {	id = AMD.20008	}	}
	}
	option = {	name = AMD_EV_OPT_20008_4	#안사요
		ai_chance = {	factor = 100	}
		
	}
}
character_event = {	id = AMD.20009		#분가하시겠습니까?
	desc = AMD_EV_DESC_20009
	picture = GFX_evt_throne_room
	is_triggered_only = yes
	option = {	name = AMD_EV_OPT_20009_0	#안해요
		ai_chance = {	factor = 100	}
		custom_tooltip = {	text = AMD_EV_TT_20009_0	AMD_E_END_CHAIN = yes	}
	}
	option = {	name = AMD_EV_OPT_20009_1	#내가 니 애비다
		ai_chance = {	factor = 0	}
		custom_tooltip = {	text = AMD_EV_TT_20009_1	}
		trigger = {
			event_target:AMD_ET_TGT = {
				NOT = {
					father = {	character = ROOT	}
					mother = {	character = ROOT	}
				}
			}
			OR = {
				is_female = no
				AND = {	is_female = yes	AMD_T_HCM_LIFEMAKER = yes	}
			}
		}
		prestige = -500
		event_target:AMD_ET_TGT = {	set_father = ROOT	recalc_succession = yes	hidden_tooltip = {	character_event = {	id = AMD_PING.20009	}	}	}
	}
	option = {	name = AMD_EV_OPT_20009_2	#I am your mother
		ai_chance = {	factor = 0	}
		custom_tooltip = {	text = AMD_EV_TT_20009_2	}
		trigger = {
			event_target:AMD_ET_TGT = {
				NOT = {
					father = {	character = ROOT	}
					mother = {	character = ROOT	}
				}
			}
			OR = {
				is_female = yes
				AND = {	is_female = no	AMD_T_HCM_LIFEMAKER = yes	}
			}
		}
		prestige = -500
		event_target:AMD_ET_TGT = {	set_mother = ROOT	recalc_succession = yes	hidden_tooltip = {	character_event = {	id = AMD_PING.20009	}	}	}
	}
	option = {	name = AMD_EV_OPT_20009_3	#내 가문으로 변경
		ai_chance = {	factor = 0	}
		custom_tooltip = {	text = AMD_EV_TT_20009_4	}
		trigger = {
			event_target:AMD_ET_TGT = {
				OR = {
					father = {	character = ROOT	}
					mother = {	character = ROOT	}
				}
				NOT = {
					dynasty = ROOT
				}
			}
		}
		prestige = -500
		event_target:AMD_ET_TGT = {
			if = {	limit = {	trait = bastard	}	remove_trait = bastard	add_trait = legit_bastard	}
			dynasty = ROOT
			recalc_succession = yes
		}
		hidden_tooltip = {	AMD_E_END_CHAIN = yes	}
	}
	option = {	name = AMD_EV_OPT_20009_4	#분가
		ai_chance = {	factor = 0	}
		custom_tooltip = {	text = AMD_EV_TT_20009_4	}
		trigger = {
			event_target:AMD_ET_TGT = {
				OR = {
					father = {	character = ROOT	}
					mother = {	character = ROOT	}
				}
				dynasty = ROOT
			}
		}
		prestige = -500
		event_target:AMD_ET_TGT = {
			if = {	limit = {	trait = bastard	}	remove_trait = bastard	add_trait = legit_bastard	}
			if = {	limit = {	father = {	character = ROOT	}	}	dynasty = father_bastard	}
			else_if = {	limit = {	mother = {	character = ROOT	}	}	dynasty = mother_bastard	}
			recalc_succession = yes
		}
		hidden_tooltip = {	AMD_E_END_CHAIN = yes	}
	}
}

character_event = {	id = AMD.20100		#연인 단체전
	picture = GFX_evt_lovers
	is_triggered_only = yes
	desc = AMD_EV_DESC_20100
	immediate = {
		clr_character_flag = local_AMD_MP_GUYS_READY
		clr_character_flag = local_AMD_MP_GUYS_CANT
		clr_character_flag = local_AMD_MP_GALS_READY
		clr_character_flag = local_AMD_MP_GALS_CANT
		AMD_E_SETA_POV = yes
		AMD_E_SETA_OH = yes
		if = {	limit = {	OR = {	is_female = yes	AND = {	is_female = no	trait = homosexual	}	}	}	#남자 연인 체크 : 여자 또는 게이
			if = {
				limit = {
					any_courtier_or_vassal = {
						has_minor_title = title_AMD_courtesan	#이 타이틀은 AMD_T_IS_DOABLE_AGE 를 포함한다.
						liege = {	character = ROOT	}
						is_female = no
						AMD_T_NOT_BUSY = yes
						AMD_T_IS_DOABLE = yes
						count = 3
					}
				}
				set_character_flag = local_AMD_MP_GUYS_READY
			}
			else = {	set_character_flag = local_AMD_MP_GUYS_CANT	}
		}
		if = {	limit = {	OR = {	is_female = no	AND = {	is_female = yes	trait = homosexual	}	}	}	#남자 연인 체크 : 여자 또는 게이
			if = {
				limit = {
					any_courtier_or_vassal = {
						has_minor_title = title_AMD_courtesan	#이 타이틀은 AMD_T_IS_DOABLE_AGE 를 포함한다.
						liege = {	character = ROOT	}
						is_female = yes
						AMD_T_NOT_BUSY = yes
						AMD_T_IS_DOABLE = yes
						count = 3
					}
				}
				set_character_flag = local_AMD_MP_GALS_READY
			}
			else = {	set_character_flag = local_AMD_MP_GALS_CANT	}
		}
		
		
	}
	option = {	name = AMD_EV_OPT_20100_10	trigger = {	has_character_flag = local_AMD_MP_GUYS_CANT	OR = {	is_female = yes	trait = homosexual	}	}
		any_courtier_or_vassal = {
			if = {
				limit = {
					has_minor_title = title_AMD_courtesan
					liege = {	character = ROOT	}
					is_female = no
				}
				if = {	limit = {	AMD_T_IS_BUSY = yes	}	custom_tooltip = {	text = AMD_EV_TT_20100_B	}	}
				if = {	limit = {	AMD_T_IS_DOABLE = no	}	custom_tooltip = {	text = AMD_EV_TT_20100_D	}	}
			}
		}
		AMD_E_END_CHAIN = yes
	}
	option = {	name = AMD_EV_OPT_20100_20	trigger = {	has_character_flag = local_AMD_MP_GALS_CANT	OR = {	is_female = no	trait = homosexual	}	}
		any_courtier_or_vassal = {
			if = {
				limit = {
					has_minor_title = title_AMD_courtesan
					liege = {	character = ROOT	}
					is_female = yes
				}
				if = {	limit = {	AMD_T_IS_BUSY = yes	}	custom_tooltip = {	text = AMD_EV_TT_20100_B	}	}
				if = {	limit = {	AMD_T_IS_DOABLE = no	}	custom_tooltip = {	text = AMD_EV_TT_20100_D	}	}
			}
		}
		AMD_E_END_CHAIN = yes
	}
	option = {	trigger = {	has_character_flag = local_AMD_MP_GUYS_READY	}
		name = {	text = AMD_EV_OPT_20100_11	trigger = {	is_female = no	}	}
		name = {	text = AMD_EV_OPT_20100_12	trigger = {	is_female = yes	}	}
		
		any_courtier_or_vassal = {
			if = {
				limit = {
					has_minor_title = title_AMD_courtesan	#이 타이틀은 AMD_T_IS_DOABLE_AGE 를 포함한다.
					liege = {	character = ROOT	}
					is_female = no
				}
				if = {
					limit = {
						AMD_T_IS_DOABLE = yes
						AMD_T_NOT_BUSY = yes
					}
					AMD_E_ACM_PARTY = yes
				}
				else = {	custom_tooltip = {	text = AMD_EV_TT_20100_0	}	}
			}
		}
		hidden_tooltip = {
			if = {	limit = {	is_female = no	}	AMD_E_SETA_STF_GAY = yes	}
			AMD_E_MP_INDEX = yes
		}
	}
	option = {	trigger = {	has_character_flag = local_AMD_MP_GALS_READY	}
		name = {	text = AMD_EV_OPT_20100_21	trigger = {	is_female = no	}	}
		name = {	text = AMD_EV_OPT_20100_22	trigger = {	is_female = yes	}	}
		
		any_courtier_or_vassal = {
			if = {
				limit = {
					has_minor_title = title_AMD_courtesan	#이 타이틀은 AMD_T_IS_DOABLE_AGE 를 포함한다.
					liege = {	character = ROOT	}
					is_female = yes
				}
				if = {
					limit = {
						AMD_T_IS_DOABLE = yes
						AMD_T_NOT_BUSY = yes
					}
					AMD_E_ACM_PARTY = yes
				}
				else = {	custom_tooltip = {	text = AMD_EV_TT_20100_0	}	}
			}
		}
		hidden_tooltip = {
			if = {	limit = {	is_female = yes	}	AMD_E_SETA_STF_LES = yes	}
			AMD_E_MP_INDEX = yes
		}
	}
	
	option = {	name = AMD_EV_OPT_21001_P4	#지금은 그럴시기가 아님
		ai_chance = {	factor = 100	}
		AMD_E_END_CHAIN = yes
	}
	after = {
		clr_character_flag = local_AMD_MP_GUYS_READY
		clr_character_flag = local_AMD_MP_GUYS_CANT
		clr_character_flag = local_AMD_MP_GALS_READY
		clr_character_flag = local_AMD_MP_GALS_CANT
		hidden_tooltip = {
			event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_14 = yes	}
			AMD_E_ACM_COOLDOWN_14 = yes
		}
	}
}


#	21000~21999	연인방문
character_event = {	id = AMD.21001		#연인 방문 이벤트 시작
	desc = {	trigger = {	AMD_T_2P_SCORE_GOOD = yes	}	text = AMD_EV_DESC_21001_1	}
	desc = {	trigger = {	AMD_T_2P_SCORE_COMMON = yes	}	text = AMD_EV_DESC_21001_2	}
	desc = {	trigger = {	AMD_T_2P_SCORE_BAD = yes	}	text = AMD_EV_DESC_21001_3	}
	picture = GFX_evt_lovers
	is_triggered_only = yes
	#	당신 AMD_ET_POV		상대 AMD_ET_TGT
	immediate = {
		event_target:AMD_ET_POV = {
			event_target:AMD_ET_TGT = {
				AMD_E_SET_AD_WITH_PREV = yes
			}
		}
	}
	option = {	name = AMD_EV_OPT_21001_1	#선물주기	20-200 금 필요
		ai_chance = {	factor = 0	}
		trigger = {	wealth = 20	}
		scaled_wealth = { value = -2 min = -20 max = -200 }
		random_list = {	#선물 성공률 설정
			10 = {	AMD_E_2P_SCORE_U100 = yes	#성공
				modifier = {	factor = 1.1	AMD_T_P_OPINION_FROM_MATE_ABOVE_10 = yes	}
				modifier = {	factor = 1.3	AMD_T_P_OPINION_FROM_MATE_ABOVE_30 = yes	}
				modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_50 = yes	}
				modifier = {	factor = 1.7	AMD_T_P_OPINION_FROM_MATE_ABOVE_70 = yes	}
			#	modifier = {	factor = 1.5	diplomacy = 12	}
				modifier = {	factor = 1.5	stewardship = 12	}
				modifier = {	factor = 1.5	stewardship = 15	}
				modifier = {	factor = 1.5	stewardship = 18	}
				modifier = {	factor = 2.0	stewardship = 21	}
				modifier = {	factor = 2.0	stewardship = 24	}
				modifier = {	factor = 2.0	stewardship = 27	}
			#	modifier = {	factor = 1.5	intrigue = 12	}
				
			}
			10 = {	AMD_E_2P_SCORE_D50 = yes	#실패
				modifier = {	factor = 2.1	AMD_T_P_OPINION_FROM_MATE_UNDER_10 = yes	}
				modifier = {	factor = 2.3	AMD_T_P_OPINION_FROM_MATE_UNDER_30 = yes	}
				modifier = {	factor = 2.5	AMD_T_P_OPINION_FROM_MATE_UNDER_50 = yes	}
				modifier = {	factor = 2.7	AMD_T_P_OPINION_FROM_MATE_UNDER_70 = yes	}
			#	modifier = {	factor = 1.5	NOT = {	diplomacy = 8	}	}
				modifier = {	factor = 1.5	NOT = {	stewardship = 8	}	}
			#	modifier = {	factor = 1.5	NOT = {	intrigue = 8	}	}
				modifier = {	factor = 0.5	FROM = {	trait = greedy	}	}
			}
		}
		hidden_tooltip = {
			random_list = {	#선물 종류 결정
				10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_gift	value = 1	}	}	}
				10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_gift	value = 2	}	}	}
				10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_gift	value = 3	}	}	}
				10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_gift	value = 4	}	}	}
				10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_gift	value = 5	}	}	}
				10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_gift	value = 6	}	}	}
			}
			event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.21010	}	}
		}
	}
	option = {	name = AMD_EV_OPT_21001_2	#놀러간다	10-100 금 필요
		ai_chance = {	factor = 0	}
		trigger = {	wealth = 10	}
		scaled_wealth = { value = -1 min = -10 max = -100 }
		hidden_tooltip = {
			if = {	limit = {	event_target:AMD_ET_POV = {	AMD_T_IS_HUMAN = yes	}	event_target:AMD_ET_TGT = {	AMD_T_IS_HUMAN = yes	}	}	#둘 다 인간이면 랜덤리스트
				random_list = {	#이벤트 종류와 성패 결정
					10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_date	value = 1	}	}	#활쏘기	무력/사냥
						random_list = {	#이벤트 성공률 설정
							10 = {	AMD_E_2P_SCORE_U100 = yes	#성공
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_10 = yes	}
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_30 = yes	}
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_50 = yes	}
								modifier = {	factor = 1.5	martial = 12	}
								modifier = {	factor = 1.5	martial = 15	}
								modifier = {	factor = 1.5	martial = 18	}
								modifier = {	factor = 1.5	diplomacy = 12	}
								modifier = {	factor = 1.5	diplomacy = 15	}
								modifier = {	factor = 1.5	diplomacy = 18	}
								modifier = {	factor = 2.0	diplomacy = 21	}
								modifier = {	factor = 2.0	diplomacy = 24	}
								modifier = {	factor = 2.0	diplomacy = 27	}
								modifier = {	factor = 3.0	trait = fair	}
								modifier = {	factor = 2.0	trait = socializer	}
								modifier = {	factor = 1.5	trait = gregarious	}
								modifier = {	factor = 1.5	trait = kind	}
							}
							10 = {	AMD_E_2P_SCORE_D50 = yes	#실패
								modifier = {	factor = 2.1	AMD_T_P_OPINION_FROM_MATE_UNDER_10 = yes	}
								modifier = {	factor = 2.3	AMD_T_P_OPINION_FROM_MATE_UNDER_30 = yes	}
								modifier = {	factor = 2.5	AMD_T_P_OPINION_FROM_MATE_UNDER_50 = yes	}
								modifier = {	factor = 2.7	AMD_T_P_OPINION_FROM_MATE_UNDER_70 = yes	}
								modifier = {	factor = 1.5	NOT = {	martial = 8	}	}
								modifier = {	factor = 0.5	trait = hunter	}
								modifier = {	factor = 0.1	FROM = {	trait = hunter	}	}
								
							}
						}
					}
					10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_date	value = 2	}	}	#쇼핑	관리
						random_list = {	#이벤트 성공률 설정
							10 = {	AMD_E_2P_SCORE_U100 = yes	#성공
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_10 = yes	}
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_30 = yes	}
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_50 = yes	}
								modifier = {	factor = 1.5	stewardship = 12	}
								modifier = {	factor = 1.5	stewardship = 15	}
								modifier = {	factor = 1.5	stewardship = 18	}
								modifier = {	factor = 1.5	diplomacy = 12	}
								modifier = {	factor = 1.5	diplomacy = 15	}
								modifier = {	factor = 1.5	diplomacy = 18	}
								modifier = {	factor = 2.0	diplomacy = 21	}
								modifier = {	factor = 2.0	diplomacy = 24	}
								modifier = {	factor = 2.0	diplomacy = 27	}
								modifier = {	factor = 3.0	trait = fair	}
								modifier = {	factor = 2.0	trait = socializer	}
								modifier = {	factor = 1.5	trait = gregarious	}
								modifier = {	factor = 1.5	trait = kind	}
							}
							10 = {	AMD_E_2P_SCORE_D50 = yes	#실패
								modifier = {	factor = 2.1	AMD_T_P_OPINION_FROM_MATE_UNDER_10 = yes	}
								modifier = {	factor = 2.3	AMD_T_P_OPINION_FROM_MATE_UNDER_30 = yes	}
								modifier = {	factor = 2.5	AMD_T_P_OPINION_FROM_MATE_UNDER_50 = yes	}
								modifier = {	factor = 2.7	AMD_T_P_OPINION_FROM_MATE_UNDER_70 = yes	}
								modifier = {	factor = 1.5	NOT = {	stewardship = 8	}	}
								modifier = {	factor = 0.5	has_education_stewardship_trigger = yes	}
								modifier = {	factor = 0.5	FROM = {	has_education_stewardship_trigger = yes	}	}
								
							}
						}
					}
					10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_date	value = 3	}	}	#만찬	음모/탐식
						random_list = {	#이벤트 성공률 설정
							10 = {	AMD_E_2P_SCORE_U100 = yes	#성공
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_10 = yes	}
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_30 = yes	}
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_50 = yes	}
								modifier = {	factor = 1.5	intrigue = 12	}
								modifier = {	factor = 1.5	intrigue = 15	}
								modifier = {	factor = 1.5	intrigue = 18	}
								modifier = {	factor = 1.5	diplomacy = 12	}
								modifier = {	factor = 1.5	diplomacy = 15	}
								modifier = {	factor = 1.5	diplomacy = 18	}
								modifier = {	factor = 2.0	diplomacy = 21	}
								modifier = {	factor = 2.0	diplomacy = 24	}
								modifier = {	factor = 2.0	diplomacy = 27	}
								modifier = {	factor = 3.0	trait = fair	}
								modifier = {	factor = 2.0	trait = socializer	}
								modifier = {	factor = 1.5	trait = gregarious	}
								modifier = {	factor = 1.5	trait = kind	}
							}
							10 = {	AMD_E_2P_SCORE_D50 = yes	#실패
								modifier = {	factor = 2.1	AMD_T_P_OPINION_FROM_MATE_UNDER_10 = yes	}
								modifier = {	factor = 2.3	AMD_T_P_OPINION_FROM_MATE_UNDER_30 = yes	}
								modifier = {	factor = 2.5	AMD_T_P_OPINION_FROM_MATE_UNDER_50 = yes	}
								modifier = {	factor = 2.7	AMD_T_P_OPINION_FROM_MATE_UNDER_70 = yes	}
								modifier = {	factor = 1.5	NOT = {	intrigue = 8	}	}
								modifier = {	factor = 0.5	trait = gluttonous	}
								modifier = {	factor = 0.1	FROM = {	trait = gluttonous	}	}
								
							}
						}
					}
					10 = {	event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_date	value = 4	}	}	#독서	학력/학자
						random_list = {	#이벤트 성공률 설정
							10 = {	AMD_E_2P_SCORE_U100 = yes	#성공
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_10 = yes	}
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_30 = yes	}
								modifier = {	factor = 1.5	AMD_T_P_OPINION_FROM_MATE_ABOVE_50 = yes	}
								modifier = {	factor = 1.5	learning = 12	}
								modifier = {	factor = 1.5	learning = 15	}
								modifier = {	factor = 1.5	learning = 18	}
								modifier = {	factor = 1.5	diplomacy = 12	}
								modifier = {	factor = 1.5	diplomacy = 15	}
								modifier = {	factor = 1.5	diplomacy = 18	}
								modifier = {	factor = 2.0	diplomacy = 21	}
								modifier = {	factor = 2.0	diplomacy = 24	}
								modifier = {	factor = 2.0	diplomacy = 27	}
								modifier = {	factor = 3.0	trait = fair	}
								modifier = {	factor = 2.0	trait = socializer	}
								modifier = {	factor = 1.5	trait = gregarious	}
								modifier = {	factor = 1.5	trait = kind	}
							}
							10 = {	AMD_E_2P_SCORE_D50 = yes	#실패
								modifier = {	factor = 2.1	AMD_T_P_OPINION_FROM_MATE_UNDER_10 = yes	}
								modifier = {	factor = 2.3	AMD_T_P_OPINION_FROM_MATE_UNDER_30 = yes	}
								modifier = {	factor = 2.5	AMD_T_P_OPINION_FROM_MATE_UNDER_50 = yes	}
								modifier = {	factor = 2.7	AMD_T_P_OPINION_FROM_MATE_UNDER_70 = yes	}
								modifier = {	factor = 1.5	NOT = {	learning = 8	}	}
								modifier = {	factor = 0.5	trait = scholar	}
								modifier = {	factor = 0.1	FROM = {	trait = scholar	}	}
								modifier = {	factor = 0.5	trait = poet	}
								modifier = {	factor = 0.1	FROM = {	trait = poet	}	}
								
							}
						}
					}
				}
			}
			else = {	#아니면 내셔널 지오그래픽이나 찍으시던가...
				event_target:AMD_ET_POV = {	set_variable = {	which = local_AMD_lovers_date	value = 9	}	}
			}
			event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.21020	}	}
		}
	}
	option = {	name = AMD_EV_OPT_PLAY_SHORT_NIGHT	#숏타임
		ai_chance = {	factor = 10	}
		custom_tooltip = {	text = AMD_String_PLAY_SHORT	}
		hidden_tooltip = {
			random = {	chance = 50	AMD_E_2P_SCORE_D50 = yes	}
			event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1122	}	}
		}
	}
	after = {
		hidden_tooltip = {
			event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_1m = yes	}
			AMD_E_ACM_COOLDOWN_1m = yes
		}
	}
}
character_event = {	id = AMD.21010		#	연인에게 선물
	desc = {	trigger = {	AMD_T_2P_SCORE_GOOD = yes	}	text = AMD_EV_DESC_21010_1	picture = GFX_evt_gift	}
	desc = {	trigger = {	AMD_T_2P_SCORE_COMMON = yes	}	text = AMD_EV_DESC_21010_2	picture = GFX_evt_bribe_accepted	}
	desc = {	trigger = {	AMD_T_2P_SCORE_BAD = yes	}	text = AMD_EV_DESC_21010_3	picture = GFX_evt_bribe_declined	}
	picture = GFX_evt_gift
	is_triggered_only = yes
	
	#	당신 AMD_ET_POV		상대 AMD_ET_TGT
	immediate = {
		event_target:AMD_ET_POV = {
			event_target:AMD_ET_TGT = {
				AMD_E_SET_AD_WITH_PREV = yes
			}
		}
		if = {
			limit = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_gift	value == 1	}	}	}
			event_target:AMD_ET_TGT = {	add_character_modifier = {	name = AMD_CM_lovers_gift_1	years = 1	}	}
		}
		if = {
			limit = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_gift	value == 2	}	}	}
			event_target:AMD_ET_TGT = {	add_character_modifier = {	name = AMD_CM_lovers_gift_2	years = 1	}	}
		}
		if = {
			limit = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_gift	value == 3	}	}	}
			event_target:AMD_ET_TGT = {	add_character_modifier = {	name = AMD_CM_lovers_gift_3	years = 1	}	}
		}
		if = {
			limit = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_gift	value == 4	}	}	}
			event_target:AMD_ET_TGT = {	add_character_modifier = {	name = AMD_CM_lovers_gift_4	years = 1	}	}
		}
		if = {
			limit = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_gift	value == 5	}	}	}
			event_target:AMD_ET_TGT = {	add_character_modifier = {	name = AMD_CM_lovers_gift_5	years = 1	}	}
		}
		if = {
			limit = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_gift	value == 6	}	}	}
			event_target:AMD_ET_TGT = {	add_character_modifier = {	name = AMD_CM_lovers_gift_6	years = 1	}	}
		}
	}
	option = {	name = AMD_EV_OPT_PLAY_LONG_NIGHT	#롱타임
		trigger = {	AMD_T_2P_SCORE_GOOD = yes	AMD_T_IS_NORMAL_HUMAN_COUPLE = yes	}
		custom_tooltip = {	text = AMD_String_PLAY_LONG	}
		prestige = 10
		hidden_tooltip = {	event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1123	}	}	}
	}
	option = {	name = AMD_EV_OPT_PLAY_SHORT_NIGHT	#숏타임
		trigger = {	OR = {	AMD_T_2P_SCORE_BAD = yes	AMD_T_2P_SCORE_COMMON = yes	AND = {	AMD_T_2P_SCORE_GOOD = yes	AMD_T_IS_NORMAL_HUMAN_COUPLE = no	}	}	}
		custom_tooltip = {	text = AMD_String_PLAY_SHORT	}
		hidden_tooltip = {	event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1122	}	}	}
	}
	option = {	name = AMD_EV_OPT_PILLOW_TALK	#대화나 하자
		AMD_E_PILLOW_TALK = yes
		clr_global_flag = AMD_GF_IN_ACTION
	}
}
character_event = {	id = AMD.21020		#	연인과 데이트
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 1	}	}	AMD_T_2P_SCORE_GOOD = yes	}	text = AMD_EV_DESC_21021_1	picture = GFX_evt_longbowman	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 1	}	}	AMD_T_2P_SCORE_COMMON = yes	}	text = AMD_EV_DESC_21021_2	picture = GFX_evt_longbowman	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 1	}	}	AMD_T_2P_SCORE_BAD = yes	}	text = AMD_EV_DESC_21021_3	picture = GFX_evt_longbowman	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 2	}	}	AMD_T_2P_SCORE_GOOD = yes	}	text = AMD_EV_DESC_21022_1	picture = GFX_evt_market	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 2	}	}	AMD_T_2P_SCORE_COMMON = yes	}	text = AMD_EV_DESC_21022_2	picture = GFX_evt_market	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 2	}	}	AMD_T_2P_SCORE_BAD = yes	}	text = AMD_EV_DESC_21022_3	picture = GFX_evt_market	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 3	}	}	AMD_T_2P_SCORE_GOOD = yes	}	text = AMD_EV_DESC_21023_1	picture = GFX_evt_feast	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 3	}	}	AMD_T_2P_SCORE_COMMON = yes	}	text = AMD_EV_DESC_21023_2	picture = GFX_evt_feast	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 3	}	}	AMD_T_2P_SCORE_BAD = yes	}	text = AMD_EV_DESC_21023_3	picture = GFX_evt_feast	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 4	}	}	AMD_T_2P_SCORE_GOOD = yes	}	text = AMD_EV_DESC_21024_1	picture = GFX_evt_library	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 4	}	}	AMD_T_2P_SCORE_COMMON = yes	}	text = AMD_EV_DESC_21024_2	picture = GFX_evt_library	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 4	}	}	AMD_T_2P_SCORE_BAD = yes	}	text = AMD_EV_DESC_21024_3	picture = GFX_evt_library	}
	desc = {	trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 9	}	}	}	text = AMD_EV_DESC_21029	picture = GFX_evt_mysterious_forest	}
	#desc = {	trigger = {		AMD_T_2P_SCORE_BAD = yes	}	text = AMD_EV_DESC_21021_2	}
	picture = GFX_evt_lovers
	is_triggered_only = yes
	
	#	당신 AMD_ET_POV		상대 AMD_ET_TGT
	immediate = {
		event_target:AMD_ET_POV = {
			event_target:AMD_ET_TGT = {
				AMD_E_SET_AD_WITH_PREV = yes
			}
		}
	}
	option = {	name = AMD_EV_OPT_PLAY_LONG_NIGHT	#롱타임. 인간 남녀여야 함.
		trigger = {	AMD_T_2P_SCORE_GOOD = yes	AMD_T_IS_NORMAL_HUMAN_COUPLE = yes	}
		custom_tooltip = {	text = AMD_String_PLAY_LONG	}
		prestige = 10
		hidden_tooltip = {
			event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1123	}	}
		}
	}
	option = {	name = AMD_EV_OPT_PLAY_SHORT_NIGHT	#숏타임
		trigger = {	OR = {	AMD_T_2P_SCORE_COMMON = yes	AND = {	AMD_T_2P_SCORE_GOOD = yes	AMD_T_IS_NORMAL_HUMAN_COUPLE = no	}	}	}
		custom_tooltip = {	text = AMD_String_PLAY_SHORT	}
		hidden_tooltip = {
			event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1122	}	}
		}
	}
	option = {	name = AMD_EV_OPT_21021_2	#활쏘기/GOOD	30%	무력+1
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 1	}	}	AMD_T_2P_SCORE_GOOD = yes	}
		random = {	chance = 30	event_target:AMD_ET_TGT = {	change_martial = 1	}	}
		random = {	chance = 30	event_target:AMD_ET_POV = {	change_martial = 1	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21021_2	#활쏘기/COMMON	15%	무력+1
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 1	}	}	AMD_T_2P_SCORE_COMMON = yes	}
		random = {	chance = 15	event_target:AMD_ET_TGT = {	change_martial = 1	}	}
		random = {	chance = 15	event_target:AMD_ET_POV = {	change_martial = 1	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21021_3	#활쏘기/FAIL	25%	부상
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 1	}	}	AMD_T_2P_SCORE_BAD = yes	}
		prestige = -10
		random = {	chance = 25	event_target:AMD_ET_POV = {	add_trait = wounded	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21022_2	#쇼핑/GOOD  	30%	관리+1
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 2	}	}	AMD_T_2P_SCORE_GOOD = yes	}
		wealth = -20
		random = {	chance = 30	event_target:AMD_ET_TGT = {	change_stewardship = 1	}	}
		random = {	chance = 30	event_target:AMD_ET_POV = {	change_stewardship = 1	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21022_2	#쇼핑/COMMON	15%	관리+1
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 2	}	}	AMD_T_2P_SCORE_COMMON = yes	}
		wealth = -10
		random = {	chance = 15	event_target:AMD_ET_TGT = {	change_stewardship = 1	}	}
		random = {	chance = 15	event_target:AMD_ET_POV = {	change_stewardship = 1	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21022_3	#쇼핑/FAIL  	금-100
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 2	}	}	AMD_T_2P_SCORE_BAD = yes	}
		prestige = -10
		wealth = -100
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21023_2	#만찬/GOOD  	잘먹음 모디파이어 3년
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 3	}	}	AMD_T_2P_SCORE_GOOD = yes	}
		event_target:AMD_ET_POV = {	add_character_modifier = {	name = well_fed	years = 3	}	}
		event_target:AMD_ET_TGT = {	add_character_modifier = {	name = well_fed	years = 3	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21023_2	#만찬/COMMON	잘먹음 모디파이어 1년
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 3	}	}	AMD_T_2P_SCORE_COMMON = yes	}
		event_target:AMD_ET_POV = {	add_character_modifier = {	name = well_fed	years = 1	}	}
		event_target:AMD_ET_TGT = {	add_character_modifier = {	name = well_fed	years = 1	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21020_bad	#만찬/FAIL  	25%	건강-0.1
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 3	}	}	AMD_T_2P_SCORE_BAD = yes	}
		prestige = -10
		random = {	chance = 25	event_target:AMD_ET_TGT = {	health = -0.1	}	}
		random = {	chance = 25	event_target:AMD_ET_POV = {	health = -0.1	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21024_2	#독서/GOOD  	30%	학력+1
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 4	}	}	AMD_T_2P_SCORE_GOOD = yes	}
		random = {	chance = 30	event_target:AMD_ET_TGT = {	change_learning = 1	}	}
		random = {	chance = 30	event_target:AMD_ET_POV = {	change_learning = 1	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21024_2	#독서/COMMON	15%	학력+1
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 4	}	}	AMD_T_2P_SCORE_COMMON = yes	}
		random = {	chance = 15	event_target:AMD_ET_TGT = {	change_learning = 1	}	}
		random = {	chance = 15	event_target:AMD_ET_POV = {	change_learning = 1	}	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	option = {	name = AMD_EV_OPT_21020_bad	#독서/FAIL  	페널티 없음
		trigger = {	event_target:AMD_ET_POV = {	check_variable = {	which = local_AMD_lovers_date	value == 4	}	}	AMD_T_2P_SCORE_BAD = yes	}
		prestige = -10
		clr_global_flag = AMD_GF_IN_ACTION
	}
	
}



#	22010~22019	죄수심문
character_event = {	id = AMD.22010		#죄수이벤트 시작
	is_triggered_only = yes
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	#감금상태에 따라 기본 그래픽이 달라지는 걸 추가 예정. 상세한 문장을 쓸 여력은 없다...
	desc = AMD_EV_DESC_22010
	#desc = {	trigger = {	event_target:AMD_ET_TGT = {	has_character_modifier = the_dungeon	}	}	text = AMD_EV_DESC_22010_1	picture = GFX_evt_into_the_dungeon	}
	
	option = {	name = AMD_EV_OPT_22010_1	#대화	회유/협박/협상
		custom_tooltip = {	text = AMD_EV_TT_22010_1	}
		hidden_tooltip = {	event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22020	}	}	}
	}
	option = {	name = AMD_EV_OPT_22010_2	#고문	고문/절단/망신 (DLC Reapers)
		custom_tooltip = {	text = AMD_EV_TT_22010_2	}
		hidden_tooltip = {	event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22030	}	}	}
	}
	option = {	name = AMD_EV_OPT_22010_3	#섹스	애무/섹스/성고문
		tooltip_info = lustful
		custom_tooltip = {	text = AMD_EV_TT_22010_3	}
		trigger = {	event_target:AMD_ET_TGT = {	AMD_T_IS_HUMAN = yes	}	trait = lustful	}
		hidden_tooltip = {	event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22040	}	}	}
	}
	option = {	name = AMD_EV_OPT_22010_4	#오늘은 이만 물러가주지
		hidden_tooltip = {	AMD_E_END_CHAIN = yes	}
	}
	
	
	
}
character_event = {	id = AMD.22020		#	대화
	is_triggered_only = yes
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	desc = AMD_EV_DESC_22020
	
	immediate = {
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
	}
	after = {
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
		event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_14 = yes	}
		AMD_E_ACM_COOLDOWN_14 = yes
			AMD_E_END_CHAIN = yes
	}
	
	option = {	name = AMD_EV_OPT_22020_1	#회유
		custom_tooltip = {	text = AMD_EV_TT_22020_1	}
		random_list = {	#사식/반발감소	회유/반발감소	실패/공포감소
			100 = {	#사식/반발감소
				event_target:AMD_ET_TGT = {	add_character_modifier = {	name = well_fed	months = 3	}	}
				hidden_tooltip = {	event_target:AMD_ET_TGT = {	AMD_E_RCM_SLAVE_HATE = yes	}	}
				modifier = {	factor = 1.5	stewardship = 12	}
				modifier = {	factor = 1.5	stewardship = 18	}
				modifier = {	factor = 1.5	stewardship = 24	}
				modifier = {	factor = 3.0	trait = gluttonous	}
			}
			100 = {	#설득/관계증가 반발감소
				event_target:AMD_ET_TGT = {	opinion = {	who = ROOT	modifier = opinion_impressed	years = 1	}	}
				hidden_tooltip = {	event_target:AMD_ET_TGT = {	AMD_E_RCM_SLAVE_HATE = yes	}	}
				modifier = {	factor = 1.5	diplomacy = 12	}
				modifier = {	factor = 1.5	diplomacy = 15	}
				modifier = {	factor = 1.5	diplomacy = 18	}
				modifier = {	factor = 1.5	diplomacy = 21	}
				modifier = {	factor = 1.5	diplomacy = 24	}
				modifier = {	factor = 1.5	trait = socializer	}
				modifier = {	factor = 1.5	trait = gregarious	}
				
			}
			300 = {	#실패/공포감소
				event_target:AMD_ET_TGT = {	opinion = {	who = ROOT	modifier = opinion_irritated	years = 1	}	}
				hidden_tooltip = {	event_target:AMD_ET_TGT = {	AMD_E_RCM_SLAVE_FEAR = yes	}	}
				modifier = {	factor = 1.5	NOT = {	diplomacy = 3	}	}
				modifier = {	factor = 1.5	NOT = {	diplomacy = 6	}	}
				modifier = {	factor = 1.5	NOT = {	diplomacy = 9	}	}
				modifier = {	factor = 1.5	trait = shy	}
				modifier = {	factor = 2.0	trait = ugly	}
				modifier = {	factor = 2.0	trait = slow	}
				modifier = {	factor = 3.0	trait = imbecile	}
				modifier = {	factor = 1.5	event_target:AMD_ET_TGT = {	trait = brave	}	}
				modifier = {	factor = 0.5	event_target:AMD_ET_TGT = {	trait = craven	}	}
				modifier = {	factor = 1.5	event_target:AMD_ET_TGT = {	trait = stubborn	}	}
			}
		}
		hidden_tooltip = {	
			event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
			event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_14 = yes	}
			AMD_E_ACM_COOLDOWN_14 = yes
			AMD_E_END_CHAIN = yes
		}
	}
	option = {	name = AMD_EV_OPT_22020_2	#협박
		custom_tooltip = {	text = AMD_EV_TT_22020_2	}
		random_list = {	#성공/공포증가	실패/반발증가
			100 = {	custom_tooltip = {	text = AMD_String_SUCCESS	}	#성공/공포증가
				event_target:AMD_ET_TGT = {	opinion = {	who = ROOT	modifier = opinion_horrified	months = 6	}	}
				hidden_tooltip = {	event_target:AMD_ET_TGT = {	AMD_E_ACM_SLAVE_FEAR = yes	}	}
				modifier = {	factor = 1.5	combat_rating = 3	}
				modifier = {	factor = 1.5	combat_rating = 4	}
				modifier = {	factor = 1.5	combat_rating = 5	}
				modifier = {	factor = 1.5	combat_rating = 6	}
				modifier = {	factor = 1.5	combat_rating = 7	}
				modifier = {	factor = 1.5	intrigue = 12	}
				modifier = {	factor = 1.5	intrigue = 15	}
				modifier = {	factor = 1.5	intrigue = 18	}
				modifier = {	factor = 1.5	intrigue = 21	}
				modifier = {	factor = 1.5	intrigue = 24	}
				modifier = {	factor = 1.5	trait = lunatic	}
				modifier = {	factor = 1.5	trait = possessed	}
				modifier = {	factor = 1.5	trait = AMD_sadist	}
				modifier = {	factor = 1.5	trait = impaler	}
				modifier = {	factor = 1.5	trait = wroth	}
				modifier = {	factor = 1.5	trait = scarred	}
				modifier = {	factor = 1.5	trait = strong	}
				modifier = {	factor = 1.5	trait = robust	}
			}
			300 = {	custom_tooltip = {	text = AMD_String_FAIL	}	#실패/반발증가
				event_target:AMD_ET_TGT = {	opinion = {	who = ROOT	modifier = opinion_angry	years = 1	}	}
				hidden_tooltip = {	event_target:AMD_ET_TGT = {	AMD_E_ACM_SLAVE_HATE = yes	}	}
				modifier = {	factor = 1.5	NOT = {	intrigue = 3	}	}
				modifier = {	factor = 1.5	NOT = {	intrigue = 6	}	}
				modifier = {	factor = 1.5	NOT = {	intrigue = 9	}	}
				modifier = {	factor = 2.0	trait = weak	}
				modifier = {	factor = 2.0	trait = feeble	}
				modifier = {	factor = 1.5	event_target:AMD_ET_TGT = {	trait = brave	}	}
				modifier = {	factor = 0.5	event_target:AMD_ET_TGT = {	trait = craven	}	}
				modifier = {	factor = 0.5	event_target:AMD_ET_TGT = {	trait = weak	}	}
				modifier = {	factor = 0.5	event_target:AMD_ET_TGT = {	trait = feeble	}	}
				modifier = {	factor = 1.5	event_target:AMD_ET_TGT = {	trait = stubborn	}	}
			}
		}
		hidden_tooltip = {	
			event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
			event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_14 = yes	}
			AMD_E_ACM_COOLDOWN_14 = yes
			AMD_E_END_CHAIN = yes
		}
	}
	option = {	name = AMD_EV_OPT_22020_3	#협상	협상이벤트로 이동
		custom_tooltip = {	text = AMD_EV_TT_22020_3	}
		hidden_tooltip = {
			event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22090	}	}
		}
	}
	option = {	name = AMD_EV_OPT_22010_4	#오늘은 이만 물러가주지
		hidden_tooltip = {
			event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
			AMD_E_END_CHAIN = yes
		}
	}
}
character_event = {	id = AMD.22030		#	고문
	is_triggered_only = yes
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_torture
	desc = AMD_EV_DESC_22030
	
	#TODO	절단 시행에는 잔혹한 이유가 필요, 망신 시행에 DLC 필요를 언급할까...?
	
	option = {	name = AMD_EV_OPT_22030_1	#고문	신체손상 없음.
		custom_tooltip = {	text = AMD_EV_TT_22030_1	}
		hidden_tooltip = {	#바닐라, 고문 실행자에게 닉네임 달아주기
			if = {
				limit = {
					has_nickname = no
					is_adult = yes
					NOT = { trait = incapable }
				}
				random_list = {
					5 = {	give_nickname = nick_the_cruel	}
					5 = {	give_nickname = nick_the_evil	}
					5 = {	give_nickname = nick_the_tormentor	}
					5 = {	give_nickname = nick_the_depraved	}
					100 = {}
				}
			}
		}
		#잔혹/친절이 없을시 잔혹함 취득
		if = {	limit = {	NOR = {	trait = cruel	trait = kind	}	}
			random = {
				chance = 25
				add_trait = cruel
				hidden_tooltip = {	character_event = {	id = 38259	days = 3	random = 3	}	}
			}
		}
		#친절이 있을시 해당 특성을 잃고, 확률적으로 스트레스나 우울증.
		if = {	limit = { trait = kind }
			random = {
				chance = 50
				remove_trait = kind
				hidden_tooltip = {	character_event = {	id = 38307	days = 3	random = 3	}	}
			}
			hidden_tooltip = {
				random_list = {
					30 = {
						add_trait = stressed
						hidden_tooltip = {	character_event = {	id = 38282	days = 3	random = 3	}	}
					}
					10 = {
						add_trait = depressed
						hidden_tooltip = {	character_event = {	id = 38288	days = 3	random = 3	}	}
					}
					60 = {
						#nothing
					}
				}
			}
		}
		piety = -20
		tooltip = {	#모디파이어 및 오피니언을 툴팁으로만 보여줌.
		#	실제, 오피니언은 하부 리스트, 모디파이어는 실행 이벤트에서 적용됨.
			event_target:AMD_ET_TGT = {
				add_character_modifier = { name = tortured years = 2 }
				opinion = {	modifier = opinion_tortured_me	who = ROOT	}
			}
		}
		hidden_tooltip = {	#고문 메뉴 랜덤리스트. DLC RD 유무에 따라 항목 변동. 범용고문 이벤트 필요.
			random_list = {
				120 = {	#일반 고문 리스트
					random_list = {
						10 = {	set_character_flag = AMD_CF_TORTURE_NO_DLC	#DLC Reapers 미보유시, 범용고문
							modifier = {	factor = 0	has_dlc = Reapers	}
							event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22031	}	}
						}
						10 = {	set_character_flag = AMD_CF_TORTURE_RACK	# Racks
							modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
							event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22031	}	}
						}
						10 = {	set_character_flag = AMD_CF_TORTURE_WHIP	# Whipping
							modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
							event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22031	}	}
						}
						10 = {	set_character_flag = AMD_CF_TORTURE_RATS	# Rats
							modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
							event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22031	}	}
						}
						20 = {	set_character_flag = AMD_CF_TORTURE_HEAT	# Heat exposure
							modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
							modifier = {	factor = 0
								NAND = {
									month = 3
									NOT = { month = 9 }
									OR = {
										capital_scope = { region = world_africa }
										capital_scope = { region = world_middle_east }
										capital_scope = { region = world_persia }
										capital_scope = { region = world_india_rajastan }
									}
								}
							}
							event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22031	}	}
						}
						20 = {	set_character_flag = AMD_CF_TORTURE_COLD	# Cold exposure
							modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
							modifier = {	factor = 0
								NAND = {
									OR = { 
										month = 11
										NOT = { month = 2}
									}
									OR = {
										capital_scope = { region = world_europe_north }
										capital_scope = { region = world_steppe_west }
										capital_scope = { region = world_steppe_east }
									}
								}
							}
							event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22031	}	}
						}
					}
					hidden_tooltip = {	#DLC Reapers, 타겟과 친인척들과 관계악화
						opinion = {	modifier = opinion_tortured_me	who = ROOT	}
						mother = {	opinion = {	modifier = opinion_tortured_close_kin	who = ROOT	}	}
						father = {	opinion = {	modifier = opinion_tortured_close_kin	who = ROOT	}	}
						spouse = {	opinion = {	modifier = opinion_tortured_close_kin	who = ROOT	}	}
						any_child = {	opinion = {	modifier = opinion_tortured_close_kin	who = ROOT	}	}
						if = {
							limit = {
								ROOT = {
									NOT = { dynasty = event_target:AMD_ET_TGT }
									NOT = { sibling = event_target:AMD_ET_TGT }
								}
							}
							any_sibling = {	opinion = {	modifier = opinion_tortured_close_kin	who = ROOT	}	}
							any_dynasty_member = {	opinion = {	modifier = opinion_tortured_family	who = ROOT	}	}
						}
					}
				}
				40 = {	set_character_flag = AMD_CF_TORTURE_TICKLE
					modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
					modifier = {	factor = 0	NOT = {	trait = lunatic	}	}
					event_target:AMD_ET_TGT = {	character_event = { id = AMD_PING.22031 } }
				}
				30 = {	#당신이 시인인 경우, 시 낭송 고문
					modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
					modifier = {	factor = 0	NOT = {	trait = poet	}	}
					random_list = {
						10 = {	set_character_flag = AMD_CF_TORTURE_POEM_1	}
						10 = {	set_character_flag = AMD_CF_TORTURE_POEM_2	}
						10 = {	set_character_flag = AMD_CF_TORTURE_POEM_3	}
					}
					event_target:AMD_ET_TGT = {	character_event = { id = AMD_PING.22031 }	}
					reverse_opinion = {	modifier = opinion_bad_poetry	who = event_target:AMD_ET_TGT	}
				}
				10 = {	set_character_flag = AMD_CF_MUTIL_DEATH	#	고문 중 사망
					event_target:AMD_ET_TGT = { character_event = { id = AMD_PING.22039 } }
					modifier = {	factor = 0.25	OR = {	culture_group = byzantine	culture_group = chinese_group	}	}
					modifier = {	factor = 0.50	trait = physician	}
					modifier = {	factor = 0.75	trait = impaler	}
				}
			}
		}
	}
	option = {	name = AMD_EV_OPT_22030_2	#절단	신체손상.
		custom_tooltip = {	text = AMD_EV_TT_22030_2	}
		trigger = {
			OR = {	#dlc 보유 및 대상의 상태
				AND = {	NOT = {	has_dlc = Reapers	has_dlc = "Legacy of Rome"	}	#	DLC가 둘 다 없으면 maimed 만 체크.
					NOT = {	event_target:AMD_ET_TGT = {	trait = maimed	}	}
				}
				AND = {	has_dlc = "Legacy of Rome"	NOT = {	has_dlc = Reapers	}		#	Reapers 없음, LoR 있음.
					NOT = {	#이하의 조건을 다 만족하면 할 게 없으므로 안됨
						AND = {	#불구, 장님, 고자/여자 셋 다 만족한다
							event_target:AMD_ET_TGT = {	trait = maimed	}
							event_target:AMD_ET_TGT = {	trait = blinded	}
							event_target:AMD_ET_TGT = {	OR = {	trait = eunuch	is_female = yes	}	}
						}
					}
				}
				AND = {	has_dlc = Reapers	#	Reapers 있음
					NOT = {
						AND = {
							event_target:AMD_ET_TGT = {	trait = one_legged	}
							event_target:AMD_ET_TGT = {	trait = one_handed	}
							event_target:AMD_ET_TGT = {	trait = disfigured	}
							event_target:AMD_ET_TGT = {	OR = {	trait = blinded	trait = one_eyed	}	}
							event_target:AMD_ET_TGT = {	OR = {	trait = eunuch	is_female = yes	}	}
						}
					}
				}
			}
			#당신의 특성 문제
			OR = {
				trait = AMD_sadist
				trait = lunatic
				trait = cruel
				trait = impaler
				trait = wroth
				trait = arbitrary
				AND = {
					trait = envious
					trait = ugly
				}
			}
			NOT = { trait = kind }
		}
		hidden_tooltip = {	#닉네임 없을시 랜덤리스트
			if = {
				limit = {
					has_nickname = no
					is_adult = yes
					NOT = { trait = incapable }
				}
				random_list = {
					5 = {	give_nickname = nick_the_evil	}
					5 = {	give_nickname = nick_the_tormentor	}
					5 = {	give_nickname = nick_the_butcher	}
					5 = {	give_nickname = nick_the_mutilator	}
					5 = {	give_nickname = nick_the_monster	}
					5 = {	give_nickname = nick_son_of_evilgod	}
					100 = {}
				}
			}
		}
		#	잔혹 없을시 해당 특성 취득
		if = {	limit = { NOT = { trait = cruel } }
			random = {
				chance = 50
				add_trait = cruel
				hidden_tooltip = {
					character_event = { id = 38259	days = 3	random = 3	}
				}
			}
		}
		piety = -50
		hidden_tooltip = {
			#친인척과 오피니언 변동
			event_target:AMD_ET_TGT = {
				opinion = {	modifier = opinion_mutilated_me	who = ROOT	}
				mother = {	opinion = {	modifier = opinion_mutilated_close_kin	who = ROOT	}	}
				father = {	opinion = {	modifier = opinion_mutilated_close_kin	who = ROOT	}	}
				spouse = {	opinion = {	modifier = opinion_mutilated_close_kin	who = ROOT	}	}
				any_child = {	opinion = {	modifier = opinion_mutilated_close_kin	who = ROOT	}	}
				if = {
					limit = {
						NOT = { dynasty = ROOT }
						NOT = { sibling = ROOT }
					}
					any_sibling = {	opinion = {	modifier = opinion_mutilated_close_kin	who = ROOT	}	}
					any_dynasty_member = {	opinion = {	modifier = opinion_mutilated_family	who = ROOT	}	}
				}
			}
			#절단 리스트			TODO : DLC REAPERS 없을시의 분기 추가
			random_list = {
				#dlc Reapers 있음
				10 = {	set_character_flag = AMD_CF_MUTIL_LEG
					modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
					modifier = {	factor = 0	trait = one_legged	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22033	}	}
				}
				10 = {	set_character_flag = AMD_CF_MUTIL_HAND
					modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
					modifier = {	factor = 0	trait = one_handed	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22033	}	}
				}
				10 = {	set_character_flag = AMD_CF_MUTIL_EYE	
					modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
					modifier = {	factor = 0	OR = {	trait = one_eyed	trait = blinded	}	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22033	}	}
				}
				10 = {	set_character_flag = AMD_CF_MUTIL_FACE
					modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
					modifier = {	factor = 0	trait = disfigured	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22033	}	}
				}
				10 = {	set_character_flag = AMD_CF_MUTIL_GOJA
					modifier = {	factor = 0	NOT = {	has_dlc = Reapers	}	}
					modifier = {	factor = 0	OR = {	is_female = yes	trait = eunuch	}	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22033	}	}
				}
				#DLC 없음
				10 = {	set_character_flag = AMD_CF_MUTIL_NO_DLC
					modifier = {	factor = 0	trait = maimed	}
					modifier = {	factor = 0	has_dlc = Reapers	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22033	}	}
				}
				#DLC LoR 있음
				10 = {	set_character_flag = AMD_CF_MUTIL_BLIND_LOR
					#modifier = {	factor = 0	has_dlc = Reapers	}
					modifier = {	factor = 0	NOT = {	has_dlc = "Legacy of Rome"	}	}
					modifier = {	factor = 0	OR = {	trait = one_eyed	trait = blinded	}	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22033	}	}
				}
				10 = {	set_character_flag = AMD_CF_MUTIL_GOJA_LOR	
					#modifier = {	factor = 0	has_dlc = Reapers	}
					modifier = {	factor = 0	NOT = {	has_dlc = "Legacy of Rome"	}	}
					modifier = {	factor = 0	OR = {	is_female = yes	trait = eunuch	}	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22033	}	}
				}
				#	고문 중 사망
				20 = {	set_character_flag = AMD_CF_MUTIL_DEATH
					event_target:AMD_ET_TGT = { character_event = { id = AMD_PING.22039 } }
					modifier = {	factor = 0.25	OR = {	culture_group = byzantine	culture_group = chinese_group	}	}
					modifier = {	factor = 0.50	trait = physician	}
					modifier = {	factor = 0.75	trait = impaler	}
				}
			}
		
		}
	}
	option = {	name = AMD_EV_OPT_22030_3	#망신	치욕적인 행위	dlc reapers 필수
		custom_tooltip = {	text = AMD_EV_TT_22030_3	}
		trigger = {	has_dlc = Reapers	}
		
		hidden_tooltip = {
			#친인척과 오피니언 변동, 모디파이어 부여.
			event_target:AMD_ET_TGT = {
				add_character_modifier = {	name = publicly_humiliated	years = 10	}
				opinion = {	modifier = opinion_humiliated_me	who = ROOT	}
				mother = {	opinion = {	modifier = opinion_humiliated_close_kin	who = ROOT	}	}
				father = {	opinion = {	modifier = opinion_humiliated_close_kin	who = ROOT	}	}
				spouse = {	opinion = {	modifier = opinion_humiliated_close_kin	who = ROOT	}	}
				any_child = {	opinion = {	modifier = opinion_humiliated_close_kin	who = ROOT	}	}
				if = {
					limit = {
						NOT = { dynasty = ROOT }
						NOT = { sibling = ROOT }
					}
					any_sibling = {	opinion = {	modifier = opinion_humiliated_close_kin	who = ROOT	}	}
					any_dynasty_member = {	opinion = {	modifier = opinion_humiliated_family	who = ROOT	}	}
				}
			}
			#망신 리스트
			random_list = {
				33 = {	set_character_flag = AMD_CF_HUMIL_TAR_1	# Tar 'n' feathers
					modifier = {	factor = 0
						event_target:AMD_ET_TGT = {
							OR = {
								has_character_modifier = incestuous_adulterer
								has_character_modifier = incestuous_adulteress
								has_character_modifier = adulterer
								has_character_modifier = adulteress
								has_character_modifier = known_sodomite
								has_character_modifier = cradle_robber
								has_character_modifier = adulterous_priest
							}
						}
					}
					modifier = {	factor = 0	OR = {	is_nomadic = yes	is_tribal = yes	}	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22035	}	}
				}
				33 = {	set_character_flag = AMD_CF_HUMIL_TAR_2	# Tar 'n' feathers NOMAD
					modifier = {	factor = 0
						event_target:AMD_ET_TGT = {
							OR = {
								has_character_modifier = incestuous_adulterer
								has_character_modifier = incestuous_adulteress
								has_character_modifier = adulterer
								has_character_modifier = adulteress
								has_character_modifier = known_sodomite
								has_character_modifier = cradle_robber
								has_character_modifier = adulterous_priest
							}
						}
					}
					modifier = {	factor = 0	NOR = {	is_nomadic = yes	is_tribal = yes	}	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22035	}	}
				}
				33 = {	set_character_flag = AMD_CF_HUMIL_STOCK	# the Stocks
					modifier = {	factor = 0
						event_target:AMD_ET_TGT = {
							OR = {
								has_character_modifier = incestuous_adulterer
								has_character_modifier = incestuous_adulteress
								has_character_modifier = adulterer
								has_character_modifier = adulteress
								has_character_modifier = known_sodomite
								has_character_modifier = cradle_robber
								has_character_modifier = adulterous_priest
							}
						}
					}
					modifier = {	factor = 0	OR = {	is_nomadic = yes	is_tribal = yes	}	}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22035	}	}
				}
				33 = {	set_character_flag = AMD_CF_HUMIL_SHAME	# walk of shame
					modifier = {	factor = 0
						event_target:AMD_ET_TGT = {
							NOT = { 
								OR = {
									has_character_modifier = incestuous_adulterer
									has_character_modifier = incestuous_adulteress
									has_character_modifier = adulterer
									has_character_modifier = adulteress
									has_character_modifier = known_sodomite
									has_character_modifier = cradle_robber
									has_character_modifier = adulterous_priest
								}
							}
						}
					}
					event_target:AMD_ET_TGT = {	character_event = {	id = AMD_PING.22035	}	}
				}
			}
		}
	}
	option = {	name = AMD_EV_OPT_22010_4	#오늘은 이만 물러가주지
		hidden_tooltip = {	AMD_E_END_CHAIN = yes	}
	}
}
character_event = {	id = AMD.22031		#		고문 통합이벤트
	picture = "GFX_evt_torture"
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_NO_DLC	}	picture = GFX_evt_torture	text = AMD_EV_DESC_22031_1	}
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_RACK	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20001	}
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_WHIP	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20003	}
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_RATS	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20005	}
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_HEAT	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20009	}
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_COLD	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20011	}
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_TICKLE	}	picture = GFX_evt_lunatic	text = EVTDSC_RIP_20007	}
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_POEM_1	}	picture = GFX_evt_recieve_letter	text = EVTDSC_RIP_20023	}
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_POEM_2	}	picture = GFX_evt_recieve_letter	text = EVTDSC_RIP_20025	}
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_POEM_3	}	picture = GFX_evt_recieve_letter	text = EVTDSC_RIP_20027	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_NO_DLC	}	name = AMD_EV_OPT_22010_4
		event_target:AMD_ET_TGT = {	
			random = {	chance = 50	add_trait = wounded	}
			add_character_modifier = { name = tortured years = 2 }
		}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_RACK	}	name = EVTOPTA_RIP_20001
		event_target:AMD_ET_TGT = {	prisoner_torture_effect = yes	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_WHIP	}	name = EVTOPTA_RIP_20003
		event_target:AMD_ET_TGT = {	prisoner_torture_effect = yes	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_RATS	}	name = EVTOPTA_RIP_20005
		event_target:AMD_ET_TGT = {	prisoner_torture_effect = yes	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_HEAT	}	name = EVTOPTA_RIP_20009
		event_target:AMD_ET_TGT = {	prisoner_torture_effect = yes	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_COLD	}	name = EVTOPTA_RIP_20011
		event_target:AMD_ET_TGT = {	prisoner_torture_effect = yes	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_TICKLE	}	name = EVTOPTA_RIP_20007
		event_target:AMD_ET_TGT = {	prisoner_torture_effect = yes	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_POEM_1	}	name = EVTOPTA_RIP_20023
		event_target:AMD_ET_TGT = {	
			random = {
				chance = 5
				if = { limit = { NOT = { trait = lunatic } }
					add_trait = lunatic
					hidden_tooltip = {
						character_event = { id = 38304 }
					}
				}
			}
		}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_POEM_2	}	name = EVTOPTA_RIP_20025
		event_target:AMD_ET_TGT = {	
			random = {
				chance = 5
				if = { limit = { NOT = { trait = lunatic } }
					add_trait = lunatic
					hidden_tooltip = {
						character_event = { id = 38304 }
					}
				}
			}
		}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_TORTURE_POEM_3	}	name = EVTOPTA_RIP_20027
		event_target:AMD_ET_TGT = {	
			random = {
				chance = 5
				if = { limit = { NOT = { trait = lunatic } }
					add_trait = lunatic
					hidden_tooltip = {
						character_event = { id = 38304 }
					}
				}
			}
		}
	}
	after = {
		clr_character_flag = AMD_CF_TORTURE_NO_DLC
		clr_character_flag = AMD_CF_TORTURE_RACK
		clr_character_flag = AMD_CF_TORTURE_WHIP
		clr_character_flag = AMD_CF_TORTURE_RATS
		clr_character_flag = AMD_CF_TORTURE_HEAT
		clr_character_flag = AMD_CF_TORTURE_COLD
		clr_character_flag = AMD_CF_TORTURE_TICKLE
		clr_character_flag = AMD_CF_TORTURE_POEM_1
		clr_character_flag = AMD_CF_TORTURE_POEM_2
		clr_character_flag = AMD_CF_TORTURE_POEM_3
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
		event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_1m = yes	}
		event_target:AMD_ET_TGT = {
			random = {	chance = 33	AMD_E_MENTAL_BREAK = yes	}
			random_list = {
				100 = {	AMD_E_ACM_SLAVE_HATE = yes
					modifier = {	factor = 2.0	trait = brave	}
					modifier = {	factor = 2.0	trait = berserker	}
				}
				100 = {	AMD_E_RCM_SLAVE_HATE = yes
					modifier = {	factor = 2.0	trait = shy	}
					modifier = {	factor = 3.0	trait = craven	}
				}
				100 = {	AMD_E_ACM_SLAVE_OBEY = yes
					modifier = {	factor = 3.0	trait = AMD_masochist	}
				}
				100 = {	AMD_E_RCM_SLAVE_OBEY = yes
					modifier = {	factor = 3.0	trait = just	}
				}
				100 = {	AMD_E_ACM_SLAVE_FEAR = yes
					modifier = {	factor = 2.0	trait = shy	}
					modifier = {	factor = 2.0	trait = craven	}
				}
			}
		}
		AMD_E_ACM_COOLDOWN_1m = yes
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.22033		#		절단 통합이벤트
	picture = "GFX_evt_torture"
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	desc = {	trigger = {	has_character_flag = AMD_CF_MUTIL_NO_DLC	}	picture = GFX_evt_torture	text = AMD_EV_DESC_22033_1	}
	desc = {	trigger = {	has_character_flag = AMD_CF_MUTIL_BLIND_LOR	}	picture = GFX_evt_torture	text = AMD_EV_DESC_22033_2	}
	desc = {	trigger = {	has_character_flag = AMD_CF_MUTIL_GOJA_LOR	}	picture = GFX_evt_torture	text = AMD_EV_DESC_22033_3	}
	desc = {	trigger = {	has_character_flag = AMD_CF_MUTIL_LEG	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20013	}
	desc = {	trigger = {	has_character_flag = AMD_CF_MUTIL_HAND	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20015	}
	desc = {	trigger = {	has_character_flag = AMD_CF_MUTIL_EYE	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20017	}
	desc = {	trigger = {	has_character_flag = AMD_CF_MUTIL_FACE	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20019	}
	desc = {	trigger = {	has_character_flag = AMD_CF_MUTIL_GOJA	}	picture = GFX_evt_torture	text = EVTDSC_RIP_20023	}
	
	option = {	trigger = {	has_character_flag = AMD_CF_MUTIL_NO_DLC	}	name = AMD_EV_OPT_22033_1
		event_target:AMD_ET_TGT = {	
			add_trait = maimed
			add_character_modifier = { name = tortured years = 2 }
		}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_MUTIL_BLIND_LOR	}	name = AMD_EV_OPT_22033_2
		event_target:AMD_ET_TGT = {
			hidden_tooltip = {	remove_trait = one_eyed	}
			add_trait = blinded
			add_character_modifier = { name = tortured years = 2 }
		}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_MUTIL_GOJA_LOR	}	name = AMD_EV_OPT_22033_3
		event_target:AMD_ET_TGT = {
			AMD_E_CLEAR_PENIS = yes
			add_trait = eunuch
			add_character_modifier = { name = tortured years = 2 }
		}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_MUTIL_LEG	}	name = EVTOPTA_RIP_20013
		event_target:AMD_ET_TGT = {	add_trait = one_legged	prisoner_mutilate_effect = yes	hidden_tooltip = {	character_event = {	id = RIP.11503	}	}	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_MUTIL_HAND	}	name = EVTOPTA_RIP_20015
		event_target:AMD_ET_TGT = {	add_trait = one_handed	prisoner_mutilate_effect = yes	hidden_tooltip = {	character_event = {	id = RIP.11502	}	}	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_MUTIL_EYE	}	name = EVTOPTA_RIP_20017
		event_target:AMD_ET_TGT = {	add_trait = one_eyed	prisoner_mutilate_effect = yes	hidden_tooltip = {	character_event = {	id = RIP.11501	}	}	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_MUTIL_FACE	}	name = EVTOPTA_RIP_20019
		event_target:AMD_ET_TGT = {	add_trait = disfigured	prisoner_mutilate_effect = yes	hidden_tooltip = {	character_event = {	id = RIP.11504	}	}	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_MUTIL_GOJA	}	name = EVTOPTA_RIP_20021
		event_target:AMD_ET_TGT = {
			AMD_E_CLEAR_PENIS = yes
			add_trait = eunuch
			prisoner_mutilate_effect = yes
		}
	}
	after = {
		clr_character_flag = AMD_CF_MUTIL_NO_DLC
		clr_character_flag = AMD_CF_MUTIL_BLIND_LOR
		clr_character_flag = AMD_CF_MUTIL_GOJA_LOR
		clr_character_flag = AMD_CF_MUTIL_LEG
		clr_character_flag = AMD_CF_MUTIL_HAND
		clr_character_flag = AMD_CF_MUTIL_EYE
		clr_character_flag = AMD_CF_MUTIL_FACE
		clr_character_flag = AMD_CF_MUTIL_GOJA
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
		event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_1m = yes	}
		event_target:AMD_ET_TGT = {
			AMD_E_MENTAL_BREAK = yes
			random_list = {
				100 = {	AMD_E_ACM_SLAVE_HATE = yes
					modifier = {	factor = 2.0	trait = brave	}
					modifier = {	factor = 2.0	trait = berserker	}
				}
				100 = {	AMD_E_RCM_SLAVE_HATE = yes
					modifier = {	factor = 2.0	trait = shy	}
					modifier = {	factor = 4.0	trait = craven	}
				}
				100 = {	AMD_E_ACM_SLAVE_OBEY = yes
					modifier = {	factor = 2.0	trait = AMD_masochist	}
				}
				100 = {	AMD_E_RCM_SLAVE_OBEY = yes
					modifier = {	factor = 3.0	trait = just	}
				}
				100 = {	AMD_E_ACM_SLAVE_FEAR = yes
					modifier = {	factor = 2.0	trait = shy	}
					modifier = {	factor = 4.0	trait = craven	}
				}
			}
		}
		AMD_E_ACM_COOLDOWN_1m = yes
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.22035		#		망신 통합이벤트
	picture = "GFX_evt_torture"
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	desc = {	trigger = {	has_character_flag = AMD_CF_HUMIL_TAR_1	}	picture = GFX_evt_scandal	text = EVTDESCRIP.15001	}
	desc = {	trigger = {	has_character_flag = AMD_CF_HUMIL_TAR_2	}	picture = GFX_evt_scandal	text = EVTDESCRIP.15007	}
	desc = {	trigger = {	has_character_flag = AMD_CF_HUMIL_STOCK	}	picture = GFX_evt_scandal	text = EVTDESCRIP.15003	}
	desc = {	trigger = {	has_character_flag = AMD_CF_HUMIL_SHAME	}	picture = GFX_evt_scandal	text = EVTDESCRIP.15005	}
	
	option = {	trigger = {	has_character_flag = AMD_CF_HUMIL_TAR_1	}	name = EVTOPTARIP.15001
		event_target:AMD_ET_TGT = {	prisoner_humiliation_effect = yes	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_HUMIL_TAR_2	}	name = EVTOPTARIP.15007
		event_target:AMD_ET_TGT = {	prisoner_humiliation_effect = yes	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_HUMIL_STOCK	}	name = EVTOPTARIP.15003
		event_target:AMD_ET_TGT = {	prisoner_humiliation_effect = yes	}
	}
	option = {	trigger = {	has_character_flag = AMD_CF_HUMIL_SHAME	}	name = EVTOPTARIP.15005
		event_target:AMD_ET_TGT = {	prisoner_humiliation_effect = yes	}
	}
	after = {
		clr_character_flag = AMD_CF_HUMIL_TAR_1
		clr_character_flag = AMD_CF_HUMIL_TAR_2
		clr_character_flag = AMD_CF_HUMIL_STOCK
		clr_character_flag = AMD_CF_HUMIL_SHAME
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
		event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_1m = yes	}
		event_target:AMD_ET_TGT = {
			random = {	chance = 66	AMD_E_MENTAL_BREAK = yes	}
			random_list = {
				100 = {	AMD_E_ACM_SLAVE_HATE = yes
					modifier = {	factor = 2.0	trait = brave	}
					modifier = {	factor = 2.0	trait = berserker	}
				}
				100 = {	AMD_E_RCM_SLAVE_HATE = yes
					modifier = {	factor = 2.0	trait = shy	}
					modifier = {	factor = 3.0	trait = craven	}
				}
				100 = {	AMD_E_ACM_SLAVE_OBEY = yes
					modifier = {	factor = 3.0	trait = AMD_masochist	}
				}
				100 = {	AMD_E_RCM_SLAVE_OBEY = yes
					modifier = {	factor = 3.0	trait = just	}
				}
				100 = {	AMD_E_ACM_SLAVE_FEAR = yes
					modifier = {	factor = 2.0	trait = shy	}
					modifier = {	factor = 2.0	trait = craven	}
				}
			}
		}
		AMD_E_ACM_COOLDOWN_1m = yes
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.22039		#		고문 중 사망
	desc = {	trigger = {	has_character_flag = AMD_CF_TORTURE_DEATH	}	picture = GFX_evt_torture	text = AMD_EV_DESC_22039_1	}
	desc = {	trigger = {	has_character_flag = AMD_CF_MUTIL_DEATH	}	picture = GFX_evt_torture	text = AMD_EV_DESC_22039_2	}
	picture = GFX_evt_death
	border = GFX_event_normal_frame_intrigue
	is_triggered_only = yes
	
	option = {	name = AMD_EV_OPT_22039_1
		event_target:AMD_ET_TGT = {	
			death = {	death_reason = death_dungeon	killer = ROOT	}
		}
		piety = -5
	}
	after = {
		clr_character_flag = AMD_CF_TORTURE_DEATH
		clr_character_flag = AMD_CF_MUTIL_DEATH
		AMD_E_ACM_COOLDOWN_1m = yes
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.22040		#	능욕
	is_triggered_only = yes
	picture = GFX_evt_into_the_dungeon
	desc = AMD_EV_DESC_22040
	immediate = {
		random_courtier = {
			limit = {	AMD_T_IS_HORSE = yes	is_female = no	AMD_T_IS_DOABLE = yes	NOT = {	has_global_flag = AMD_GF_APL	}	}
			save_event_target_as = AMD_ET_PRISON_HORSE
		}
		random_courtier = {
			limit = {	AMD_T_IS_BEAR = yes	is_female = no	AMD_T_IS_DOABLE = yes	NOT = {	has_global_flag = AMD_GF_APL	}	}
			save_event_target_as = AMD_ET_PRISON_BEAR
		}
		random_courtier = {
			limit = {	AMD_T_IS_CAT = yes	is_female = no	AMD_T_IS_DOABLE = yes	NOT = {	has_global_flag = AMD_GF_APL	}	}
			save_event_target_as = AMD_ET_PRISON_CAT
		}
	}
	
	#option = {	name = AMD_EV_OPT_22040_0	} 조교... 보류. 이런걸 추가하고 앉았다가는 릴리즈도 못하고 내가 먼저 죽을것
	
	option = {	name = AMD_EV_OPT_22040_1	#빠른 강간
		custom_tooltip = {	text = AMD_EV_TT_22040_1	}
		if = {	limit = {	is_female = yes	event_target:AMD_ET_TGT = {	is_female = no	}	}	#당신 여성, 대상 남성. 역강간 실패판정 후 강간 
			custom_tooltip = {	text = AMD_EV_TT_22040_PC	}
			AMD_E_PCR_FAIL_CALC = yes
			hidden_tooltip = {	#공수설정
				event_target:AMD_ET_TGT = {	AMD_E_SETA_ATK = yes	}
				AMD_E_SETA_DEF = yes
				if = {	limit = {	has_character_flag = AMD_CF_PCR	}
					event_target:AMD_ET_TGT = {	AMD_E_SETA_RA = yes	}
					AMD_E_SETA_RV = yes
				}
				else = {
					event_target:AMD_ET_TGT = {	AMD_E_SETA_RV = yes	}
					AMD_E_SETA_RA = yes
				}
				clr_character_flag = AMD_CF_PCR
				event_target:AMD_ET_TGT = {	AMD_E_SETA_ATK = yes	}
			}
		}
		else = {	AMD_E_SETA_RA = yes	event_target:AMD_ET_TGT = {	AMD_E_SETA_RV = yes	}	}
		if = {	#함락된 경우 화간으로 변경
			limit = {	#이하의 조건이 만족되지 않으면 강간.	(만족된 경우 화간이 된다)
				OR = {
					event_target:AMD_ET_TGT = {	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 5	}	}
					event_target:AMD_ET_TGT = {	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 5	}	}
					event_target:AMD_ET_TGT = {	has_opinion_modifier = {	who = event_target:AMD_ET_POV	modifier = opinion_the_chosen_one	}	}
					event_target:AMD_ET_TGT = {	has_opinion_modifier = {	who = event_target:AMD_ET_POV	modifier = opinion_loyal_servant	}	}
					event_target:AMD_ET_TGT = {	has_opinion_modifier = {	who = event_target:AMD_ET_POV	modifier = AMD_opinion_obedient	}	}
				}
			}
			clear_event_target = AMD_ET_RA
			clear_event_target = AMD_ET_RV
		}
		AMD_E_SET_RAPED_KIN_OPINION = yes
		event_target:AMD_ET_TGT = {
			AMD_E_SETA_F_VISIT_PRISONER = yes
			AMD_E_SET_AD_WITH_PREV = yes
			AMD_E_2P_SCORING_1 = yes
			AMD_E_SLAVE_SCORING = yes
			letter_event = {	id = AMD_PLAY_PING.1122		}
		}
	}
	option = {	name = AMD_EV_OPT_22040_2	#롱나잇
		custom_tooltip = {	text = AMD_EV_TT_22040_2	}
		trigger = {
			OR = {
				event_target:AMD_ET_TGT = {	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 2	}	}
				event_target:AMD_ET_TGT = {	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 2	}	}
				event_target:AMD_ET_TGT = {	has_opinion_modifier = {	who = event_target:AMD_ET_POV	modifier = opinion_the_chosen_one	}	}
				event_target:AMD_ET_TGT = {	has_opinion_modifier = {	who = event_target:AMD_ET_POV	modifier = opinion_loyal_servant	}	}
				event_target:AMD_ET_TGT = {	has_opinion_modifier = {	who = event_target:AMD_ET_POV	modifier = AMD_opinion_obedient	}	}
				#event_target:AMD_ET_TGT = {	has_character_modifier = AMD_CM_lustful_wasted	}
				trait = AMD_sex_skill_3
				trait = AMD_sex_skill_4
				trait = AMD_sex_skill_5
			}
		}
		if = {	limit = {	is_female = yes	event_target:AMD_ET_TGT = {	is_female = no	}	}	#당신 여성, 대상 남성
			AMD_E_PCR_FAIL_CALC = yes
			hidden_tooltip = {	#공수설정
				event_target:AMD_ET_TGT = {	AMD_E_SETA_ATK = yes	}
				AMD_E_SETA_DEF = yes
				if = {	limit = {	has_character_flag = AMD_CF_PCR	}
					event_target:AMD_ET_TGT = {	AMD_E_SETA_RA = yes	}
					AMD_E_SETA_RV = yes
				}
				else = {
					event_target:AMD_ET_TGT = {	AMD_E_SETA_RV = yes	}
					AMD_E_SETA_RA = yes
				}
				clr_character_flag = AMD_CF_PCR
				event_target:AMD_ET_TGT = {	AMD_E_SETA_ATK = yes	}
			}
			
		}
		else = {	AMD_E_SETA_RA = yes	event_target:AMD_ET_TGT = {	AMD_E_SETA_RV = yes	}	}
		if = {	#함락된 경우 화간으로 변경
			limit = {	#이하의 조건이 만족되지 않으면 강간.	(만족된 경우 화간이 된다)
				OR = {
					event_target:AMD_ET_TGT = {	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 5	}	}
					event_target:AMD_ET_TGT = {	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 5	}	}
					event_target:AMD_ET_TGT = {	has_opinion_modifier = {	who = event_target:AMD_ET_POV	modifier = opinion_the_chosen_one	}	}
					event_target:AMD_ET_TGT = {	has_opinion_modifier = {	who = event_target:AMD_ET_POV	modifier = opinion_loyal_servant	}	}
					event_target:AMD_ET_TGT = {	has_opinion_modifier = {	who = event_target:AMD_ET_POV	modifier = AMD_opinion_obedient	}	}
				}
			}
			clear_event_target = AMD_ET_RA
			clear_event_target = AMD_ET_RV
		}
		AMD_E_SET_RAPED_KIN_OPINION = yes
		event_target:AMD_ET_TGT = {
			AMD_E_SETA_F_VISIT_PRISONER = yes
			AMD_E_SET_AD_WITH_PREV = yes
			AMD_E_2P_SCORING_1 = yes
			AMD_E_SLAVE_SCORING = yes
			letter_event = {	id = AMD_PLAY_PING.1123		}
		}
	}
	option = {	name = AMD_EV_OPT_22040_3	#성고문
		random_list = {
			1 = {	custom_tooltip = {	text = AMD_EV_TT_22040_3_gangbang	}	#윤간
				hidden_tooltip = {
					event_target:AMD_ET_TGT = {
						AMD_E_SETA_OH = yes
						AMD_E_SETA_RV = yes
						if = {	limit = {	is_female = no	}	AMD_E_SETA_STF_GAY = yes	}
						AMD_E_SETA_F_VISIT_PRISONER = yes
						AMD_E_MP_SCORING = yes
						AMD_E_SLAVE_SCORING = yes
						letter_event = {	id = AMD_PLAY_PING.1124	}
					}
				}
			}
			33 = {	custom_tooltip = {	text = AMD_EV_TT_22040_3_horse	}	#마간
				modifier = {	factor = 0	NOT = {	event_target:AMD_ET_PRISON_HORSE = {	always = yes	}	}	}
				hidden_tooltip = {
					event_target:AMD_ET_PRISON_HORSE = {	AMD_E_SETA_ATK = yes	AMD_E_SETA_RA = yes	}
					event_target:AMD_ET_TGT = {	AMD_E_SETA_DEF = yes	AMD_E_SETA_RV = yes
						AMD_E_SETA_F_VISIT_PRISONER = yes
						AMD_E_2P_SCORING_1 = yes
						AMD_E_SLAVE_SCORING = yes
						letter_event = {	id = AMD_PLAY_PING.1122	}
					}
				}
			}
			33 = {	custom_tooltip = {	text = AMD_EV_TT_22040_3_bear	}	#웅간
				modifier = {	factor = 0	NOT = {	event_target:AMD_ET_PRISON_BEAR = {	always = yes	}	}	}
				hidden_tooltip = {
					event_target:AMD_ET_PRISON_BEAR = {	AMD_E_SETA_ATK = yes	AMD_E_SETA_RA = yes	}
					event_target:AMD_ET_TGT = {	AMD_E_SETA_DEF = yes	AMD_E_SETA_RV = yes
						AMD_E_SETA_F_VISIT_PRISONER = yes
						AMD_E_2P_SCORING_1 = yes
						AMD_E_SLAVE_SCORING = yes
						letter_event = {	id = AMD_PLAY_PING.1122	}
					}
				}
				
			}
			33 = {	custom_tooltip = {	text = AMD_EV_TT_22040_3_cat	}	#묘간
				modifier = {	factor = 0	NOT = {	trait = lunatic	}	}
				modifier = {	factor = 0	NOT = {	event_target:AMD_ET_PRISON_CAT = {	always = yes	}	}	}
				hidden_tooltip = {
					event_target:AMD_ET_PRISON_CAT = {	AMD_E_SETA_ATK = yes	AMD_E_SETA_RA = yes	}
					event_target:AMD_ET_TGT = {	AMD_E_SETA_DEF = yes	AMD_E_SETA_RV = yes
						AMD_E_SETA_F_VISIT_PRISONER = yes
						AMD_E_2P_SCORING_1 = yes
						AMD_E_SLAVE_SCORING = yes
						letter_event = {	id = AMD_PLAY_PING.1122	}
					}
				}
				
			}
		}
	}
		option = {	name = AMD_EV_OPT_22010_4	#오늘은 이만 물러가주지
		hidden_tooltip = {	AMD_E_END_CHAIN = yes	}
	}
}
character_event = {	id = AMD.22090		#		협상 메뉴 선택
	is_triggered_only = yes
	picture = GFX_evt_into_the_dungeon
	desc = AMD_EV_DESC_22090
	immediate = {
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
	}
	option = {	name = AMD_EV_OPT_22090_1		#전재산을 내놔라
		trigger = {		#자기 작위 수준보다 높은 돈을 가지고 있어야함
			event_target:AMD_ET_TGT = {
				OR = {
					AND = {	is_ruler = no	wealth = 11	}
					AND = {	is_ruler = yes	primary_title = {	tier = baron	}	wealth = 10	}
					AND = {	is_ruler = yes	primary_title = {	tier = count	}	wealth = 30	}
					AND = {	is_ruler = yes	primary_title = {	tier = duke	}	wealth = 60	}
					AND = {	is_ruler = yes	primary_title = {	tier = king	}	wealth = 120	}
					AND = {	is_ruler = yes	primary_title = {	tier = emperor	}	wealth = 200	}
					wealth = 1	#임시. 일단 한푼이라도 있다면 선택지 출현.
				}
			}
		}
		event_target:AMD_ET_TGT = {
			random_list = {
				100 = {	#	성공 : 돈 드리겠습니다
					custom_tooltip = {	text = AMD_EV_TT_22090_1	}
					hidden_tooltip = {	character_event = {	id = AMD_PING.22091	}	}
					
					modifier = {	factor = 0.9	wealth = 100	}
					modifier = {	factor = 0.9	wealth = 300	}
					modifier = {	factor = 0.9	wealth = 500	}
					modifier = {	factor = 0.9	wealth = 700	}
					modifier = {	factor = 0.8	wealth = 1000	}
					modifier = {	factor = 0.8	wealth = 3000	}
					modifier = {	factor = 0.8	wealth = 5000	}
					modifier = {	factor = 0.7	wealth = 7000	}
					modifier = {	factor = 0.7	wealth = 9999	}
					modifier = {	factor = 1.5	is_ruler = yes	}
					modifier = {	factor = 0.5	trait = greedy	}
					modifier = {	factor = 2.0	trait = craven	}
					modifier = {	factor = 3.0	has_character_modifier = broken_spirit	}
					modifier = {	factor = 1.5	has_character_modifier = AMD_CM_slave_lust	}
					modifier = {	factor = 1.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 2	}	}
					modifier = {	factor = 1.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 3	}	}
					modifier = {	factor = 1.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 4	}	}
					modifier = {	factor = 1.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 5	}	}
					modifier = {	factor = 2.0	has_character_modifier = AMD_CM_slave_fear	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 2	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 3	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 4	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 5	}	}
					
					modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_bad_poetry }	}
					modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_tortured_me }	}
					modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_humiliated_me }	}
					modifier = {	factor = 3.0	has_opinion_modifier = { who = ROOT  modifier = opinion_mutilated_me }	}
					modifier = {	factor = 1.5	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_raped_me }	}
					
					
					modifier = {	factor = 1.1	personal_opinion = {	who = ROOT	value = 20	}	}
					modifier = {	factor = 1.2	personal_opinion = {	who = ROOT	value = 40	}	}
					modifier = {	factor = 1.3	personal_opinion = {	who = ROOT	value = 60	}	}
					modifier = {	factor = 1.4	personal_opinion = {	who = ROOT	value = 80	}	}
					modifier = {	factor = 1.5	personal_opinion = {	who = ROOT	value = 99	}	}
					
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	stewardship = 12	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	stewardship = 18	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	stewardship = 24	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 12	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 18	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 24	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	intrigue = 12	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	intrigue = 18	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	intrigue = 24	}	}
					
					
				}
				300 = {	#	실패 : 실패 이벤트로 이동
					custom_tooltip = {	text = AMD_EV_TT_22015_REFUSE	}
					hidden_tooltip = {	character_event = {	id = AMD_PING.22099	}	}
					modifier = {	factor = 2.0	is_rival = ROOT	}
					modifier = {	factor = 3.0	has_character_modifier = AMD_CM_slave_hate	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 2	}	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 3	}	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 4	}	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 5	}	}
					modifier = {	factor = 0.5	has_character_modifier = AMD_CM_slave_obey	}
					modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 2	}	}
					modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 3	}	}
					modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 4	}	}
					modifier = {	factor = 0.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 5	}	}
					modifier = {	factor = 0.0	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_obedient }	}
					modifier = {	factor = 0.0	has_opinion_modifier = { who = ROOT  modifier = opinion_loyal_servant }	}
					modifier = {	factor = 0.0	has_opinion_modifier = { who = ROOT  modifier = opinion_the_chosen_one }	}
					#modifier = {	factor = 3.0	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_had_first_sex }	}
				}
			}
		}
	}
	option = {	name = AMD_EV_OPT_22090_2		#충성 요구
		trigger = {		#이미 내 신하면 안되고, 낮은 티어 독립영주 또는 일반 가신이어야 함.
			event_target:AMD_ET_TGT = {
				NOT = {	employer = {	character = ROOT	}	any_liege = {	character = ROOT	}	}
				OR = {		#나보다 낮은 티어의 독립영주 또는 일반가신이어야 함.
					is_ruler = no
					AND = {	independent = yes	lower_tier_than = ROOT	}
				}
			}
		}
		event_target:AMD_ET_TGT = {
			random_list = {
				100 = {	#	성공 : 충성을 다하겠습니다
					custom_tooltip = {	text = AMD_EV_TT_22015_ACCEPT	}	hidden_tooltip = {	character_event = {	id = AMD_PING.22092	}	}
					modifier = {	factor = 2.0	is_ruler = no	}
					modifier = {	factor = 0.9	tier = count	}
					modifier = {	factor = 0.7	tier = duke	}
					modifier = {	factor = 0.5	tier = king	}
					modifier = {	factor = 0.5	trait = ambitious	}
					modifier = {	factor = 0.5	trait = proud	}
					modifier = {	factor = 2.0	trait = craven	}
					modifier = {	factor = 2.0	trait = content	}
					modifier = {	factor = 3.0	has_character_modifier = broken_spirit	}
					modifier = {	factor = 2.0	has_character_modifier = AMD_CM_slave_lust	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 2	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 3	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 4	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 5	}	}
					modifier = {	factor = 2.0	has_character_modifier = AMD_CM_slave_fear	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 2	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 3	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 4	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 5	}	}
					
					modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_bad_poetry }	}
					modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_tortured_me }	}
					modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_humiliated_me }	}
					modifier = {	factor = 3.0	has_opinion_modifier = { who = ROOT  modifier = opinion_mutilated_me }	}
					modifier = {	factor = 1.5	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_raped_me }	}
					
					modifier = {	factor = 1.1	personal_opinion = {	who = ROOT	value = 20	}	}
					modifier = {	factor = 1.2	personal_opinion = {	who = ROOT	value = 40	}	}
					modifier = {	factor = 1.3	personal_opinion = {	who = ROOT	value = 60	}	}
					modifier = {	factor = 1.4	personal_opinion = {	who = ROOT	value = 80	}	}
					modifier = {	factor = 1.5	personal_opinion = {	who = ROOT	value = 99	}	}
					modifier = {	factor = 2.5	is_lover = ROOT	}
					
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	realm_size = 100	}	}
					modifier = {	factor = 1.3	event_target:AMD_ET_POV = {	realm_size = 300	}	}
					modifier = {	factor = 1.5	event_target:AMD_ET_POV = {	realm_size = 500	}	}
					modifier = {	factor = 1.7	event_target:AMD_ET_POV = {	realm_size = 700	}	}
					modifier = {	factor = 1.9	event_target:AMD_ET_POV = {	realm_size = 999	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	prestige = 1000	}	}
					modifier = {	factor = 1.3	event_target:AMD_ET_POV = {	prestige = 3000	}	}
					modifier = {	factor = 1.5	event_target:AMD_ET_POV = {	prestige = 5000	}	}
					modifier = {	factor = 1.7	event_target:AMD_ET_POV = {	prestige = 7000	}	}
					modifier = {	factor = 1.9	event_target:AMD_ET_POV = {	prestige = 9999	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 12	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 18	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 24	}	}
				}
				500 = {	#	실패 : 실패 이벤트로 이동
					custom_tooltip = {	text = AMD_EV_TT_22015_REFUSE	}
					hidden_tooltip = {	character_event = {	id = AMD_PING.22099	}	}
					modifier = {	factor = 2.0	is_rival = ROOT	}
					modifier = {	factor = 3.0	has_character_modifier = AMD_CM_slave_hate	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 2	}	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 3	}	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 4	}	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 5	}	}
					modifier = {	factor = 0.5	has_character_modifier = AMD_CM_slave_obey	}
					modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 2	}	}
					modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 3	}	}
					modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 4	}	}
					modifier = {	factor = 0.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 5	}	}
					modifier = {	factor = 0.0	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_obedient }	}
					modifier = {	factor = 0.0	has_opinion_modifier = { who = ROOT  modifier = opinion_loyal_servant }	}
					modifier = {	factor = 0.9	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_had_first_sex }	}
				}
			}
		}
	}
	option = {	name = AMD_EV_OPT_22090_3		#클레임
		trigger = {
			event_target:AMD_ET_TGT = {
				OR = {	is_ruler = yes	num_of_claims = 1	}
			}
		}
		event_target:AMD_ET_TGT = {
			random_list = {
				100 = {	#	성공 : 클레임 드리겠습니다
					custom_tooltip = {	text = AMD_EV_TT_22015_ACCEPT	}
					hidden_tooltip = {	character_event = {	id = AMD_PING.22093	}	}
					
					modifier = {	factor = 0.9	tier = count	}
					modifier = {	factor = 0.7	tier = duke	}
					modifier = {	factor = 0.5	tier = king	}
					modifier = {	factor = 0.5	trait = ambitious	}
					modifier = {	factor = 0.5	trait = proud	}
					modifier = {	factor = 2.0	trait = craven	}
					modifier = {	factor = 2.0	trait = content	}
					modifier = {	factor = 3.0	has_character_modifier = broken_spirit	}
					modifier = {	factor = 2.0	has_character_modifier = AMD_CM_slave_lust	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 2	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 3	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 4	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 5	}	}
					modifier = {	factor = 2.0	has_character_modifier = AMD_CM_slave_fear	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 2	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 3	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 4	}	}
					modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 5	}	}
					
					modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_bad_poetry }	}
					modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_tortured_me }	}
					modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_humiliated_me }	}
					modifier = {	factor = 3.0	has_opinion_modifier = { who = ROOT  modifier = opinion_mutilated_me }	}
					modifier = {	factor = 1.5	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_raped_me }	}
					
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	intrigue = 12	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	intrigue = 18	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	intrigue = 24	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 12	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 18	}	}
					modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 24	}	}
				}
				400 = {	#	실패 : 실패 이벤트로 이동
					custom_tooltip = {	text = AMD_EV_TT_22015_REFUSE	}
					hidden_tooltip = {	character_event = {	id = AMD_PING.22099	}	}
					modifier = {	factor = 2.0	is_rival = ROOT	}
					modifier = {	factor = 3.0	has_character_modifier = AMD_CM_slave_hate	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 2	}	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 3	}	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 4	}	}
					modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 5	}	}
					modifier = {	factor = 0.5	has_character_modifier = AMD_CM_slave_obey	}
					modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 2	}	}
					modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 3	}	}
					modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 4	}	}
					modifier = {	factor = 0.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 5	}	}
					modifier = {	factor = 0.0	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_obedient }	}
					modifier = {	factor = 0.0	has_opinion_modifier = { who = ROOT  modifier = opinion_loyal_servant }	}
					modifier = {	factor = 0.0	has_opinion_modifier = { who = ROOT  modifier = opinion_the_chosen_one }	}
					#modifier = {	factor = 3.0	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_had_first_sex }	}
				}
			}
		}
	}
	option = {	name = AMD_EV_OPT_22090_4		#노예화 요구
		trigger = {		#호감도 100, 굴복 또는 음란을 일정 수준 이상 요구
			event_target:AMD_ET_TGT = {
				opinion = {	who = ROOT	value = 50	}
				#NOT = {	has_opinion_modifier = {	who = ROOT  modifier = opinion_loyal_servant	}	}
				NOT = {	has_opinion_modifier = {	who = ROOT  modifier = AMD_opinion_obedient	}	}
				OR = {
					has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 4	}
					has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 4	}
					AND = {
						has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 2	}
						has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 2	}
					}
				}
			}
		}
		random_list = {
			100 = {	#	성공 : 충성을 다하겠습니다
				custom_tooltip = {	text = AMD_EV_TT_22015_ACCEPT	}	hidden_tooltip = {	character_event = {	id = AMD_PING.22094	}	}
				modifier = {	factor = 1.5	is_ruler = no	}
				modifier = {	factor = 0.9	tier = count	}
				modifier = {	factor = 0.7	tier = duke	}
				modifier = {	factor = 0.5	tier = king	}
				modifier = {	factor = 0.5	trait = ambitious	}
				modifier = {	factor = 0.5	trait = proud	}
				modifier = {	factor = 2.0	trait = craven	}
				modifier = {	factor = 2.0	trait = content	}
				modifier = {	factor = 3.0	has_character_modifier = broken_spirit	}
				modifier = {	factor = 2.0	has_character_modifier = AMD_CM_slave_lust	}
				modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 2	}	}
				modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 3	}	}
				modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 4	}	}
				modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_lust	amount = 5	}	}
				modifier = {	factor = 2.0	has_character_modifier = AMD_CM_slave_fear	}
				modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 2	}	}
				modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 3	}	}
				modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 4	}	}
				modifier = {	factor = 2.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 5	}	}
				
				modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_bad_poetry }	}
				modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_tortured_me }	}
				modifier = {	factor = 2.0	has_opinion_modifier = { who = ROOT  modifier = opinion_humiliated_me }	}
				modifier = {	factor = 3.0	has_opinion_modifier = { who = ROOT  modifier = opinion_mutilated_me }	}
				modifier = {	factor = 1.5	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_raped_me }	}
				
				modifier = {	factor = 1.1	personal_opinion = {	who = ROOT	value = 20	}	}
				modifier = {	factor = 1.2	personal_opinion = {	who = ROOT	value = 40	}	}
				modifier = {	factor = 1.3	personal_opinion = {	who = ROOT	value = 60	}	}
				modifier = {	factor = 1.4	personal_opinion = {	who = ROOT	value = 80	}	}
				modifier = {	factor = 1.5	personal_opinion = {	who = ROOT	value = 99	}	}
				modifier = {	factor = 2.5	is_lover = ROOT	}
				
				modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	realm_size = 100	}	}
				modifier = {	factor = 1.3	event_target:AMD_ET_POV = {	realm_size = 300	}	}
				modifier = {	factor = 1.5	event_target:AMD_ET_POV = {	realm_size = 500	}	}
				modifier = {	factor = 1.7	event_target:AMD_ET_POV = {	realm_size = 700	}	}
				modifier = {	factor = 1.9	event_target:AMD_ET_POV = {	realm_size = 999	}	}
				modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	prestige = 1000	}	}
				modifier = {	factor = 1.3	event_target:AMD_ET_POV = {	prestige = 3000	}	}
				modifier = {	factor = 1.5	event_target:AMD_ET_POV = {	prestige = 5000	}	}
				modifier = {	factor = 1.7	event_target:AMD_ET_POV = {	prestige = 7000	}	}
				modifier = {	factor = 1.9	event_target:AMD_ET_POV = {	prestige = 9999	}	}
				modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 12	}	}
				modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 18	}	}
				modifier = {	factor = 1.1	event_target:AMD_ET_POV = {	diplomacy = 24	}	}
			}
			700 = {	#	실패 : 실패 이벤트로 이동
				custom_tooltip = {	text = AMD_EV_TT_22015_REFUSE	}
				hidden_tooltip = {	character_event = {	id = AMD_PING.22099	}	}
				modifier = {	factor = 3.0	is_rival = ROOT	}
				modifier = {	factor = 3.0	has_character_modifier = AMD_CM_slave_hate	}
				modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 2	}	}
				modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 3	}	}
				modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 4	}	}
				modifier = {	factor = 3.0	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_hate	amount = 5	}	}
				
				modifier = {	factor = 0.5	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 3	}	}
				modifier = {	factor = 0.3	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 4	}	}
				modifier = {	factor = 0.1	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 5	}	}
				modifier = {	factor = 0.8	has_opinion_modifier = { who = ROOT  modifier = AMD_opinion_had_first_sex }	}
			}
		}
	}
	option = {	name = AMD_EV_OPT_22010_4	#오늘은 이만 물러가주지
		hidden_tooltip = {
			event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
			AMD_E_END_CHAIN = yes
		}
	}
}
character_event = {	id = AMD.22091		#			성공 : 돈
	is_triggered_only = yes
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	immediate = {
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
	}
	desc = AMD_EV_DESC_22091
	
	option = {	name = AMD_EV_OPT_22099_9	#전재산을 받고 풀어줌
		event_target:AMD_ET_TGT = {
			transfer_scaled_wealth = {	to = ROOT	value = all	}
			if = {	#복종상태가 아니라면 강력한 관계도 페널티
				limit = {
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = opinion_the_chosen_one	}	}
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = opinion_loyal_servant	}	}
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = AMD_opinion_obedient	}	}
				}
				opinion = {	who = ROOT	modifier = opinion_thief	years = 30	}
			}
			hidden_tooltip = {	clear_wealth = yes	}
			prisoner = no
		}
	}
	after = {
		event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_1m = yes	}
		AMD_E_ACM_COOLDOWN_1m = yes
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.22092		#			성공 : 봉신화
	is_triggered_only = yes
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	immediate = {
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
	}
	desc = AMD_EV_DESC_22092
	option = {	name = AMD_EV_OPT_22092_1	#영주 - 봉신화
		trigger = {	event_target:AMD_ET_TGT = {	is_ruler = yes	}	}
		event_target:AMD_ET_TGT = {
			set_defacto_liege = ROOT
			if = {	limit = {	is_rival = ROOT	}	remove_rival = ROOT	}
			if = {
				limit = {
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = opinion_loyal_servant	}	}
					has_instances_of_character_modifier = {	modifier = AMD_CM_slave_obey	amount = 2	}
				}
				opinion = {	who = ROOT	modifier = opinion_loyal_servant	years = 10	}
			}
			else = {	opinion = {	who = ROOT	modifier = opinion_subjugated	}	}
			prisoner = no
		}
	}
	option = {	name = AMD_EV_OPT_22092_1	#영주아님 - 가신화
		trigger = {	event_target:AMD_ET_TGT = {	is_ruler = no	}	}
		event_target:AMD_ET_TGT = {
			if = {	limit = {	is_rival = ROOT	}	remove_rival = ROOT	}
			if = {
				limit = {
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = opinion_loyal_servant	}	}
					has_character_modifier = AMD_CM_slave_obey
				}
				opinion = {	who = ROOT	modifier = opinion_loyal_servant	years = 20	}
			}
			else = {	opinion = {	who = ROOT	modifier = opinion_subjugated	}	}
			move_character = ROOT
			prisoner = no
		}
	}
	after = {
		event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_1m = yes	}
		AMD_E_ACM_COOLDOWN_1m = yes
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.22093		#			성공 : 클레임
	is_triggered_only = yes
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	immediate = {
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
	}
	desc = AMD_EV_DESC_22093
	option = {	name = AMD_EV_OPT_22093_1	#클레임 날조
		trigger = {	event_target:AMD_ET_TGT = {	is_ruler = yes	}	}
		event_target:AMD_ET_TGT = {
			random_demesne_title = {
				limit = {	controls_religion = no	temporary = no	NOT = {	claimed_by = ROOT	}	}
				add_claim = ROOT
			}
			if = {	#공포 3단 이상일시 가진 클레임도 포기
				limit = {	has_instances_of_character_modifier = {	modifier = AMD_CM_slave_fear	amount = 3	}	}
				any_claim = {	remove_claim = event_target:AMD_ET_TGT	}
			}
			
			if = {	#복종상태가 아니라면 강력한 관계도 페널티
				limit = {
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = opinion_the_chosen_one	}	}
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = opinion_loyal_servant	}	}
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = AMD_opinion_obedient	}	}
				}
				opinion = {	who = ROOT	modifier = opinion_revoked_my_title	years = 50	}
			}
			prisoner = no
		}
	
	}
	option = {	name = AMD_EV_OPT_22093_2	#클레임 포기
		trigger = {	event_target:AMD_ET_TGT = {	is_ruler = no	}	}
		event_target:AMD_ET_TGT = {
			any_claim = {	remove_claim = event_target:AMD_ET_TGT	}
			if = {	#복종상태가 아니라면 강력한 관계도 페널티
				limit = {
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = opinion_the_chosen_one	}	}
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = opinion_loyal_servant	}	}
					NOT = {	has_opinion_modifier = {	who = ROOT  modifier = AMD_opinion_obedient	}	}
				}
				opinion = {	who = ROOT	modifier = opinion_revoked_my_title	years = 30	}
			}
			prisoner = no
		}
	}
	after = {
		event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_1m = yes	}
		AMD_E_ACM_COOLDOWN_1m = yes
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.22094		#			성공 : 노예화
	is_triggered_only = yes
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	immediate = {
		event_target:AMD_ET_TGT = {	if = {	limit = {	prisoner = no	}	imprison = ROOT	}	}
	}
	desc = AMD_EV_DESC_22094
	
	option = {	name = AMD_EV_OPT_22094_1	#하위영주 - 봉신화
		trigger = {	event_target:AMD_ET_TGT = {	is_ruler = yes	lower_tier_than = ROOT	}	}
		custom_tooltip = {	text = AMD_EV_TT_22094_1	}
		event_target:AMD_ET_TGT = {
			if = {	limit = {	is_rival = ROOT	}	remove_rival = ROOT	}
			if = {
				limit = {
					has_character_modifier = AMD_CM_slave_lust
					opinion = {	who = ROOT	value = 50	}
					NOT = {	is_lover = ROOT	}
					OR = {
						is_opposite_sex = ROOT
						AND = {	same_sex = ROOT	trait = homosexual	event_target:AMD_ET_POV = {	trait = homosexual	}	}
					}
				}
				add_lover = ROOT
			}
			set_defacto_liege = ROOT
			hidden_tooltip = {	reverse_opinion = {	modifier = AMD_opinion_to_slave	years = 9999	who = ROOT	}	}
			opinion = {	modifier = AMD_opinion_obedient	years = 9999	who = ROOT	}
			prisoner = no
			#AMD_E_ACM_LUSTFUL_WASTED = yes
		}
	}
	option = {	name = AMD_EV_OPT_22094_2	#영주 - 퇴위 후 가신화, 모든 클레임
		trigger = {	event_target:AMD_ET_TGT = {	is_ruler = yes	}	}
		custom_tooltip = {	text = AMD_EV_TT_22094_2	}
		event_target:AMD_ET_TGT = {
			if = {	limit = {	is_rival = ROOT	}	remove_rival = ROOT	}
			hidden_tooltip = {
				any_demesne_title = {
					limit = {	controls_religion = no	temporary = no	NOT = {	claimed_by = ROOT	}	}
					add_claim = ROOT
				}
				reverse_opinion = {	modifier = AMD_opinion_to_slave	years = 9999	who = ROOT	}
			}
			if = {
				limit = {
					has_character_modifier = AMD_CM_slave_lust
					opinion = {	who = ROOT	value = 50	}
					NOT = {	is_lover = ROOT	}
					OR = {
						is_opposite_sex = ROOT
						AND = {	same_sex = ROOT	trait = homosexual	event_target:AMD_ET_POV = {	trait = homosexual	}	}
					}
				}
				add_lover = ROOT
			}
			abdicate = yes
			opinion = {	modifier = AMD_opinion_obedient	years = 9999	who = ROOT	}
			prisoner = no
			#AMD_E_ACM_LUSTFUL_WASTED = yes
			hidden_tooltip = {
				any_claim = {	remove_claim = event_target:AMD_ET_TGT	}
				move_character = ROOT
			}
		}
	}
	option = {	name = AMD_EV_OPT_22094_2	#영주아님 - 가신화
		trigger = {	event_target:AMD_ET_TGT = {	is_ruler = no	}	}
		event_target:AMD_ET_TGT = {
			if = {	limit = {	is_rival = ROOT	}	remove_rival = ROOT	}
			if = {
				limit = {
					has_character_modifier = AMD_CM_slave_lust
					opinion = {	who = ROOT	value = 50	}
					NOT = {	is_lover = ROOT	}
					OR = {
						is_opposite_sex = ROOT
						AND = {	same_sex = ROOT	trait = homosexual	event_target:AMD_ET_POV = {	trait = homosexual	}	}
					}
				}
				add_lover = ROOT
			}
			opinion = {	modifier = AMD_opinion_obedient	years = 9999	who = ROOT	}
			prisoner = no
			#AMD_E_ACM_LUSTFUL_WASTED = yes
			hidden_tooltip = {
				reverse_opinion = {	modifier = AMD_opinion_to_slave	years = 9999	who = ROOT	}
				move_character = ROOT
			}
		}
	}
	after = {
		event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_1m = yes	}
		AMD_E_ACM_COOLDOWN_1m = yes
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.22099		#			실패
	is_triggered_only = yes
	picture = GFX_evt_into_the_dungeon
	desc = AMD_EV_DESC_22099
	option = {	name = AMD_EV_OPT_22010_4
		hidden_tooltip = {
			random_list = {
				40 = {	AMD_E_RCM_SLAVE_FEAR = yes	}
				30 = {	AMD_E_RCM_SLAVE_FEAR = yes	random = {	chance = 50	AMD_E_RCM_SLAVE_FEAR = yes	}	}
				20 = {	AMD_E_ACM_SLAVE_HATE = yes	}
				10 = {	AMD_E_ACM_SLAVE_HATE = yes	random = {	chance = 50	AMD_E_RCM_SLAVE_FEAR = yes	}	}
			}
			AMD_E_END_CHAIN = yes
		}
	}
}


#	24000~24999	기술향상
character_event = {	id = AMD.24000		#섹터디 결심
	#desc = AMD_EV_DESC_24000_2
	picture = GFX_evt_whispers
	desc = {	trigger = {	trait = AMD_sex_skill_1	}	text = AMD_EV_DESC_24000_1	picture = GFX_evt_bad_news	}
	desc = {	trigger = {	trait = AMD_sex_skill_2	}	text = AMD_EV_DESC_24000_2	picture = GFX_AMD_BEDROOM1	}
	desc = {	trigger = {	trait = AMD_sex_skill_3	}	text = AMD_EV_DESC_24000_3	picture = GFX_AMD_YOGA0	}
	desc = {	trigger = {	trait = AMD_sex_skill_4	}	text = AMD_EV_DESC_24000_4	picture = GFX_AMD_YOGA1	}
	is_triggered_only = yes
	option = {	name = AMD_EV_OPT_24000_1	#한다
		ai_chance = {	factor = 0	}
		add_character_modifier = {	name = AMD_CM_sex_study	duration = -1	}
		prestige = 1
	}
	option = {	name = AMD_EV_OPT_24000_2	#필요 없어!
		ai_chance = {	factor = 100	}
	}
}
character_event = {	id = AMD.24001		#	섹터디 매년 실행판정
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AMD_T_HCM_SEX_STUDY = yes
	}
	immediate = {
		if = {	limit = {	OR = {	trait = celibate	trait = eunuch	trait = AMD_sex_skill_5	}	}	#스킬 5단, 독신주의, 고자인 경우 연구 중단. 그 외의 경우 진행.
			character_event = {	id = AMD.24099	}
		}
		else = {
			if = {	limit = {	AMD_T_NOT_BUSY = yes	}
				random_list = {
					100 = {	character_event = {	id = AMD.24002	}	#책
						modifier = {	factor = 1.5	trait = erudite	}
						modifier = {	factor = 1.5	trait = scholar	}
					}
					100 = {	character_event = {	id = AMD.24003	}	#가십
					}
					100 = {	#궁정에서 묻다	24004
						modifier = {	factor = 1.5	trait = socializer	}
						modifier = {	factor = 1.5	trait = gregarious	}
						modifier = {	factor = 0	trait = shy	}
						modifier = {	factor = 0	NOT = {	any_courtier = {	OR = {	trait = hedonist	trait = lustful	trait = decadent	trait = seducer	trait = seductress	}	}	}	}
						random_courtier = {
							limit = {	OR = {	trait = hedonist	trait = lustful	trait = decadent	trait = seducer	trait = seductress	}	}
							character_event = {	id = AMD_PING.24004	}
						}
					}
					100 = {	character_event = {	id = AMD.24004	}	#창관방문
						modifier = {	factor = 1.5	trait = lustful	}
						modifier = {	factor = 1.5	trait = hedonist	}
						modifier = {	factor = 0	is_pregnant = yes	}
						modifier = {	factor = 0	AMD_T_HAS_BROTHEL = no	}
						modifier = {	factor = 0	always = yes	}
					}
				}
			}
		}
	}
}
character_event = {	id = AMD.24002		#		책	있으면 읽기, 없으면 구매.
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_AMD_TITLE
	desc = {	picture = GFX_evt_book_carolingian_script	text = AMD_EV_DESC_24002_1	trigger = {	AMD_T_HAS_SEX_STUDY_BOOK = yes	}	}
	desc = {	picture = GFX_evt_library	text = AMD_EV_DESC_24002_2	trigger = {	AMD_T_HAS_SEX_STUDY_BOOK = no	}	}
	option = {	name = AMD_EV_OPT_24002_1	trigger = {	AMD_T_HAS_SEX_STUDY_BOOK = yes	}		AMD_E_SEX_STUDY_CALC = yes	}
	option = {	name = AMD_EV_OPT_24000_1	trigger = {	AMD_T_HAS_SEX_STUDY_BOOK = no	}
		wealth = -100	add_artifact = AMD_lusty_armenian_maid	new_artifact = {	set_creation_date = 690.7.4	}
	}
}
character_event = {	id = AMD.24003		#		소문
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_evt_courtiers_talking
	immediate = {
		random_list = {
			10 = {	set_character_flag = AMD_CF_LOCAL_1	}
			10 = {	set_character_flag = AMD_CF_LOCAL_2	}
			10 = {	set_character_flag = AMD_CF_LOCAL_3	}
			10 = {	set_character_flag = AMD_CF_LOCAL_4	}
		}
	}
	desc = {	picture = GFX_evt_peasants	text = AMD_EV_DESC_24003_1	trigger = {	has_character_flag = AMD_CF_LOCAL_1	}	}
	desc = {	picture = GFX_evt_large_army	text = AMD_EV_DESC_24003_2	trigger = {	has_character_flag = AMD_CF_LOCAL_2	}	}
	desc = {	picture = GFX_evt_market	text = AMD_EV_DESC_24003_3	trigger = {	has_character_flag = AMD_CF_LOCAL_3	}	}
	desc = {	picture = GFX_evt_courtiers_talking	text = AMD_EV_DESC_24003_4	trigger = {	has_character_flag = AMD_CF_LOCAL_4	}	}
	option = {	name = AMD_EV_OPT_24003_1	AMD_E_SEX_STUDY_CALC = yes	}
	after = {
		hidden_tooltip = {
			clr_character_flag = AMD_CF_LOCAL_1
			clr_character_flag = AMD_CF_LOCAL_2
			clr_character_flag = AMD_CF_LOCAL_3
			clr_character_flag = AMD_CF_LOCAL_4
		}
	}
}
character_event = {	id = AMD.24004		#		가신과 대화
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_evt_courtiers_talking
	immediate = {	#상대가 나보다 스킬이 낮은 경우, 도움이 안됨.
		if = {
			limit = {
				OR = {
					AND = {	trait = AMD_sex_skill_4	FROM = {	AMD_T_SKILL_UNDER_4 = yes	}	}
					AND = {	trait = AMD_sex_skill_3	FROM = {	AMD_T_SKILL_UNDER_3 = yes	}	}
					AND = {	trait = AMD_sex_skill_2	FROM = {	trait = AMD_sex_skill_2	}	}
					FROM = {	trait = AMD_sex_skill_1	}
				}
			}
			set_character_flag = AMD_CF_SEX_STUDY_UNHELPFUL
		}
		else = {	set_character_flag = AMD_CF_SEX_STUDY_HELPFUL	}
	}
	desc = {	picture = GFX_evt_peasants	text = AMD_EV_DESC_24004_1	trigger = {	has_character_flag = AMD_CF_SEX_STUDY_UNHELPFUL	}	}
	desc = {	picture = GFX_evt_peasants	text = AMD_EV_DESC_24004_2	trigger = {	has_character_flag = AMD_CF_SEX_STUDY_HELPFUL	}	}
	
	option = {	name = AMD_EV_OPT_24004_1	trigger = {	has_character_flag = AMD_CF_SEX_STUDY_UNHELPFUL	}	prestige = 1
		opinion = {	who = FROM	modifier = opinion_impressed	}	reverse_opinion = {	who = FROM	modifier = opinion_pleased	}
	}
	option = {	name = AMD_EV_OPT_24004_2	trigger = {	has_character_flag = AMD_CF_SEX_STUDY_HELPFUL	}
		opinion = {	who = FROM	modifier = opinion_impressed	}	reverse_opinion = {	who = FROM	modifier = opinion_pleased	}
		AMD_E_SEX_STUDY_CALC = yes	
	}
	
	after = {
		clr_character_flag = AMD_CF_SEX_STUDY_UNHELPFUL
		clr_character_flag = AMD_CF_SEX_STUDY_HELPFUL
	}
}

character_event = {	id = AMD.24009		#	스킬 레벨 업!
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_AMD_TITLE
	desc = {	picture = GFX_AMD_YOGA0	text = AMD_EV_DESC_24009_1	trigger = {	trait = AMD_sex_skill_1	}	}
	desc = {	picture = GFX_AMD_YOGA0	text = AMD_EV_DESC_24009_2	trigger = {	trait = AMD_sex_skill_2	}	}
	desc = {	picture = GFX_AMD_YOGA1	text = AMD_EV_DESC_24009_3	trigger = {	trait = AMD_sex_skill_3	}	}
	desc = {	picture = GFX_AMD_YOGA2	text = AMD_EV_DESC_24009_4	trigger = {	trait = AMD_sex_skill_4	}	}
	option = {	name = AMD_EV_OPT_10025_2	trigger = {	trait = AMD_sex_skill_1	}	hidden_tooltip = {	remove_trait = AMD_sex_skill_1	}	add_trait = AMD_sex_skill_2	}
	option = {	name = AMD_EV_OPT_10025_3	trigger = {	trait = AMD_sex_skill_2	}	hidden_tooltip = {	remove_trait = AMD_sex_skill_2	}	add_trait = AMD_sex_skill_3	}
	option = {	name = AMD_EV_OPT_10025_4	trigger = {	trait = AMD_sex_skill_3	}	hidden_tooltip = {	remove_trait = AMD_sex_skill_3	}	add_trait = AMD_sex_skill_4	}
	option = {	name = AMD_EV_OPT_10025_5	trigger = {	trait = AMD_sex_skill_4	}	hidden_tooltip = {	remove_trait = AMD_sex_skill_4	}	add_trait = AMD_sex_skill_5	remove_character_modifier = AMD_CM_sex_study	}
	after = {
		remove_character_modifier = AMD_CM_xp_skill
	}
}
character_event = {	id = AMD.24099		#	수련 중단
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_AMD_TITLE
	#desc = AMD_EV_DESC_24099_0
	immediate = {
		#중단 사유에 따라...?
	}
	desc = {	picture = GFX_evt_recovery	text = AMD_EV_DESC_24099_1	trigger = {	AMD_T_IS_DOABLE_AGE = no	}	}
	desc = {	picture = GFX_evt_recovery	text = AMD_EV_DESC_24099_1	trigger = {	trait = eunuch	}	}
	desc = {	picture = GFX_evt_monk	text = AMD_EV_DESC_24099_2	trigger = {	trait = celibate	}	}
	#desc = {	picture = GFX_evt_monk	text = AMD_EV_DESC_24099_2	trigger = {	has_character_flag = AMD_CF_UNFUCKABLE	}	}
	desc = {	picture = GFX_AMD_YOGA2	text = AMD_EV_DESC_24099_3	trigger = {	trait = AMD_sex_skill_5	}	}
	option = {	name = AMD_EV_OPT_OK	remove_character_modifier = AMD_CM_sex_study	}
	after = {
		remove_character_modifier = AMD_CM_xp_skill
	}
}


#	25000 ~ 25999	연금술 관련
character_event = {	id = AMD.25000		#약쟁이 탐색
	desc = AMD_EV_DESC_25000
	picture = GFX_evt_scientist
	is_triggered_only = yes
	
	option = {	name = AMD_EV_OPT_25000_1	#한다
		ai_chance = {	factor = 0	}
		add_character_modifier = {	name = AMD_CM_alchemy_search	years = 3	}
		hidden_tooltip = {	#text = AMD_EV_TT_25000_1
			character_event = {	id = AMD.25001	months = 1	random = 30	}
		}
	}
	option = {	name = AMD_EV_OPT_25000_4	#헤르메스
		trigger = {	society_member_of = hermetics	}
		custom_tooltip = {	text = AMD_EV_TT_25000_4
			set_character_flag = AMD_CF_ALCHEMIST_HERMETIC
			character_event = {	id = AMD.25002	}
		}
	}
	option = {	name = AMD_EV_OPT_25000_5	#악마숭배
		trigger = {	is_devil_worshiper_trigger = yes	}
		custom_tooltip = {	text = AMD_EV_TT_25000_5
			set_character_flag = AMD_CF_ALCHEMIST_DEVIL
			character_event = {	id = AMD.25002	}
		}
	}
	
	option = {	name = AMD_EV_OPT_25000_0	#필요 없어!
		ai_chance = {	factor = 100	}
	}
	
	
}
character_event = {	id = AMD.25001			#약쟁이 랜덤리스트
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		clr_character_flag = AMD_CF_ALCHEMIST_MERURU
		clr_character_flag = AMD_CF_ALCHEMIST_MEDIC
		clr_character_flag = AMD_CF_ALCHEMIST_SHAMAN
		clr_character_flag = AMD_CF_ALCHEMIST_HERMETIC
		clr_character_flag = AMD_CF_ALCHEMIST_DEVIL
		clr_character_flag = AMD_CF_ALCHEMIST_XENO
		clr_character_flag = AMD_CF_ALCHEMIST_SYNTH
		#보고를 받아야 할 시점에 당신이 바쁘면 2개월 후 다시굴림... 폐기하고 그냥 띄우게 할까?
		if = {	limit = {	AMD_T_NOT_BUSY = yes	}
			random_list = {
				40 = {	set_character_flag = AMD_CF_ALCHEMIST_MERURU
					modifier = {	factor = 8.0	trait = gamer	}
				}
				20 = {	set_character_flag = AMD_CF_ALCHEMIST_MEDIC		#	modifier = {	factor = 0.0	always = yes	}
					modifier = {	factor = 0.0	NOT = {	trait = scholar	}	}
					#modifier = {	factor = 0.0	NOT = {	has_assigned_minor_title = title_court_physician	}	}
				}
				20 = {	set_character_flag = AMD_CF_ALCHEMIST_SHAMAN		#	modifier = {	factor = 0.0	always = yes	}
					modifier = {	factor = 0.0	NOT = {	trait = mystic	}	}
				}
				20 = {	set_character_flag = AMD_CF_ALCHEMIST_HERMETIC
					modifier = {	factor = 0.0	NOT = {	society_member_of = hermetics	}	}
				}
				20 = {	set_character_flag = AMD_CF_ALCHEMIST_DEVIL
					modifier = {	factor = 0.0	NOT = {	is_devil_worshiper_trigger = yes	}	}
				}
				1 = {	#우주
					modifier = {	factor = 100	has_global_flag = AMD_GF_DEBUG	}
					modifier = {	factor = 0.0	has_game_rule = {	name = supernatural_events	value = off	}	}
					modifier = {	factor = 5.0	has_artifact = necronomicon	}
					modifier = {	factor = 3.0	society_member_of = hermetics	}
					modifier = {	factor = 3.0	trait = lunatic	}
					modifier = {	factor = 3.0	trait = possessed	}
					modifier = {	factor = 3.0	trait = mystic	}
					modifier = {	factor = 3.0	trait = scholar	}
					modifier = {	factor = 2.0	has_character_modifier = studying_the_stars	}
					modifier = {	factor = 2.0	has_character_flag = owns_observatory_equipment	}
					modifier = {	factor = 2.0	has_character_modifier = weird_scholar	}
					modifier = {	factor = 2.0	has_character_modifier = heliocentrist_scholar	}
					random_list = {
						1 = {	set_character_flag = AMD_CF_ALCHEMIST_XENO	}
						1 = {	set_character_flag = AMD_CF_ALCHEMIST_SYNTH	}
					}
				}
			}
			character_event = {	id = AMD.25002	}
		}
		else_if = {
			limit = {	has_character_modifier = AMD_CM_alchemy_search	}
			character_event = {	id = AMD.25002	months = 2	}
		}
	}
}
character_event = {	id = AMD.25002				#약쟁이 발견
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_AMD_ALCHEMY0
	desc = {	picture = GFX_AMD_XENO0	text = AMD_EV_DESC_25002_1	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_XENO	}	}
	desc = {	picture = GFX_AMD_SYNTH0	text = AMD_EV_DESC_25002_2	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_SYNTH	}	}
	desc = {	picture = GFX_AMD_MERURU0	text = AMD_EV_DESC_25002_3	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_MERURU	}	}
	desc = {	picture = GFX_AMD_ALCHEMY0	text = AMD_EV_DESC_25002_4	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_HERMETIC	}	}
	desc = {	picture = GFX_evt_scientist	text = AMD_EV_DESC_25002_5	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_MEDIC	}	}
	desc = {	picture = GFX_evt_ritual_scroll	text = AMD_EV_DESC_25002_6	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_DEVIL	}	}
	desc = {	picture = GFX_evt_ritual_scroll	text = AMD_EV_DESC_25002_7	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_SHAMAN	}	}
	
	option = {	name = AMD_EV_OPT_25002_1	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_XENO	}
		remove_character_modifier = AMD_CM_alchemy_search	add_character_modifier = {	name = AMD_CM_alchemy_xeno	duration = -1	}
	}
	option = {	name = AMD_EV_OPT_25002_2	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_SYNTH	}
		remove_character_modifier = AMD_CM_alchemy_search	add_character_modifier = {	name = AMD_CM_alchemy_synth	duration = -1	}
	}
	option = {	name = AMD_EV_OPT_25002_3	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_MERURU	}
		remove_character_modifier = AMD_CM_alchemy_search	add_character_modifier = {	name = AMD_CM_alchemy_meruru	duration = -1	}
	}
	option = {	name = AMD_EV_OPT_25002_4	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_HERMETIC	}
		remove_character_modifier = AMD_CM_alchemy_search	add_character_modifier = {	name = AMD_CM_alchemy_hermetic	duration = -1	}
	}
	option = {	name = AMD_EV_OPT_25002_5	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_MEDIC	}
		remove_character_modifier = AMD_CM_alchemy_search	add_character_modifier = {	name = AMD_CM_alchemy_medical	duration = -1	}
	}
	option = {	name = AMD_EV_OPT_25002_6	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_DEVIL	}
		remove_character_modifier = AMD_CM_alchemy_search	add_character_modifier = {	name = AMD_CM_alchemy_darkness	duration = -1	}
	}
	option = {	name = AMD_EV_OPT_25002_7	trigger = {	has_character_flag = AMD_CF_ALCHEMIST_SHAMAN	}
		remove_character_modifier = AMD_CM_alchemy_search	add_character_modifier = {	name = AMD_CM_alchemy_shaman	duration = -1	}
	}
	option = {	name = AMD_EV_OPT_25000_0	#필요 없어!
		ai_chance = {	factor = 100	}
		remove_character_modifier = AMD_CM_alchemy_search
	}
	after = {
		hidden_tooltip = {
			clr_character_flag = AMD_CF_ALCHEMIST_MERURU
			clr_character_flag = AMD_CF_ALCHEMIST_MEDIC
			clr_character_flag = AMD_CF_ALCHEMIST_SHAMAN
			clr_character_flag = AMD_CF_ALCHEMIST_HERMETIC
			clr_character_flag = AMD_CF_ALCHEMIST_DEVIL
			clr_character_flag = AMD_CF_ALCHEMIST_XENO
			clr_character_flag = AMD_CF_ALCHEMIST_SYNTH
		}
	}
}
#10	조제	20	사용	99	결사버프제거
character_event = {	id = AMD.25010		#약 생산	메챙
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_AMD_MERURU1
	desc = AMD_EV_DESC_25010
	
	option = {	name = AMD_EV_OPT_25010_1
		wealth = -200
		add_artifact = AMD_drug_aphrodisiac
		new_artifact = {	set_artifact_flag = AMD_AF_DRUG_MERURU	}
	}
	option = {	name = AMD_EV_OPT_25010_2
		wealth = -400
		add_artifact = AMD_drug_contraceptive
		new_artifact = {	set_artifact_flag = AMD_AF_DRUG_MERURU	}
	}
	option = {	name = AMD_EV_OPT_25010_3
		wealth = -400
		add_artifact = AMD_drug_fertilizer
		new_artifact = {	set_artifact_flag = AMD_AF_DRUG_MERURU	}
	}
	option = {	name = AMD_EV_OPT_25010_4
		wealth = -200
		add_artifact = AMD_drug_enlarger
		new_artifact = {	set_artifact_flag = AMD_AF_DRUG_MERURU	}
	}
	
	option = {	name = AMD_EV_OPT_25000_0	#필요 없어!
		ai_chance = {	factor = 100	}
	}
}
character_event = {	id = AMD.25011		#약 생산	제노
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_AMD_XENO0
	desc = AMD_EV_DESC_25011
	
	option = {	name = AMD_EV_OPT_25010_1
		add_artifact = AMD_drug_aphrodisiac
		hidden_tooltip = {
			new_artifact = {
				set_name = AMD_drug_aphrodisiac_xeno
				#set_description = AMD_drug_aphrodisiac_xeno
				set_artifact_flag = AMD_AF_DRUG_XENO
			}
		}
		random_demesne_province = {	add_province_modifier = {	name = AMD_CM_alchemy_xeno_work	years = 1	stacking = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25010_2
		add_artifact = AMD_drug_contraceptive
		hidden_tooltip = {
			new_artifact = {
				set_name = AMD_drug_contraceptive_xeno
				set_artifact_flag = AMD_AF_DRUG_XENO
			}
		}
		random_demesne_province = {	add_province_modifier = {	name = AMD_CM_alchemy_xeno_work	years = 1	stacking = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25010_3
		add_artifact = AMD_drug_fertilizer
		hidden_tooltip = {
			new_artifact = {
				set_name = AMD_drug_fertilizer_xeno
				set_artifact_flag = AMD_AF_DRUG_XENO
			}
		}
		random_demesne_province = {	add_province_modifier = {	name = AMD_CM_alchemy_xeno_work	years = 1	stacking = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25010_4
		add_artifact = AMD_drug_enlarger
		hidden_tooltip = {
			new_artifact = {
				set_name = AMD_drug_enlarger_xeno
				set_artifact_flag = AMD_AF_DRUG_XENO
			}
		}
		random_demesne_province = {	add_province_modifier = {	name = AMD_CM_alchemy_xeno_work	years = 1	stacking = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25000_0	#필요 없어!
		ai_chance = {	factor = 100	}
	}
}
character_event = {	id = AMD.25012		#약 생산	헤르메스/약사
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_AMD_ALCHEMY0
	desc = {	picture = GFX_AMD_ALCHEMY0	text = AMD_EV_DESC_25012_1	trigger = {	has_character_modifier = AMD_CM_alchemy_hermetic	}	}
	desc = {	picture = GFX_evt_scientist	text = AMD_EV_DESC_25012_2	trigger = {	has_character_modifier = AMD_CM_alchemy_medical	}	}
	immediate = {
		AMD_E_SETA_DOCTOR = yes
	}
	option = {	name = AMD_EV_OPT_25010_1
		if = {	limit = {	has_character_modifier = AMD_CM_alchemy_hermetic	}	detract_society_currency_tiny_effect = yes wealth = -50	}	else = {	wealth = -100	}
		AMD_E_ALCHEMY_WORK = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	add_artifact = AMD_drug_aphrodisiac	}
	}
	option = {	name = AMD_EV_OPT_25010_2
		if = {	limit = {	has_character_modifier = AMD_CM_alchemy_hermetic	}	detract_society_currency_minor_effect = yes wealth = -50	}	else = {	wealth = -200	}
		AMD_E_ALCHEMY_WORK = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	add_artifact = AMD_drug_contraceptive	}
	}
	option = {	name = AMD_EV_OPT_25010_3
		if = {	limit = {	has_character_modifier = AMD_CM_alchemy_hermetic	}	detract_society_currency_minor_effect = yes wealth = -50	}	else = {	wealth = -200	}
		AMD_E_ALCHEMY_WORK = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	add_artifact = AMD_drug_fertilizer	}
	}
	option = {	name = AMD_EV_OPT_25010_4
		if = {	limit = {	has_character_modifier = AMD_CM_alchemy_hermetic	}	detract_society_currency_tiny_effect = yes wealth = -50	}	else = {	wealth = -100	}
		AMD_E_ALCHEMY_WORK = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	add_artifact = AMD_drug_enlarger	}
	}
	
	option = {	name = AMD_EV_OPT_25000_0	#필요 없어!
		ai_chance = {	factor = 100	}
	}
	after = {
		AMD_E_ACM_COOLDOWN_3m = yes
		hidden_tooltip = {
			clr_character_flag = AMD_CF_DRUG_GOOD	clr_character_flag = AMD_CF_DRUG_FAIL
		}
	}
}
character_event = {	id = AMD.25020		#약 사용	아이템
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_evt_scientist
	desc = AMD_EV_DESC_25020
	immediate = {
		if = {
			limit = {
				OR = {
					event_target:AMD_ET_TGT = {	character = ROOT	}
					event_target:AMD_ET_TGT = {	is_lover = ROOT	}
					event_target:AMD_ET_TGT = {	prisoner = yes	host = { character = ROOT }	}
					has_opinion_modifier = { who = ROOT modifier = AMD_opinion_obedient }
					has_opinion_modifier = { who = ROOT modifier = opinion_loyal_servant }
					has_opinion_modifier = { who = ROOT modifier = opinion_the_chosen_one }
				}
			}
			set_character_flag = AMD_CF_DRUG_GOOD
		}
	}
	option = {	name = AMD_EV_OPT_25010_1	trigger = {	has_artifact = AMD_drug_aphrodisiac	}
		destroy_artifact = AMD_drug_aphrodisiac
		AMD_E_ALCHEMY_USE = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_A = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25010_2	trigger = {	has_artifact = AMD_drug_contraceptive	}
		destroy_artifact = AMD_drug_contraceptive
		AMD_E_ALCHEMY_USE = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_C = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25010_3	trigger = {	has_artifact = AMD_drug_fertilizer	}
		destroy_artifact = AMD_drug_fertilizer
		AMD_E_ALCHEMY_USE = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_F = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25010_4	trigger = {	has_artifact = AMD_drug_enlarger	event_target:AMD_ET_TGT = {	AMD_T_SIZE_5 = no	NOT = {	has_character_modifier = AMD_CM_drug_enlarger	}	}	}
		destroy_artifact = AMD_drug_enlarger
		AMD_E_ALCHEMY_USE = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_E = yes	AMD_E_SIZE_GROW = yes	}	}
	}
	
	option = {	name = AMD_EV_OPT_25000_0	#필요 없어!
		ai_chance = {	factor = 100	}
	}
	after = {
		hidden_tooltip = {
			clr_character_flag = AMD_CF_DRUG_GOOD	clr_character_flag = AMD_CF_DRUG_FAIL
		}
	}
}
character_event = {	id = AMD.25021		#약 사용	신스
	is_triggered_only = yes
	hide_from = yes
	picture = AMD_CF_ALCHEMIST_SYNTH
	desc = AMD_EV_DESC_25021
	
	option = {	name = AMD_EV_OPT_25010_1
		event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_A = yes	}
	}
	option = {	name = AMD_EV_OPT_25010_2
		event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_C = yes	}
	}
	option = {	name = AMD_EV_OPT_25010_3
		event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_F = yes	}
	}
	option = {	name = AMD_EV_OPT_25010_4
		trigger = {	event_target:AMD_ET_TGT = {	AMD_T_SIZE_5 = no	NOT = {	has_character_modifier = AMD_CM_drug_enlarger	}	}	}
		event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_E = yes	AMD_E_SIZE_UP = yes	}
	}
	
	option = {	name = AMD_EV_OPT_25000_0	#필요 없어!
		ai_chance = {	factor = 100	}
	}
}
character_event = {	id = AMD.25022		#약 사용	악마숭배/주술
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_evt_ritual_scroll
	desc = {	picture = GFX_evt_ritual_scroll	text = AMD_EV_DESC_25022_1	trigger = {	has_character_modifier = AMD_CM_alchemy_darkness	}	}
	desc = {	picture = GFX_evt_ritual_scroll	text = AMD_EV_DESC_25022_2	trigger = {	has_character_modifier = AMD_CM_alchemy_shaman	}	}
	immediate = {
		AMD_E_SETA_DOCTOR = yes
	}
	option = {	name = AMD_EV_OPT_25010_1
		if = {	limit = {	has_character_modifier = AMD_CM_alchemy_hermetic	}	detract_society_currency_tiny_effect = yes wealth = -50	}	else = {	wealth = -100	}
		AMD_E_ALCHEMY_WORK = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_A = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25010_2
		if = {	limit = {	has_character_modifier = AMD_CM_alchemy_hermetic	}	detract_society_currency_minor_effect = yes wealth = -50	}	else = {	wealth = -200	}
		AMD_E_ALCHEMY_WORK = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_C = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25010_3
		if = {	limit = {	has_character_modifier = AMD_CM_alchemy_hermetic	}	detract_society_currency_minor_effect = yes wealth = -50	}	else = {	wealth = -200	}
		AMD_E_ALCHEMY_WORK = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_F = yes	}	}
	}
	option = {	name = AMD_EV_OPT_25010_4
		if = {	limit = {	has_character_modifier = AMD_CM_alchemy_hermetic	}	detract_society_currency_tiny_effect = yes wealth = -50	}	else = {	wealth = -100	}
		AMD_E_ALCHEMY_WORK = yes
		if = {	limit = {	has_character_flag = AMD_CF_DRUG_GOOD	}	event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_E = yes	AMD_E_SIZE_UP = yes	}	}
	}
	
	option = {	name = AMD_EV_OPT_25000_0	#필요 없어!
		ai_chance = {	factor = 100	}
	}
	after = {
		AMD_E_ACM_COOLDOWN_14 = yes
		hidden_tooltip = {
			clr_character_flag = AMD_CF_DRUG_GOOD	clr_character_flag = AMD_CF_DRUG_FAIL
		}
	}
}
character_event = {	id = AMD.25098		#10년에 한번, 약물 부패 판정. 보유한 모든 약물중 하나가 50% 확률로 파괴됨.
	#picture = GFX_AMD_ALCHEMY0	desc = AMD_EV_DESC_25098
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		OR = {
			has_artifact = AMD_drug_aphrodisiac
			has_artifact = AMD_drug_contraceptive
			has_artifact = AMD_drug_fertilizer
			has_artifact = AMD_drug_enlarger
		}
	}
	immediate = {
		random_artifact = {	limit = {	has_artifact_flag = AMD_DRUG	}
			random = {	chance = 50
				modifier = {	factor = 0.0	has_artifact_flag = AMD_AF_DRUG_XENO	}
				modifier = {	factor = 0.5	has_artifact_flag = AMD_AF_DRUG_MERURU	}
				destroy_artifact = yes
			}
		}
	}
}
character_event = {	id = AMD.25099		#헤르메스/사탄 탈퇴시 버프 삭제
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		remove_character_modifier = AMD_CM_alchemy_darkness
		remove_character_modifier = AMD_CM_alchemy_hermetic
	}
}


#	26000 ~ 26999	창관 관련
character_event = {	id = AMD.26000		#창관방문	메인메뉴
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_evt_brothel
	desc = AMD_EV_DESC_26000
	option = {	name = AMD_EV_OPT_26000_1	trigger = {	AMD_T_IS_DOABLE_AGE = yes	wealth = 10	}	#구매
		custom_tooltip = {	text = AMD_EV_TT_26000_1	character_event = {	id = AMD.26100	}	}
	}
	option = {	name = AMD_EV_OPT_26000_2	trigger = {	AMD_T_IS_PROS = yes	}	#판매자
		if = {	limit = {	AMD_T_IS_DOABLE_AGE = yes	}
			custom_tooltip = {	text = AMD_EV_TT_26000_2	character_event = {	id = AMD.26200	}	}
		}
		else = {	character_event = {	id = AMD.26292	}	}
	}
	option = {	name = AMD_EV_OPT_26000_3	trigger = {	NAND = {	AMD_T_HGF_BROTHEL_HOMO = yes	AMD_T_HGF_BROTHEL_ORGY = yes	AMD_T_HGF_BROTHEL_BEAST = yes	}	}
		custom_tooltip = {	text = AMD_EV_TT_26000_3	character_event = {	id = AMD.26300	}	}
	}
	option = {	name = AMD_EV_OPT_26000_4	trigger = {	AMD_T_IS_PROS = no	trait = lustful	AMD_T_IS_DOABLE_AGE = yes	NOT = {	has_character_modifier = AMD_CM_prostitute_retired	trait = chaste	trait = celibate	}	}	#일하고 싶은데요
		tooltip_info = lustful
		custom_tooltip = {	text = AMD_EV_TT_26000_4	character_event = {	id = AMD.26291	}	}
	}
	option = {	name = AMD_EV_OPT_26000_0	#나간다
		ai_chance = {	factor = 100	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	after = {	hidden_tooltip = {	AMD_E_ACM_COOLDOWN_1m = yes	}	}
}
character_event = {	id = AMD.26100		#창관방문		구매
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_evt_sultan
	#desc = AMD_EV_DESC_26100
	immediate = {
		location = {	save_event_target_as = AMD_ET_LOCAL	}
		AMD_E_SETA_POV = yes
		AMD_E_SETA_TB = yes
		if = {	limit = {	AMD_T_IS_HUMAN = no	AMD_T_HGF_BROTHEL_BEAST = no	}
			set_character_flag = local_AMD_BROTHEL_BEAST_CANNOT_SERVED
		}
		else_if = {	limit = {	OR = {	is_female = yes	trait = homosexual	}	AMD_T_HGF_BROTHEL_HOMO = no	}
			set_character_flag = local_AMD_BROTHEL_HOMO_CANNOT_SERVED
		}
		else = {	set_character_flag = local_AMD_BROTHEL_NO_PROBLEM	}
	}
	desc = {	text = AMD_EV_DESC_26100_1	trigger = {	has_character_flag = local_AMD_BROTHEL_NO_PROBLEM	}	}
	desc = {	text = AMD_EV_DESC_26100_2	trigger = {	has_character_flag = local_AMD_BROTHEL_HOMO_CANNOT_SERVED	}	}
	desc = {	text = AMD_EV_DESC_26100_3	trigger = {	has_character_flag = local_AMD_BROTHEL_BEAST_CANNOT_SERVED	}	}
	
	option = {	name = AMD_EV_OPT_26100_1	#여자
		trigger = {	OR = {	is_female = no	AMD_T_HGF_BROTHEL_HOMO = yes	}	}
		#custom_tooltip = {	text = AMD_EV_OPT_26000_1	}
		hidden_tooltip = {
			AMD_E_CREATE_COMMON_WHORE_FEMALE = yes
			event_target:AMD_ET_BROTHEL_WHORE = {	character_event = {	id = AMD_PING.26110	}
				AMD_E_SETA_TGT = yes
				AMD_E_SETA_TS = yes
			}
		}
	}
	option = {	name = AMD_EV_OPT_26100_2	#남자
		trigger = {	AMD_T_HGF_BROTHEL_HOMO = yes	}
		#custom_tooltip = {	text = AMD_EV_OPT_26000_1	}
		hidden_tooltip = {
			AMD_E_CREATE_COMMON_WHORE_MALE = yes
			event_target:AMD_ET_BROTHEL_WHORE = {	character_event = {	id = AMD_PING.26110	}
				AMD_E_SETA_TGT = yes
				AMD_E_SETA_TS = yes
			}
		}
	}
	option = {	name = AMD_EV_OPT_26100_3	#스페셜
		trigger = {	OR = {	AMD_T_HGF_BROTHEL_ORGY = yes	AMD_T_HGF_BROTHEL_BEAST = yes	}	wealth = 300	}
		custom_tooltip = {	text = AMD_EV_TT_26100_3	character_event = {	id = AMD.26130	}	}
	}
	option = {	name = AMD_EV_OPT_26000_0	#나간다
		ai_chance = {	factor = 100	}
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.26110		#창관방문			구매2P
	is_triggered_only = yes
	#hide_from = yes
	picture = GFX_evt_brothel
	immediate = {
		#고객과 판매자의 성별조합에 따라 그림 변경. 텍스트는 동일...?
		if = {	limit = {	event_target:AMD_ET_TB = {	is_female = no	}	event_target:AMD_ET_TS = {	is_female = no	}	}	set_variable = {	which = local_AMD_PIC	value = 11	}	}
		if = {	limit = {	event_target:AMD_ET_TB = {	is_female = no	}	event_target:AMD_ET_TS = {	is_female = yes	}	}	set_variable = {	which = local_AMD_PIC	value = 12	}	}
		if = {	limit = {	event_target:AMD_ET_TB = {	is_female = yes	}	event_target:AMD_ET_TS = {	is_female = no	}	}	set_variable = {	which = local_AMD_PIC	value = 21	}	}
		if = {	limit = {	event_target:AMD_ET_TB = {	is_female = yes	}	event_target:AMD_ET_TS = {	is_female = yes	}	}	set_variable = {	which = local_AMD_PIC	value = 22	}	}
		#if = {	limit = {	OR = {	check_variable = {	which = local_AMD_PIC	value == 12	}	check_variable = {	which = local_AMD_PIC	value == 21	}	}	}		}
		
		event_target:AMD_ET_TB = {	event_target:AMD_ET_TS = {	AMD_E_SET_AD_WITH_PREV = yes	}	}
	}
	desc = {	text = AMD_EV_DESC_26110	picture = GFX_evt_brothel	trigger = {	check_variable = {	which = local_AMD_PIC	value == 11	}	}	}
	desc = {	text = AMD_EV_DESC_26110	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_PIC	value == 12	}	}	}
	desc = {	text = AMD_EV_DESC_26110	picture = GFX_evt_brothel	trigger = {	check_variable = {	which = local_AMD_PIC	value == 21	}	}	}
	desc = {	text = AMD_EV_DESC_26110	picture = GFX_evt_brothel	trigger = {	check_variable = {	which = local_AMD_PIC	value == 22	}	}	}
	option = {	name = AMD_EV_OPT_26110_1	#짧게
		
		#레어몹인 경우 -100, 일반은 -10
		if = {	limit = {	event_target:AMD_ET_BROTHEL_WHORE = {	character = event_target:AMD_ET_BROTHEL_WHORE_RARE	}	}	wealth = -100	}
		else = {	wealth = -10	}
		#호모
		if = {	limit = {	OR = {	check_variable = {	which = local_AMD_PIC	value == 11	}	check_variable = {	which = local_AMD_PIC	value == 22	}	}	}	piety = -5	}
		#노멀
		else_if = {	limit = {	OR = {	check_variable = {	which = local_AMD_PIC	value == 12	}	check_variable = {	which = local_AMD_PIC	value == 21	}	}	}	piety = -1	}
		hidden_tooltip = {
			event_target:AMD_ET_BROTHEL_WHORE = {	letter_event = {	id = AMD_PLAY_PING.1122	}	}
		}
	}
	option = {	name = AMD_EV_OPT_26110_2	#길게	노멀만 가능
		trigger = {	OR = {	check_variable = {	which = local_AMD_PIC	value == 12	}	check_variable = {	which = local_AMD_PIC	value == 21	}	}	}
		#레어몹인 경우 -300, 일반은 -30
		if = {	limit = {	event_target:AMD_ET_BROTHEL_WHORE = {	character = event_target:AMD_ET_BROTHEL_WHORE_RARE	}	}	wealth = -300	}
		else = {	wealth = -30	}
		hidden_tooltip = {
			event_target:AMD_ET_BROTHEL_WHORE = {	letter_event = {	id = AMD_PLAY_PING.1123	}	}
		}
	}
	option = {	name = AMD_EV_OPT_26110_3	#체인지
		trigger = {	NOT = {	event_target:AMD_ET_BROTHEL_WHORE_RARE = {	always = yes	}	}	}
		wealth = -5
		if = {	limit = {	event_target:AMD_ET_TS = {	is_female = yes	}	}
			event_target:AMD_ET_TS = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_TS
			clear_event_target = AMD_ET_TGT
			clear_event_target = AMD_ET_BROTHEL_WHORE
			hidden_tooltip = {
				AMD_E_CREATE_COMMON_WHORE_FEMALE = yes
				event_target:AMD_ET_BROTHEL_WHORE = {
					AMD_E_SETA_TGT = yes
					AMD_E_SETA_TS = yes
					character_event = {	id = AMD_PING.26110	}
				}
			}
		}
		else = {	#limit = {	event_target:AMD_ET_TS = {	is_female = no	}	}
			event_target:AMD_ET_TS = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_TS
			clear_event_target = AMD_ET_TGT
			clear_event_target = AMD_ET_BROTHEL_WHORE
			hidden_tooltip = {
				AMD_E_CREATE_COMMON_WHORE_MALE = yes
				event_target:AMD_ET_BROTHEL_WHORE = {	
					AMD_E_SETA_TGT = yes
					AMD_E_SETA_TS = yes
					character_event = {	id = AMD_PING.26110	}
				}
			}
		}
	}
	option = {	name = AMD_EV_OPT_26000_0	#나간다
		ai_chance = {	factor = 100	}
		event_target:AMD_ET_TS = {	AMD_E_DEATH_HOTS = yes	}
		AMD_E_END_CHAIN = yes
	}
}
character_event = {	id = AMD.26121		#창관방문				구매 2P 후속이벤트
	is_triggered_only = yes
	#hide_from = yes
	picture = GFX_evt_brothel
	desc = {	text = AMD_EV_DESC_26121	picture = GFX_evt_brothel	trigger = {	event_target:AMD_ET_BROTHEL_WHORE = {	is_female = yes	}	}	}
	desc = {	text = AMD_EV_DESC_26121	picture = GFX_evt_brothel	trigger = {	event_target:AMD_ET_BROTHEL_WHORE = {	is_female = no	}	}	}
	
	option = {	name = AMD_EV_OPT_26121_1	#가신으로
		trigger = {
			OR = {
				AND = {	wealth = 500	event_target:AMD_ET_BROTHEL_WHORE = {	character = event_target:AMD_ET_BROTHEL_WHORE_RARE	}	}
				AND = {	wealth = 50	NOT = {	event_target:AMD_ET_BROTHEL_WHORE_RARE = {	always = yes	}	}	}
			}
		}
		if = {	limit = {	event_target:AMD_ET_BROTHEL_WHORE = {	character = event_target:AMD_ET_BROTHEL_WHORE_RARE	}	}	wealth = -500	}
		else = {	wealth = -50	}
		custom_tooltip = {	text = AMD_EV_TT_26121_1	}
		event_target:AMD_ET_BROTHEL_WHORE = {
			hidden_tooltip = {
				diplomatic_immunity = no
				clr_character_flag = do_not_disturb
				remove_trait = disinherited
				if = {	limit = {	has_character_modifier = AMD_CM_prostitute_unknown	}	remove_character_modifier = AMD_CM_prostitute_unknown	}
				if = {	limit = {	has_character_modifier = AMD_CM_prostitute_known	}	remove_character_modifier = AMD_CM_prostitute_known	}
				if = {	limit = {	has_character_modifier = AMD_CM_prostitute_renown	}	remove_character_modifier = AMD_CM_prostitute_renown	}
			}
			add_character_modifier = {	name = AMD_CM_prostitute_retired	duration = -1	}
			opinion = {	modifier = opinion_very_grateful	who = event_target:AMD_ET_TB	years = 20	}
			reverse_add_favor = event_target:AMD_ET_TB	#구매자에 대하여 호의를 빚짐
			move_character = event_target:AMD_ET_TB
		}
	}
	option = {	name = AMD_EV_OPT_26121_2	#하녀
		trigger = {	wealth = 50		NOT = {	has_character_modifier = seduced_loyal_spy_maid	}
			event_target:AMD_ET_BROTHEL_WHORE = {	is_female = yes	}
			NOT = {	event_target:AMD_ET_BROTHEL_WHORE_RARE = {	always = yes	}	}
		}
		wealth = -50
		custom_tooltip = {	text = AMD_EV_TT_26121_2	}
		hidden_tooltip = {
			add_character_modifier = {	modifier = hidden_seduced_maid	years = 20	hidden = yes	}
		}
		add_character_modifier = {	modifier = seduced_loyal_spy_maid	years = 20	}
		event_target:AMD_ET_BROTHEL_WHORE = {	AMD_E_DEATH_HOTS = yes	}
	}
	option = {	name = AMD_EV_OPT_26121_3	#경호원
		trigger = {	wealth = 50		NOT = {	has_character_modifier = seduced_loyal_bodyguard	}
			event_target:AMD_ET_BROTHEL_WHORE = {	is_female = no	}
			NOT = {	event_target:AMD_ET_BROTHEL_WHORE_RARE = {	always = yes	}	}
		}
		wealth = -50
		custom_tooltip = {	text = AMD_EV_TT_26121_3	}
		hidden_tooltip = {
			add_character_modifier = {	modifier = hidden_seduced_bodyguard	years = 20	hidden = yes	}
		}
		add_character_modifier = {	modifier = seduced_loyal_bodyguard	years = 20	}
		event_target:AMD_ET_BROTHEL_WHORE = {	AMD_E_DEATH_HOTS = yes	}
	}
	option = {	name = AMD_EV_OPT_26121_4	#성과금
		if = {	limit = {	event_target:AMD_ET_BROTHEL_WHORE = {	character = event_target:AMD_ET_BROTHEL_WHORE_RARE	}	}	prestige = 5	wealth = -50	}
		else = {	prestige = 1	wealth = -1	}
		event_target:AMD_ET_TS = {	wealth = 1	AMD_E_DEATH_HOTS = yes	}
		random = {	chance = 10	add_trait = charitable	}
	}
	option = {	name = AMD_EV_OPT_26121_5	#끝
		ai_chance = {	factor = 100	}
		event_target:AMD_ET_TS = {	AMD_E_DEATH_HOTS = yes	}
	}
	after = {	hidden_tooltip = {	AMD_E_END_CHAIN = yes	}	}
}
character_event = {	id = AMD.26130		#창관방문			구매 특수
	is_triggered_only = yes
	show_root = no
	hide_from = yes
	picture = GFX_AMD_MERURU0
	desc = AMD_EV_DESC_26130
	immediate = {
		#짐승
		if = {	limit = {	AMD_T_HGF_BROTHEL_BEAST = yes	}
			random_list = {
				20 = {	AMD_E_CREATE_XENO_WHORE = yes	AMD_E_CREATE_RARE_WHORE = yes	}
				40 = {	AMD_E_CREATE_XENO_WHORE = yes	}
				40 = {	AMD_E_CREATE_RARE_WHORE = yes	}
			}
		}
		else = {	AMD_E_CREATE_RARE_WHORE = yes	}
		#단체전
		if = {	limit = {	AMD_T_HGF_BROTHEL_ORGY = yes	}	#단체전 업그레이드가 있어야 뜨겠지
			#제노와 레어가 둘 다 있을 경우, 남자들/여자들 중 하나만 가능. 아니면 둘다 가능.
			if = {	limit = {	event_target:AMD_ET_BROTHEL_WHORE_RARE = {	always = yes	}	event_target:AMD_ET_BROTHEL_WHORE_XENO = {	always = yes	}	}
				random_list = {
					100 = {	set_character_flag = local_AMD_SPECIAL_MP_M
						modifier = {	factor = 2.0	event_target:AMD_ET_POV = {	is_female = yes	NOT = {	trait = homosexual	}	}	}
						modifier = {	factor = 2.0	event_target:AMD_ET_POV = {	is_female = no	trait = homosexual	}	}
					}
					100 = {	set_character_flag = local_AMD_SPECIAL_MP_F
						modifier = {	factor = 2.0	event_target:AMD_ET_POV = {	is_female = no	NOT = {	trait = homosexual	}	}	}
						modifier = {	factor = 2.0	event_target:AMD_ET_POV = {	is_female = yes	trait = homosexual	}	}
					}
				}
			}
			else = {	set_character_flag = local_AMD_SPECIAL_MP_F	set_character_flag = local_AMD_SPECIAL_MP_M	}
		}
		
		#if = {	limit = {	OR = {	check_variable = {	which = local_AMD_PIC	value == 12	}	check_variable = {	which = local_AMD_PIC	value == 21	}	}	}		}
	}
	option = {	name = AMD_EV_OPT_26130_1	#레어창부		일반창부와 마찬가지로 26110. 향후 추가예정...
		trigger = {	event_target:AMD_ET_BROTHEL_WHORE_RARE = {	always = yes	}	}
		hidden_tooltip = {
			event_target:AMD_ET_BROTHEL_WHORE = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_BROTHEL_WHORE
			event_target:AMD_ET_BROTHEL_WHORE_RARE = {
				AMD_E_SETA_BROTHEL_WHORE = yes
				AMD_E_SETA_TGT = yes
				AMD_E_SETA_TS = yes
				character_event = {	id = AMD_PING.26110	}
			}
		}
		AMD_E_END_CHAIN = yes
	}
	option = {	name = AMD_EV_OPT_26130_2	#남자들		즉시 행위로 이행
		trigger = {	has_character_flag = local_AMD_SPECIAL_MP_M	}
		hidden_tooltip = {
			event_target:AMD_ET_BROTHEL_WHORE = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_BROTHEL_WHORE
			event_target:AMD_ET_BROTHEL_WHORE_RARE = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_BROTHEL_WHORE_RARE
			
			clear_event_target = AMD_ET_TS
			
			AMD_E_SETA_OH = yes
			if = {	limit = {	is_female = no	}	AMD_E_SETA_STF_GAY = yes	}
			AMD_E_MP_INDEX = yes
		}
	}
	option = {	name = AMD_EV_OPT_26130_3	#여자들		즉시 행위로 이행
		trigger = {	has_character_flag = local_AMD_SPECIAL_MP_F	}
		hidden_tooltip = {
			event_target:AMD_ET_BROTHEL_WHORE = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_BROTHEL_WHORE
			event_target:AMD_ET_BROTHEL_WHORE_RARE = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_BROTHEL_WHORE_RARE
			
			clear_event_target = AMD_ET_TS
			
			AMD_E_SETA_OH = yes
			if = {	limit = {	is_female = yes	}	AMD_E_SETA_STF_LES = yes	}
			AMD_E_MP_INDEX = yes
		}
	}
	option = {	name = AMD_EV_OPT_26130_4	#짐승		즉시 행위로 이행
		trigger = {	event_target:AMD_ET_BROTHEL_WHORE_XENO = {	always = yes	}	}
		hidden_tooltip = {
			event_target:AMD_ET_BROTHEL_WHORE_RARE = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_BROTHEL_WHORE_RARE
			
			event_target:AMD_ET_BROTHEL_WHORE_XENO = {
				AMD_E_SETA_BROTHEL_WHORE = yes
				AMD_E_SETA_TGT = yes
				AMD_E_SETA_TS = yes
				event_target:AMD_ET_TB = {	event_target:AMD_ET_TS = {	AMD_E_SET_AD_WITH_PREV = yes	}	}
				letter_event = {	id = AMD_PLAY_PING.1122	}
			}
		}
	}
	option = {	name = AMD_EV_OPT_26000_0	#나간다
		ai_chance = {	factor = 100	}
		hidden_tooltip = {
			event_target:AMD_ET_BROTHEL_WHORE = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_BROTHEL_WHORE
			event_target:AMD_ET_BROTHEL_WHORE_RARE = {	AMD_E_DEATH_HOTS = yes	}
			clear_event_target = AMD_ET_BROTHEL_WHORE_RARE
		}
		AMD_E_END_CHAIN = yes
	}
	after = {
		hidden_tooltip = {
			clr_character_flag = local_AMD_SPECIAL_MP_M
			clr_character_flag = local_AMD_SPECIAL_MP_F
		}
	}
}
character_event = {	id = AMD.26200		#창관방문		판매
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_evt_sultan
	immediate = {
		location = {	save_event_target_as = AMD_ET_LOCAL	}
		AMD_E_SETA_POV = yes
		AMD_E_SETA_TS = yes
		random_list = {	#고객 타입 리스트
			60 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 1	}	#인남
				modifier = {	factor = 0.5	is_female = no	NOT = {	trait = homosexual	}	}
			}
			20 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 2	}	#인녀
				modifier = {	factor = 0.0	AMD_T_HGF_BROTHEL_HOMO = no	}
			}
			10 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 3	}	#짐승
				modifier = {	factor = 3.0	AMD_T_IS_HUMAN = no	}
				modifier = {	factor = 3.0	AMD_CTI_XF_TRAITS = yes	}
				modifier = {	factor = 0.0	AMD_T_HGF_BROTHEL_BEAST = no	}
			}
			10 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 999	}	#없음
				modifier = {	factor = 9.9	AMD_T_IS_HUMAN = no	}
				modifier = {	factor = 4.0	trait = homosexual	}
				modifier = {	factor = 2.0	has_character_modifier = AMD_CM_prostitute_unknown	}
				modifier = {	factor = 0.5	has_character_modifier = AMD_CM_prostitute_renown	}
			}
		}
		if = {	limit = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 1	}	}	#고객은 인남
			AMD_E_CREATE_COMMON_GUEST_MALE = yes
			if = {	limit = {	AMD_T_IS_HUMAN = no	}	#당신이 짐승
				set_variable = {	which = local_AMD_BROTHEL_WORK	value = 703	}	#숏
			}
			else_if = {	limit = {	is_female = no	}	#당신이 남자
				random_list = {
					90 = {
						set_variable = {	which = local_AMD_BROTHEL_WORK	value = 610	}	#숏
					}
					10 = {
						set_variable = {	which = local_AMD_BROTHEL_WORK	value = 593	}	#남남mp
						modifier = {	factor = 0.1	has_character_modifier = AMD_CM_prostitute_unknown	}
						modifier = {	factor = 0.5	has_character_modifier = AMD_CM_prostitute_known	}
						event_target:AMD_ET_BROTHEL_GUEST = {	AMD_E_DEATH_HOTS = yes	}
					}
				}
			}
			else = {	#limit = {	is_female = no	}	#당신이 여자
				random_list = {
					100 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 294	}	#숏
					}
					60 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 100	}	#롱
					}
					10 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 104	}	#수
					}
					10 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 105	}	#구
					}
					10 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 106	}	#유
					}
					10 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 107	}	#족
					}
					10 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 592	}	#여남MP
						modifier = {	factor = 0.1	has_character_modifier = AMD_CM_prostitute_unknown	}
						modifier = {	factor = 0.5	has_character_modifier = AMD_CM_prostitute_known	}
						event_target:AMD_ET_TB = {
							AMD_E_SETA_OH = yes
						}
						event_target:AMD_ET_BROTHEL_GUEST = {	AMD_E_DEATH_HOTS = yes	}
					}
					
				}
			}
		}
		else_if = {	limit = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 2	}	}	#고객은 인녀
			AMD_E_CREATE_COMMON_GUEST_FEMALE = yes
			if = {	limit = {	AMD_T_IS_HUMAN = no	}	#당신이 짐승
				set_variable = {	which = local_AMD_BROTHEL_WORK	value = 703	}	#수간숏
			}
			else_if = {	limit = {	is_female = no	}	#당신이 남자
				random_list = {
					100 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 294	}	#숏
					}
					85 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 100	}	#롱
					}
					10 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 107	}	}	#풋잡
					5 = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 591	}	#남여MP
						modifier = {	factor = 0.1	has_character_modifier = AMD_CM_prostitute_unknown	}
						modifier = {	factor = 0.5	has_character_modifier = AMD_CM_prostitute_known	}
					}
				}
			}
			else = {	#limit = {	is_female = no	}	#당신이 여자
				random_list = {
					90 = {
						set_variable = {	which = local_AMD_BROTHEL_WORK	value = 650	}	#여여2p
					}
					10 = {
						set_variable = {	which = local_AMD_BROTHEL_WORK	value = 594	}	#여여mp
						modifier = {	factor = 0.1	has_character_modifier = AMD_CM_prostitute_unknown	}
						modifier = {	factor = 0.5	has_character_modifier = AMD_CM_prostitute_known	}
						event_target:AMD_ET_BROTHEL_GUEST = {	AMD_E_DEATH_HOTS = yes	}
					}
				}
			}
		}
		else_if = {	limit = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 3	}	}	#고객은 짐승 (?)
			AMD_E_CREATE_XENO_WHORE = yes
			if = {	limit = {	AMD_T_IS_HUMAN = no	}	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 704	}	}
			else_if = {	limit = {	is_female = no	}	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 701	}	}
			else = {	set_variable = {	which = local_AMD_BROTHEL_WORK	value = 702	}	}
		}
		else = {}

		AMD_E_CALC_BROTHEL_PAY = yes
	}
	
	#노멀
	desc = {	text = AMD_EV_DESC_26200_100	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 100	}	}	}
	
	desc = {	text = AMD_EV_DESC_26200_104	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 104	}	}	}
	desc = {	text = AMD_EV_DESC_26200_105	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 105	}	}	}
	desc = {	text = AMD_EV_DESC_26200_106	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 106	}	}	}
	desc = {	text = AMD_EV_DESC_26200_107_F	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 107	}	is_female = yes	}	}
	desc = {	text = AMD_EV_DESC_26200_107_M	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 107	}	is_female = no	}	}
	
	desc = {	text = AMD_EV_DESC_26200_294	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 294	}	}	}
	
	#mp
	desc = {	text = AMD_EV_DESC_26200_591	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 591	}	}	}
	desc = {	text = AMD_EV_DESC_26200_592	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 592	}	}	}
	desc = {	text = AMD_EV_DESC_26200_593	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 593	}	}	}
	desc = {	text = AMD_EV_DESC_26200_594	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 594	}	}	}
	
	#동성 2p
	desc = {	text = AMD_EV_DESC_26200_610	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 610	}	}	}
	desc = {	text = AMD_EV_DESC_26200_650	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 650	}	}	}
	
	#수간
	desc = {	text = AMD_EV_DESC_26200_700	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 700	}	}	}
	desc = {	text = AMD_EV_DESC_26200_701	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 701	}	}	}
	desc = {	text = AMD_EV_DESC_26200_702	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 702	}	}	}
	desc = {	text = AMD_EV_DESC_26200_703	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 703	}	}	}
	desc = {	text = AMD_EV_DESC_26200_704	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 704	}	}	}
	
	#손님 없음
	desc = {	text = AMD_EV_DESC_26200_999	picture = GFX_evt_sultan	trigger = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 999	}	}	}
	
	option = {	name = AMD_EV_OPT_26200_YES		#까짓거 해보죠
		trigger = {
			NOT = {
				check_variable = {	which = local_AMD_BROTHEL_WORK	value == 104	}
				check_variable = {	which = local_AMD_BROTHEL_WORK	value == 105	}
				check_variable = {	which = local_AMD_BROTHEL_WORK	value == 106	}
				check_variable = {	which = local_AMD_BROTHEL_WORK	value == 107	}
				check_variable = {	which = local_AMD_BROTHEL_WORK	value == 999	}
			}
		}
		wealth = local_AMD_BROTHEL_PAY
		if = {	#처녀 추가금 안내
			limit = {	is_female = yes	AMD_T_IS_VIRGIN = yes
				OR = {
					check_variable = {	which = local_AMD_BROTHEL_WORK	value == 294	}
					check_variable = {	which = local_AMD_BROTHEL_WORK	value == 100	}
					check_variable = {	which = local_AMD_BROTHEL_WORK	value == 592	}
					check_variable = {	which = local_AMD_BROTHEL_WORK	value == 702	}
				}
			}
			custom_tooltip = {	text = AMD_EV_TT_26200_V	}
		}
		hidden_tooltip = {
			if = {	#	2P_INDEX
				limit = {
					OR = {
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 294	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 610	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 650	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 701	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 702	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 703	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 704	}
					}
				}
				event_target:AMD_ET_TB = {	event_target:AMD_ET_TS = {	AMD_E_SET_AD_WITH_PREV = yes	}	}
				AMD_E_2P_SCORING_1 = yes
				event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1122	}	}
			}
			else_if = {	#	LN_INDEX
				limit = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 100	}	}
				event_target:AMD_ET_TB = {	event_target:AMD_ET_TS = {	AMD_E_SET_AD_WITH_PREV = yes	}	}
				AMD_E_2P_SCORING_1 = yes
				event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1123	}	}
			}
			else_if = {	#	비삽입
				limit = {
					OR = {
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 104	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 105	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 106	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 107	}
					}
				}
				AMD_E_SETA_STOP_SELL = yes
				event_target:AMD_ET_TB = {	event_target:AMD_ET_TS = {	AMD_E_SET_AD_WITH_PREV = yes	}	}
				AMD_E_2P_SCORING_1 = yes
				event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1123	}	}
			}
			else_if = {	limit = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 591	}	}
				AMD_E_SETA_OH = yes
				clear_event_target = AMD_ET_STF_GAY
				clear_event_target = AMD_ET_STF_LES
				AMD_E_MP_SCORING = yes
				AMD_E_MP_INDEX = yes
			}
			else_if = {	limit = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 592	}	}
				AMD_E_SETA_OH = yes
				clear_event_target = AMD_ET_STF_GAY
				clear_event_target = AMD_ET_STF_LES
				AMD_E_MP_SCORING = yes
				AMD_E_MP_INDEX = yes
			}
			else_if = {	limit = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 593	}	}
				AMD_E_SETA_OH = yes
				clear_event_target = AMD_ET_STF_LES
				AMD_E_SETA_STF_GAY = yes
				AMD_E_MP_SCORING = yes
				AMD_E_MP_INDEX = yes
			}
			else_if = {	limit = {	check_variable = {	which = local_AMD_BROTHEL_WORK	value == 594	}	}
				AMD_E_SETA_OH = yes
				clear_event_target = AMD_ET_STF_GAY
				AMD_E_SETA_STF_LES = yes
				AMD_E_MP_SCORING = yes
				AMD_E_MP_INDEX = yes
			}
		}
	}
	option = {	name = AMD_EV_OPT_26200_YES		#까짓거 해보죠
		trigger = {
			OR = {
				check_variable = {	which = local_AMD_BROTHEL_WORK	value == 104	}
				check_variable = {	which = local_AMD_BROTHEL_WORK	value == 105	}
				check_variable = {	which = local_AMD_BROTHEL_WORK	value == 106	}
				check_variable = {	which = local_AMD_BROTHEL_WORK	value == 107	}
			}
		}
		wealth = local_AMD_BROTHEL_PAY
		hidden_tooltip = {
			if = {	#	비삽입
				limit = {
					OR = {
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 104	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 105	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 106	}
						check_variable = {	which = local_AMD_BROTHEL_WORK	value == 107	}
					}
				}
				AMD_E_SETA_STOP_SELL = yes
				event_target:AMD_ET_TB = {	event_target:AMD_ET_TS = {	AMD_E_SET_AD_WITH_PREV = yes	}	}
				AMD_E_2P_SCORING_1 = yes
				event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1123	}	}
			}
		}
	}
	option = {	name = AMD_EV_OPT_26000_0	#나간다
		ai_chance = {	factor = 100	}
		clr_global_flag = AMD_GF_IN_ACTION
	}
	after = {	hidden_tooltip = {	AMD_E_ACM_COOLDOWN_1m = yes	}	}
}
character_event = {	id = AMD.26291		#창관방문		가입
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_AMD_MERURU0
	immediate = {
		if = {	limit = {	AMD_T_IS_HUMAN = yes	}
			if = {	limit = {	is_female = yes	}	set_character_flag = AMD_CF_LOCAL_1	}
			else_if = {	limit = {	is_female = no	AMD_T_HGF_BROTHEL_HOMO = yes	}	set_character_flag = AMD_CF_LOCAL_1	}
			else_if = {	limit = {	is_female = no	AMD_T_HGF_BROTHEL_HOMO = no	}	set_character_flag = AMD_CF_LOCAL_2	}
			else = {	set_character_flag = AMD_CF_LOCAL_9	}
		}
		else_if = {	limit = {	AMD_T_IS_HUMAN = no	}
			if = {	limit = {	AMD_T_HGF_BROTHEL_BEAST = yes	}	set_character_flag = AMD_CF_LOCAL_1	}
			if = {	limit = {	AMD_T_HGF_BROTHEL_BEAST = no	}	set_character_flag = AMD_CF_LOCAL_2	}
		}
	}
	desc = {	text = AMD_EV_DESC_26291_1	trigger = {	has_character_flag = AMD_CF_LOCAL_1	}	}
	desc = {	text = AMD_EV_DESC_26291_2	trigger = {	has_character_flag = AMD_CF_LOCAL_2	}	}
	desc = {	text = AMD_EV_DESC_26291_9	trigger = {	has_character_flag = AMD_CF_LOCAL_9	}	}
	
	option = {	name = AMD_EV_OPT_26291_1	trigger = {	has_character_flag = AMD_CF_LOCAL_1	}	#계약
		prestige = -100
		custom_tooltip = {	text = AMD_EV_TT_26291_1	add_character_modifier = {	name = AMD_CM_prostitute_unknown	duration = -1	}	}
		
	}
	option = {	name = AMD_EV_OPT_26291_2	trigger = {	has_character_flag = AMD_CF_LOCAL_2	}	#업그레이드
		prestige = -1
		custom_tooltip = {	text = AMD_EV_TT_26291_2	character_event = {	id = AMD.26300	}	}
	}
	option = {	name = AMD_EV_OPT_26000_0	#나간다
		ai_chance = {	factor = 100	}
	}
	after = {
		clr_global_flag = AMD_GF_IN_ACTION
		clr_character_flag = AMD_CF_LOCAL_1
		clr_character_flag = AMD_CF_LOCAL_2
		clr_character_flag = AMD_CF_LOCAL_9
	}
}
character_event = {	id = AMD.26292		#창관방문		탈퇴
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_evt_stressed_ruler
	immediate = {
		if = {	limit = {	AMD_T_IS_DOABLE_AGE = no	}	set_character_flag = AMD_CF_LOCAL_1	}
		else = {	set_character_flag = AMD_CF_LOCAL_2	}
	}
	desc = {	text = AMD_EV_DESC_26292_1	trigger = {	has_character_flag = AMD_CF_LOCAL_1	}	}
	desc = {	text = AMD_EV_DESC_26292_2	trigger = {	has_character_flag = AMD_CF_LOCAL_2	}	}
	
	option = {	name = AMD_EV_OPT_26292_1	#trigger = {	has_character_flag = AMD_CF_LOCAL_1	}	#은퇴한다
		ai_chance = {	factor = 100	}
		prestige = -1
		custom_tooltip = {	text = AMD_EV_TT_26000_5
			if = {	limit = {	has_character_modifier = AMD_CM_prostitute_suspicious	}	remove_character_modifier = AMD_CM_prostitute_suspicious	}
			if = {	limit = {	has_character_modifier = AMD_CM_prostitute_unknown	}	remove_character_modifier = AMD_CM_prostitute_unknown	}
			if = {	limit = {	has_character_modifier = AMD_CM_prostitute_known	}	remove_character_modifier = AMD_CM_prostitute_known	}
			if = {	limit = {	has_character_modifier = AMD_CM_prostitute_renown	}	remove_character_modifier = AMD_CM_prostitute_renown	}
			add_character_modifier = {	name = AMD_CM_prostitute_retired	duration = -1	}
		}
	}
	option = {	name = AMD_EV_OPT_26292_2	trigger = {	has_character_flag = AMD_CF_LOCAL_2	}	#작위를 그만둔다
		prestige = -1000
		abdicate = yes
		custom_tooltip = {	text = AMD_EV_TT_26292_2
			any_claim = {	remove_claim = ROOT	}
		}
	}
	option = {	name = AMD_EV_OPT_26000_0	#나간다
		#ai_chance = {	factor = 100	}
	}
	after = {
		clr_global_flag = AMD_GF_IN_ACTION
		clr_character_flag = AMD_CF_LOCAL_1
		clr_character_flag = AMD_CF_LOCAL_2
	}
}
character_event = {	id = AMD.26300		#창관방문			업그레이드
	is_triggered_only = yes
	hide_from = yes
	picture = GFX_AMD_MERURU0
	desc = AMD_EV_DESC_26300
	option = {	name = AMD_EV_OPT_26300_1	trigger = {	AMD_T_HGF_BROTHEL_HOMO = no	}
		scaled_wealth = {	value = -1	min = -100	max = -500	}
		custom_tooltip = {	text = AMD_EV_TT_26300_1	set_global_flag = AMD_GF_BROTHEL_HOMO	}
		repeat_event = {	id = AMD.26300	}
	}
	option = {	name = AMD_EV_OPT_26300_2	trigger = {	AMD_T_HGF_BROTHEL_HOMO = yes	AMD_T_HGF_BROTHEL_ORGY = no	}
		scaled_wealth = {	value = -2	min = -200	max = -1000	}
		custom_tooltip = {	text = AMD_EV_TT_26300_2	set_global_flag = AMD_GF_BROTHEL_ORGY	}
		repeat_event = {	id = AMD.26300	}
	}
	option = {	name = AMD_EV_OPT_26300_3	trigger = {	AMD_T_HGF_BROTHEL_ORGY = yes	AMD_T_HGF_BROTHEL_BEAST = no	}
		scaled_wealth = {	value = -3	min = -300	max = -1500	}
		custom_tooltip = {	text = AMD_EV_TT_26300_3	set_global_flag = AMD_GF_BROTHEL_BEAST	}
		repeat_event = {	id = AMD.26300	}
	}
	option = {	name = AMD_EV_OPT_26300_0	#업그레이드할 것이 없다
		ai_chance = {	factor = 100	}
	}
	after = {	clr_global_flag = AMD_GF_IN_ACTION	}
}

#	27000 ~ 27999	수간 관련...?

character_event = {	id = AMD.27001		#동물 방문 이벤트 (임시)
	picture = GFX_evt_lovers
	is_triggered_only = yes
	desc = {	trigger = {	event_target:AMD_ET_TGT = {	AMD_T_IS_HORSE = yes	is_female = yes	}	}	text = AMD_EV_DESC_27001_1	picture = GFX_evt_horse_friend	}
	desc = {	trigger = {	event_target:AMD_ET_TGT = {	AMD_T_IS_HORSE = yes	is_female = no	}	}	text = AMD_EV_DESC_27001_1	picture = GFX_evt_horsemanship	}
	desc = {	trigger = {	event_target:AMD_ET_TGT = {	AMD_T_IS_BEAR = yes	is_female = yes	}	}	text = AMD_EV_DESC_27001_2	picture = GFX_AMD_BEAR1	}
	desc = {	trigger = {	event_target:AMD_ET_TGT = {	AMD_T_IS_BEAR = yes	is_female = no	}	}	text = AMD_EV_DESC_27001_2	picture = GFX_AMD_BEAR2	}
	desc = {	trigger = {	event_target:AMD_ET_TGT = {	AMD_T_IS_CAT = yes	is_female = no	}	}	text = AMD_EV_DESC_27001_3	picture = GFX_evt_cat	}
	desc = {	trigger = {	event_target:AMD_ET_TGT = {	AMD_T_IS_CAT = yes	is_female = yes	}	}	text = AMD_EV_DESC_27001_3	picture = GFX_evt_cat	}
	
	#	당신 AMD_ET_POV		상대 AMD_ET_TGT
	immediate = {
		event_target:AMD_ET_POV = {
			event_target:AMD_ET_TGT = {
				AMD_E_SET_AD_WITH_PREV = yes
			}
		}
	}
	
	option = {	name = AMD_EV_OPT_27001_1	#논다
		ai_chance = {	factor = 0	}
		random_list = {
			50 = {
				custom_tooltip = {	text = AMD_EV_TT_27001_1_HAPPY
					reverse_opinion = {	who = ROOT	modifier = opinion_happy	years = 10	}
				}
			}
			35 = {
				custom_tooltip = {	text = AMD_EV_TT_27001_1_FEAST
					event_target:AMD_ET_TGT = {	add_character_modifier = {	name = well_fed	years = 1	}	}
					reverse_opinion = {	who = ROOT	modifier = opinion_very_grateful	years = 10	}
				}
			}
			10 = {
				modifier = {	factor = 0	trait = wounded	}
				modifier = {	factor = 0	trait = AMD_xenophile	}
				modifier = {	factor = 0	trait = AMD_x_catfucker	event_target:AMD_ET_TGT = {	AMD_T_IS_CAT = yes	}	}
				modifier = {	factor = 0	trait = AMD_x_bearfucker	event_target:AMD_ET_TGT = {	AMD_T_IS_BEAR = yes	}	}
				modifier = {	factor = 0	trait = AMD_x_horsefucker	event_target:AMD_ET_TGT = {	AMD_T_IS_HORSE = yes	}	}
				modifier = {	factor = 2.0	event_target:AMD_ET_TGT = {	trait = wroth	}	}
				hidden_tooltip = {	reverse_opinion = {	who = ROOT	modifier = opinion_satisfied	years = 50	}	}
				add_trait = wounded
			}
			5 = {
				modifier = {	factor = 0	trait = AMD_xenophile	}
				modifier = {	factor = 0	trait = AMD_x_catfucker	event_target:AMD_ET_TGT = {	AMD_T_IS_CAT = yes	}	}
				modifier = {	factor = 0	trait = AMD_x_bearfucker	event_target:AMD_ET_TGT = {	AMD_T_IS_BEAR = yes	}	}
				modifier = {	factor = 0	trait = AMD_x_horsefucker	event_target:AMD_ET_TGT = {	AMD_T_IS_HORSE = yes	}	}
				modifier = {	factor = 2.0	event_target:AMD_ET_TGT = {	trait = wroth	}	}
				if = {	limit = {	event_target:AMD_ET_TGT = {	AMD_T_IS_CAT = yes	}	}
					death = {	death_reason = death_accident_tiger	killer = event_target:AMD_ET_TGT	}
				}
				if = {	limit = {	event_target:AMD_ET_TGT = {	AMD_T_IS_BEAR = yes	}	}
					death = {	death_reason = death_accident_bear	killer = event_target:AMD_ET_TGT	}
				}
				if = {	limit = {	event_target:AMD_ET_TGT = {	AMD_T_IS_HORSE = yes	}	}
					death = {	death_reason = death_execution_horses	killer = event_target:AMD_ET_TGT	}
				}
			}
		}
		
		hidden_tooltip = {	AMD_E_END_CHAIN = yes	}
	}
	option = {	name = AMD_EV_OPT_27001_2	#미약
		ai_chance = {	factor = 0	}
		trigger = {	has_artifact = AMD_drug_aphrodisiac	}
		destroy_artifact = AMD_drug_aphrodisiac
		custom_tooltip = {	text = AMD_EV_TT_27001_2	}
		hidden_tooltip = {
			event_target:AMD_ET_TGT = {	AMD_E_ACM_DRUG_A = yes	}
			event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1122	}	}
		}
	}
	option = {	name = AMD_EV_OPT_PLAY_BEAST	#
		ai_chance = {	factor = 0	}
		trigger = {
			OR = {
				event_target:AMD_ET_TGT = {	is_lover = ROOT	}
				event_target:AMD_ET_TGT = {	is_consort = ROOT	}
				event_target:AMD_ET_TGT = {	has_minor_title = title_AMD_courtesan	}
				reverse_opinion = {	who = event_target:AMD_ET_TGT	value = 50	}
				has_opinion_modifier = {	who = event_target:AMD_ET_TGT	modifier = AMD_opinion_had_sex	}
				trait = lunatic
				trait = AMD_xenophile
				AND = {	trait = AMD_x_horsefucker	event_target:AMD_ET_TGT = {	AMD_T_IS_HORSE = yes	}	}
				AND = {	trait = AMD_x_bearfucker	event_target:AMD_ET_TGT = {	AMD_T_IS_BEAR = yes	}	}
				AND = {	trait = AMD_x_catfucker		event_target:AMD_ET_TGT = {	AMD_T_IS_CAT = yes	}	}
			}
		}
		custom_tooltip = {	text = AMD_String_PLAY_SHORT	}
		hidden_tooltip = {
			event_target:AMD_ET_TGT = {	letter_event = {	id = AMD_PLAY_PING.1122	}	}
		}
	}
	after = {
		hidden_tooltip = {
			AMD_E_ACM_COOLDOWN_1m = yes
			event_target:AMD_ET_TGT = {	AMD_E_ACM_COOLDOWN_1m = yes	}
		}
	}
}



#	28000 ~ 28999	단체전 관련...?


#	88000~88999	특성 취득 알림 이벤트.
character_event = {	id = AMD.88001
	desc = AMD_EV_DESC_88001
	picture = GFX_AMD_BEDROOM1
	is_triggered_only = yes
	option = {	name = AMD_EV_OPT_88000_REFUSE_ZEAL
		ai_chance = {	factor = 100	}
		trigger = {	trait = zealous	}
		tooltip_info = zealous
		piety = 5
	}
	option = {	name = AMD_EV_OPT_88000_REFUSE
		ai_chance = {	factor = 100	}
		trigger = {	NOT = {	trait = zealous	}	}
		if = {	limit = {	NOT = {	trait = stressed	}	}	random = {	chance = 10	add_trait = stressed	}	}
	}
}





namespace = AMD_PING

character_event = {	id = AMD_PING.11001	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.11001	}	}	}	}
character_event = {	id = AMD_PING.11002	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.11002	}	}	}	}

character_event = {	id = AMD_PING.20009	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.20009	}	}	}	}
letter_event = {	id = AMD_PING.21001		#배우자, 첩, 연인 방문 이벤트 - 상대의 태도
	is_triggered_only = yes
	border = GFX_event_letter_frame_diplomacy
	desc = {	trigger = {	event_target:AMD_ET_POV = {	NOT = {	is_lover = ROOT	}	}	}	text = AMD_EV_DESC_21001_P1	}	#연인이 아님
	desc = {	trigger = {	event_target:AMD_ET_POV = {	is_lover = ROOT	}	}	text = AMD_EV_DESC_21001_P2	}	#연인임
	
	option = {	name = AMD_EV_OPT_21001_P1	#당근빠따죠 쉬바!
		ai_chance = {	factor = 50	}
		custom_tooltip = {	text = AMD_EV_String_PLAY_21001_P1	}
		hidden_tooltip = {
			AMD_E_2P_SCORE_U100 = yes
			event_target:AMD_ET_POV = {	character_event = {	id = AMD.21001	}	}
		}
	}
	option = {	name = AMD_EV_OPT_21001_P2	#좋다 지금간다
		ai_chance = {	factor = 100	}
		hidden_tooltip = {
			AMD_E_SCORE_CHECK = yes
			event_target:AMD_ET_POV = {	character_event = {	id = AMD.21001	}	}
		}
	}
	option = {	name = AMD_EV_OPT_21001_P3	#씁 어쩔 수 없지
		ai_chance = {	factor = 50	}
		custom_tooltip = {	text = AMD_EV_String_PLAY_21001_P3	}
		hidden_tooltip = {
			AMD_E_2P_SCORE_D50 = yes
			event_target:AMD_ET_POV = {	character_event = {	id = AMD.21001	}	}
		}
	}
	
	option = {	name = AMD_EV_OPT_21001_P4	#안가요 안가
		ai_chance = {	factor = 0	}
		custom_tooltip = {	text = AMD_EV_String_PLAY_21001_P4	}
		hidden_tooltip = {	event_target:AMD_ET_POV = {	letter_event = {	id = AMD_PLAY.1125	}	}	}
	}
	
}
character_event = {	id = AMD_PING.21010	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.21010	}	}	}	}
character_event = {	id = AMD_PING.21020	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.21020	}	}	}	}

character_event = {	id = AMD_PING.22010	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22010	}	}	}	}
character_event = {	id = AMD_PING.22020	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22020	}	}	}	}
character_event = {	id = AMD_PING.22030	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22030	}	}	}	}
character_event = {	id = AMD_PING.22031	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22031	}	}	}	}
character_event = {	id = AMD_PING.22033	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22033	}	}	}	}
character_event = {	id = AMD_PING.22035	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22035	}	}	}	}
character_event = {	id = AMD_PING.22039	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22039	}	}	}	}
character_event = {	id = AMD_PING.22040	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22040	}	}	}	}
#character_event = {	id = AMD_PING.22050	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22050	}	}	}	}
character_event = {	id = AMD_PING.22090	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22090	}	}	}	}
character_event = {	id = AMD_PING.22091	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22091	}	}	}	}
character_event = {	id = AMD_PING.22092	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22092	}	}	}	}
character_event = {	id = AMD_PING.22093	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22093	}	}	}	}
character_event = {	id = AMD_PING.22094	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22094	}	}	}	}
character_event = {	id = AMD_PING.22099	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.22099	}	}	}	}

character_event = {	id = AMD_PING.24004	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.24004	}	}	}	}
character_event = {	id = AMD_PING.25020	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.25020	}	}	}	}
character_event = {	id = AMD_PING.26110	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.26110	}	}	}	}

character_event = {	id = AMD_PING.27001	hide_window = yes	is_triggered_only = yes	immediate = {	event_target:AMD_ET_POV = {	character_event = {	id = AMD.27001	}	}	}	}


