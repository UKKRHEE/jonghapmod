namespace = dag_cdo_court_slaver_event

#root is ruler
#should inherit a trigger that you need to have a court slaver

#COURT SLAVER RECRUITMENT
#	0001	 : Recruit court slaver event
#	0010-0011: Invalidate court slaver

##################################################################################
#	1001	- Diplomacy Training
#	1002	- Martial Training
#	1003	- Stewardship Training
#	1004	- Intrigue Training
#	1005	- Learning Training
#	1006	- Combat Practice





##################################################################################
#~At some point go through these triggers again and work out if they make any sense

scripted_trigger dag_cdo_court_slaver_event_0001_excellent_skill_slaver_trigger = {
	dag_cdo_minor_title_basic_requirements_trigger = yes
	intrigue >= high_skill_rating
}

scripted_trigger dag_cdo_court_slaver_event_0001_high_skill_slaver_trigger = {
	dag_cdo_minor_title_basic_requirements_trigger = yes	
	OR = {
		#~Empire/kingdom
		AND = {
			root = { highest_held_title_tier >= tier_kingdom }
			intrigue >= decent_skill_rating
			NAND = {
				has_character_modifier = dag_cdo_slavers_guild_member
				NOT = { has_trait = torturer }
			}
		}
		#~Duchy/county
		AND = {
			root = { highest_held_title_tier <= tier_duchy }
			NOR = {
				intrigue > high_skill_rating
				has_trait = torturer
				has_character_modifier = dag_cdo_slavers_guild_member
			}
			intrigue >= mediocre_skill_rating
		}
	}
}

scripted_trigger dag_cdo_court_slaver_event_0001_low_skill_slaver_trigger = {
	dag_cdo_minor_title_basic_requirements_trigger = yes
	NOR = {
		has_character_modifier = dag_cdo_slavers_guild_member
		has_trait = torturer
	}
	OR = {
		#~Empire/kingdom
		AND = {
			root = { highest_held_title_tier >= tier_kingdom }
			intrigue < decent_skill_rating
			intrigue >= mediocre_skill_rating
		}
		#~Duchy/county
		AND = {
			root = { highest_held_title_tier <= tier_duchy }
			intrigue < medium_skill_rating
			intrigue >= low_skill_rating
		}
	}
}

scripted_trigger dag_cdo_court_slaver_event_0001_low_skill_slaver_light_trigger = {
	dag_cdo_minor_title_basic_requirements_trigger = yes
	intrigue > low_skill_rating
}

scripted_trigger dag_cdo_court_slaver_event_0001_guild_slaver_trigger = {
	dag_cdo_minor_title_basic_requirements_trigger = yes
	#~Must be suitable slavers guild member
	has_character_modifier = dag_cdo_slavers_guild_member
	OR = {
		#~Empire/kingdom
		AND = {
			root = { highest_held_title_tier >= tier_kingdom }
			intrigue >= decent_skill_rating
			NAND = {
				has_trait = torturer
				NOT = { has_character_modifier = dag_cdo_slavers_guild_member }
			}
		}
		#~Duchy/county
		AND = {
			root = { highest_held_title_tier <= tier_duchy }
			NOR = {
				intrigue > high_skill_rating
				has_character_modifier = dag_cdo_slavers_guild_member
				has_trait = torturer
			}
			intrigue >= mediocre_skill_rating
		}
	}
}

#~Ruler picking court slaver
dag_cdo_court_slaver_event.0001 = {
	type = character_event
	title = {
		desc = dag_cdo_court_slaver_event.0001.t
	}
	desc = {
		first_valid = {
#			triggered_desc = {
#				trigger = { has_character_flag = dag_cdo_court_slaver_event_0001_hire_slaver_decision_text }
#				desc = dag_cdo_court_slaver_event.0001.decision.desc
#			}
			desc = dag_cdo_court_slaver_event.0001.fallback_reason.desc
		}
	}
	theme = dag_cdo_theme_slavery
	left_portrait = scope:high_skill_option
	lower_left_portrait = scope:guild_option
	right_portrait = scope:low_skill_option
	lower_right_portrait = scope:excellent_skill_option

	trigger = { exists = capital_province } #~If I lost it before I got this event, I shouldn't get a slaver
	
	immediate = {
		hidden_effect = {
			#~Find some appropriate options
			if = { #~Performance heavy option finding is only for players
				limit = { is_ai = no }
				#~EXCELLENT SKILL CHARACTER (for learned rulers)
				if = {
					limit = {
						OR = {
							has_intrigue_lifestyle_trait_trigger = yes
							intrigue >= high_skill_rating
						}
					}
					random_pool_character = {
						province = capital_province
						limit = {
							dag_cdo_court_slaver_event_0001_excellent_skill_slaver_trigger = yes
							has_trait = torturer
						}
						alternative_limit = {
							dag_cdo_court_slaver_event_0001_excellent_skill_slaver_trigger = yes
						}
						weight = {
							base = 1
							modifier = {
								has_personality_malicious_trigger = yes
								factor = 10
							}
							modifier = {
								ai_compassion <= medium_negative_compassion
								factor = 10
							}
							modifier = {
								faith = root.faith
								factor = 10
							}
						}
						save_scope_as = excellent_skill_option

						#Backup generation
						if = {
							limit = { NOT = { exists = scope:excellent_skill_option } }
							create_character = {
								location = root.capital_province
								gender_female_chance = 50
								template = dag_cdo_slaver_character_template
								age = { 18 50 }
								intrigue = high_skill_rating
								save_scope_as = excellent_skill_option
							}
							scope:excellent_skill_option = {
								trigger_event = { on_action = carn_character_initialization_pulse }
								add_trait = torturer
							}
						}
					}
				}

				#~HIGH-SKILL CHARACTER
				random_pool_character = {
					province = capital_province
					limit = {
						dag_cdo_court_slaver_event_0001_high_skill_slaver_trigger = yes
						trigger_if = {
							limit = {
								exists = scope:excellent_skill_option
							}
							NOT = { this = scope:excellent_skill_option }
						}
					}
					weight = {
						base = 1
						modifier = {
							has_character_modifier = dag_cdo_slavers_guild_member
							factor = 100
						}
						modifier = {
							has_personality_malicious_trigger = yes
							factor = 10
						}
						modifier = {
							ai_compassion <= medium_negative_compassion							
							factor = 10
						}
						modifier = {
							faith = root.faith
							factor = 10
						}
					}
					save_scope_as = high_skill_option
				}
				#~Backup generation
				if = {
					limit = { NOT = { exists = scope:high_skill_option } }
					create_character = {
						location = root.capital_province
						gender_female_chance = 50
						template = dag_cdo_slaver_character_template
						age = { 18 50 }
						intrigue = { medium_skill_rating high_skill_rating }
						save_scope_as = high_skill_option
					}
					scope:high_skill_option = {
						trigger_event = { on_action = carn_character_initialization_pulse }
					}
				}

				#~GUILD CHARACTER (optional, only if available in pool)
				random_pool_character = {
					province = root.capital_province
					limit = { 
						dag_cdo_court_slaver_event_0001_guild_slaver_trigger = yes 
						trigger_if = {
							limit = {
								exists = scope:excellent_skill_option
							}
							NOT = { this = scope:excellent_skill_option }
						}
						trigger_if = {
							limit = {
								exists = scope:high_skill_option
							}
							NOT = { this = scope:high_skill_option }
						}
					}
					weight = {
						base = 1
						modifier = {
							has_character_modifier = dag_cdo_slavers_guild_member
							factor = 100
						}
						modifier = {
							has_personality_malicious_trigger = yes
							factor = 10
						}
						modifier = {
							ai_compassion <= medium_negative_compassion							
							factor = 10
						}
						modifier = {
							faith = root.faith
							factor = 10
						}
					}
					save_scope_as = guild_option
				}

				#~Low-medium skill character
				random_pool_character = {
					province = root.capital_province
					limit = { 
						dag_cdo_court_slaver_event_0001_low_skill_slaver_trigger = yes 
						trigger_if = {
							limit = {
								exists = scope:excellent_skill_option
							}
							NOT = { this = scope:excellent_skill_option }
						}
						trigger_if = {
							limit = {
								exists = scope:high_skill_option
							}
							NOT = { this = scope:high_skill_option }
						}
						trigger_if = {
							limit = {
								exists = scope:guild_option
							}
							NOT = { this = scope:guild_option }
						}
					}
					weight = {
						base = 1
						modifier = {
							has_personality_malicious_trigger = yes
							factor = 10
						}
						modifier = {
							ai_compassion <= medium_negative_compassion							
							factor = 10
						}
						modifier = {
							faith = root.faith
							factor = 10
						}
					}
					save_scope_as = low_skill_option
				}
			}
			else = { #~Ai get someone simple
				random_pool_character = {
					province = root.capital_province
					limit = { dag_cdo_court_slaver_event_0001_low_skill_slaver_light_trigger = yes }
					weight = {
						base = 1
						modifier = {
							has_personality_malicious_trigger = yes
							factor = 10
						}
						modifier = {
							ai_compassion <= medium_negative_compassion							
							factor = 10
						}
						modifier = {
							faith = root.faith
							factor = 10
						}
					}
					save_scope_as = low_skill_option
				}
			}
			
			#Backup generation
			if = {
				limit = { NOT = { exists = scope:low_skill_option } }

				create_character = {
					location = root.capital_province
					gender_female_chance = 50
					template = dag_cdo_slaver_character_template
					age = { 18 50 }
					intrigue = { low_skill_rating decent_skill_rating }
					save_scope_as = low_skill_option
				}
				scope:low_skill_option = {
					trigger_event = { on_action = carn_character_initialization_pulse }
				}				
			}
		}
	}

	#~Amazing skill
	option = {
		trigger = {
			exists = scope:excellent_skill_option
			is_landed = yes #~extra check to make sure they haven't lost their status
		}
		name = dag_cdo_court_slaver_event.0001.e
		trait = torturer
		skill = intrigue
		pay_short_term_gold = {
			target = scope:excellent_skill_option
			gold = dag_cdo_high_skill_court_slaver_cost
		}
		add_courtier = scope:excellent_skill_option
		dag_cdo_set_court_slaver_effect = {
			EMPLOYER = root
			SLAVER = scope:excellent_skill_option
		}
		hidden_effect = {
			reverse_add_opinion = {
				target = scope:excellent_skill_option
				modifier = hired_me_opinion
			}
		}
		ai_chance = {
			factor = 500
			modifier = {
				short_term_gold < medium_gold_value
				factor = 0
			}
		}
	}

	#~High skill
	option = {
		trigger = {
			is_landed = yes #~extra check to make sure they haven't lost their status
			exists = scope:high_skill_option #~Doesn't exist for AI
		}
		name = dag_cdo_court_slaver_event.0001.a
		pay_short_term_gold = {
			target = scope:high_skill_option
			gold = dag_cdo_high_skill_court_slaver_cost
		}
		add_courtier = scope:high_skill_option
		dag_cdo_set_court_slaver_effect = {
			EMPLOYER = root
			SLAVER = scope:high_skill_option
		}
		hidden_effect = {
			reverse_add_opinion = {
				target = scope:high_skill_option
				modifier = hired_me_opinion
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				short_term_gold < medium_gold_value
				factor = 0
			}
		}
	}
	#Low
	option = {
		trigger = {
			is_landed = yes #~extra check to make sure they haven't lost their status
		}
		name = dag_cdo_court_slaver_event.0001.b
		if = {
			limit = {
				OR = {
					is_ai = no
					short_term_gold >= dag_cdo_low_skill_court_slaver_cost #~Because AI would never have enough money
				}
			}
			pay_short_term_gold = {
				target = scope:low_skill_option
				gold = dag_cdo_low_skill_court_slaver_cost
			}
		}
		add_courtier = scope:low_skill_option
		dag_cdo_set_court_slaver_effect = {
			EMPLOYER = root
			SLAVER = scope:low_skill_option
		}
		hidden_effect = {
			reverse_add_opinion = {
				target = scope:low_skill_option
				modifier = hired_me_opinion
			}
		}

		ai_chance = {
			factor = 100
		}
	}
	#Guild
	option = {
		trigger = {
			exists = scope:guild_option
			is_landed = yes #~extra check to make sure they haven't lost their status
		}
		name = dag_cdo_court_slaver_event.0001.c

		pay_short_term_gold = {
			target = scope:guild_option
			gold = dag_cdo_low_skill_court_slaver_cost
		}
		add_courtier = scope:guild_option
		dag_cdo_set_court_slaver_effect = {
			EMPLOYER = root
			SLAVER = scope:guild_option
		}
		hidden_effect = {
			reverse_add_opinion = {
				target = scope:guild_option
				modifier = hired_me_opinion
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				short_term_gold < minor_gold_value
				factor = 0
			}
		}
	}

	#~None...
	option = {
		name = {
			trigger = {
				NOR = {
					exists = scope:guild_option
					exists = scope:excellent_skill_option
				}
			}
			text = dag_cdo_court_slaver_event.0001.d.two
		}
		name = {
			trigger = {
				OR = {
					exists = scope:guild_option
					exists = scope:excellent_skill_option
				}
			}
			text = dag_cdo_court_slaver_event.0001.d.more
		}
		custom_tooltip = dag_cdo_court_slaver_event.0001.d.tt

		ai_chance = {
			factor = 1
		}
	}

	after = {
		hidden_effect = {
			
		}

		remove_character_flag = dag_cdo_court_slaver_event_0001_hire_slaver_decision_text
	}
}

#~Invalidate slaver (yearly)
dag_cdo_court_slaver_event.0010 = {
	type = character_event
	hidden = yes
	
	trigger = {
		any_relation = {
			type = dag_cdo_court_slaver
			NOT = {
				dag_cdo_can_be_court_slaver_of = { EMPLOYER = root }
			}
		}
	}

	immediate = {
		every_relation = {
			type = dag_cdo_court_slaver
			save_scope_as = invalidated_slaver
			dag_cdo_invalidate_slaver_effect = {
				SLAVER = scope:invalidated_slaver
				EMPLOYER = root
			}
		}
	}
}

#~Invalidate slaver (on leave court)
dag_cdo_court_slaver_event.0011 = {
	type = character_event
	hidden = yes
	
	trigger = {
		scope:old_employer = {
			has_relation_dag_cdo_court_slaver = root
		}
		NOT = {
			dag_cdo_can_be_court_slaver_of = { EMPLOYER = scope:old_employer }
		}
	}

	immediate = {
		dag_cdo_invalidate_slaver_effect = {
			SLAVER = root
			EMPLOYER = scope:old_employer
		}
	}
}











##################################################################################
#~Diplomacy
dag_cdo_court_slaver_event.1001 = {
	hidden = yes
	trigger = {
		any_relation = {
			type = dag_cdo_court_slaver
			is_available_healthy_ai_adult = yes
		}
		any_courtier_or_guest = {
			has_trait = slave
			is_available_healthy_ai_adult = yes
			NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1001 }
		}
	}
	weight_multiplier = {
		base = 1
	}
	immediate = {
		dag_cdo_save_court_slaver_as_effect = { SCOPE_NAME = active_councillor }
		random_courtier_or_guest = {
			limit = {
				has_trait = slave
				is_available_healthy_ai_adult = yes
				NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1001 }		
			}
			weight = {
				base = 1
				modifier = {
					add = 5
					has_trait_rank = {
						trait = education_diplomacy
						rank >= 1
					}
				}
				modifier = {
					add = 5
					has_focus = education_diplomacy
				}
			}
			save_scope_as = target_slave
		}
		send_interface_message = {
			type = event_spouse_task_good
			title = dag_cdo_court_slaver_event.1001.message
			desc = {
				triggered_desc = {
					trigger = {
						scope:active_councillor = { diplomacy < average_skill_level }
					}
					desc = dag_cdo_court_slaver_diplomacy_good_unskilled_notification_tooltip
				}
				triggered_desc = {
					trigger = {
						scope:active_councillor = { diplomacy >= average_skill_level }
					}
					desc = dag_cdo_court_slaver_diplomacy_good_skilled_notification_tooltip
				}
			}
			right_icon = scope:active_councillor
			left_icon = scope:target_slave
			scope:target_slave = {
				add_diplomacy_skill = 1
				add_character_flag = {
					flag = had_event_dag_cdo_court_slaver_event_1001
					years = 5
				}
			}
		}
	}
}

#~Martial
dag_cdo_court_slaver_event.1002 = {
	hidden = yes
	trigger = {
		any_relation = {
			type = dag_cdo_court_slaver
			is_available_healthy_ai_adult = yes
		}
		any_courtier_or_guest = {
			has_trait = slave
			is_available_healthy_ai_adult = yes
			NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1002 }
		}
	}
	weight_multiplier = {
		base = 1
	}
	immediate = {
		dag_cdo_save_court_slaver_as_effect = { SCOPE_NAME = active_councillor }
		random_courtier_or_guest = {
			limit = {
				has_trait = slave
				is_available_healthy_ai_adult = yes
				NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1002 }		
			}
			weight = {
				base = 1
				modifier = {
					add = 5
					can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = root }
				}				
				modifier = {
					add = 5
					has_trait_rank = {
						trait = education_martial
						rank >= 1
					}
				}
				modifier = {
					add = 5
					has_focus = education_martial
				}
			}
			save_scope_as = target_slave
		}
		send_interface_message = {
			type = event_spouse_task_good
			title = dag_cdo_court_slaver_event.1002.message
			desc = {
				triggered_desc = {
					trigger = {
						scope:active_councillor = { martial < average_skill_level }
					}
					desc = dag_cdo_court_slaver_martial_good_unskilled_notification_tooltip
				}
				triggered_desc = {
					trigger = {
						scope:active_councillor = { martial >= average_skill_level }
					}
					desc = dag_cdo_court_slaver_martial_good_skilled_notification_tooltip
				}
			}
			right_icon = scope:active_councillor
			left_icon = scope:target_slave
			scope:target_slave = {
				add_martial_skill = 1
				add_character_flag = {
					flag = had_event_dag_cdo_court_slaver_event_1002
					years = 5
				}
			}
		}
	}
}

#~Stewardship
dag_cdo_court_slaver_event.1003 = {
	hidden = yes
	trigger = {
		any_relation = {
			type = dag_cdo_court_slaver
			is_available_healthy_ai_adult = yes
		}
		any_courtier_or_guest = {
			has_trait = slave
			is_available_healthy_ai_adult = yes
			NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1003 }
		}
	}
	weight_multiplier = {
		base = 1
	}
	immediate = {
		dag_cdo_save_court_slaver_as_effect = { SCOPE_NAME = active_councillor }
		random_courtier_or_guest = {
			limit = {
				has_trait = slave
				is_available_healthy_ai_adult = yes
				NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1003 }		
			}
			weight = {
				base = 1
				modifier = {
					add = 5
					has_trait_rank = {
						trait = education_stewardship
						rank >= 1
					}
				}
				modifier = {
					add = 5
					has_focus = education_stewardship
				}
			}
			save_scope_as = target_slave
		}
		send_interface_message = {
			type = event_spouse_task_good
			title = dag_cdo_court_slaver_event.1003.message
			desc = {
				triggered_desc = {
					trigger = {
						scope:active_councillor = { stewardship < average_skill_level }
					}
					desc = dag_cdo_court_slaver_stewardship_good_unskilled_notification_tooltip
				}
				triggered_desc = {
					trigger = {
						scope:active_councillor = { stewardship >= average_skill_level }
					}
					desc = dag_cdo_court_slaver_stewardship_good_skilled_notification_tooltip
				}
			}
			right_icon = scope:active_councillor
			left_icon = scope:target_slave
			scope:target_slave = {
				add_stewardship_skill = 1
				add_character_flag = {
					flag = had_event_dag_cdo_court_slaver_event_1003
					years = 5
				}
			}
		}
	}
}

#~Intrigue
dag_cdo_court_slaver_event.1004 = {
	hidden = yes
	trigger = {
		any_relation = {
			type = dag_cdo_court_slaver
			is_available_healthy_ai_adult = yes
		}
		any_courtier_or_guest = {
			has_trait = slave
			is_available_healthy_ai_adult = yes
			NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1004 }
		}
	}
	weight_multiplier = {
		base = 1
	}
	immediate = {
		dag_cdo_save_court_slaver_as_effect = { SCOPE_NAME = active_councillor }
		random_courtier_or_guest = {
			limit = {
				has_trait = slave
				is_available_healthy_ai_adult = yes
				NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1004 }		
			}
			weight = {
				base = 1
				modifier = {
					add = 5
					has_trait_rank = {
						trait = education_intrigue
						rank >= 1
					}
				}
				modifier = {
					add = 5
					has_focus = education_intrigue
				}
			}
			save_scope_as = target_slave
		}
		send_interface_message = {
			type = event_spouse_task_good
			title = dag_cdo_court_slaver_event.1004.message
			desc = {
				triggered_desc = {
					trigger = {
						scope:active_councillor = { intrigue < average_skill_level }
					}
					desc = dag_cdo_court_slaver_intrigue_good_unskilled_notification_tooltip
				}
				triggered_desc = {
					trigger = {
						scope:active_councillor = { intrigue >= average_skill_level }
					}
					desc = dag_cdo_court_slaver_intrigue_good_skilled_notification_tooltip
				}
			}
			right_icon = scope:active_councillor
			left_icon = scope:target_slave
			scope:target_slave = {
				add_intrigue_skill = 1
				add_character_flag = {
					flag = had_event_dag_cdo_court_slaver_event_1004
					years = 5
				}
			}
		}
	}
}

#~Learning
dag_cdo_court_slaver_event.1005 = {
	hidden = yes
	trigger = {
		any_relation = {
			type = dag_cdo_court_slaver
			is_available_healthy_ai_adult = yes
		}
		any_courtier_or_guest = {
			has_trait = slave
			is_available_healthy_ai_adult = yes
			NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1005 }
		}
	}
	weight_multiplier = {
		base = 1
	}
	immediate = {
		dag_cdo_save_court_slaver_as_effect = { SCOPE_NAME = active_councillor }
		random_courtier_or_guest = {
			limit = {
				has_trait = slave
				is_available_healthy_ai_adult = yes
				NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1005 }		
			}
			weight = {
				base = 1
				modifier = {
					add = 5
					has_trait_rank = {
						trait = education_learning
						rank >= 1
					}
				}
				modifier = {
					add = 5
					has_focus = education_learning
				}
			}
			save_scope_as = target_slave
		}
		send_interface_message = {
			type = event_spouse_task_good
			title = dag_cdo_court_slaver_event.1005.message
			desc = {
				triggered_desc = {
					trigger = {
						scope:active_councillor = { learning < average_skill_level }
					}
					desc = dag_cdo_court_slaver_learning_good_unskilled_notification_tooltip
				}
				triggered_desc = {
					trigger = {
						scope:active_councillor = { learning >= average_skill_level }
					}
					desc = dag_cdo_court_slaver_learning_good_skilled_notification_tooltip
				}
			}
			right_icon = scope:active_councillor
			left_icon = scope:target_slave
			scope:target_slave = {
				add_learning_skill = 1
				add_character_flag = {
					flag = had_event_dag_cdo_court_slaver_event_1005
					years = 5
				}
			}
		}
	}
}

dag_cdo_court_slaver_event.1006 = {
	hidden = yes

	trigger = {
		any_relation = {
			type = dag_cdo_court_slaver
			is_available_healthy_ai_adult = yes
		}
		any_courtier_or_guest = {
			has_trait = slave
			is_available_healthy_ai_adult = yes
			NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1006 }
		}
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		dag_cdo_save_court_slaver_as_effect = { SCOPE_NAME = active_councillor }
		random_courtier_or_guest = {
			limit = {
				has_trait = slave
				is_available_healthy_ai_adult = yes
				NOT = { has_character_flag = had_event_dag_cdo_court_slaver_event_1006 }		
			}
			weight = {
				base = 1
				modifier = {
					add = 5
					can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = root }
				}
				modifier = {
					add = 5
					has_trait_rank = {
						trait = education_martial
						rank >= 1
					}
				}
				modifier = {
					add = 5
					has_focus = education_martial
				}
			}
			save_scope_as = target_slave
		}

		send_interface_message = {
			type = event_spouse_task_good
			title = dag_cdo_court_slaver_event.1006.message
			desc = {
				triggered_desc = {
					trigger = {
						scope:active_councillor = { martial < average_skill_level }
					}
					desc = dag_cdo_court_slaver_martial_good_unskilled_notification_tooltip
				}
				triggered_desc = {
					trigger = {
						scope:active_councillor = { martial >= average_skill_level }
					}
					desc = dag_cdo_court_slaver_martial_good_skilled_notification_tooltip
				}
			}
			right_icon = scope:active_councillor
			left_icon = scope:target_slave

			scope:target_slave = {
				add_prowess_skill = 1
				add_character_flag = {
					flag = had_event_dag_cdo_court_slaver_event_1006
					years = 5
				}
			}
		}
	}
}