#
# Motivate tribal steward
#

namespace = DWTweaksSteward

character_event = {
	id = DWTweaksSteward.4000
	hide_window = yes # Nothing to see
	is_triggered_only = yes # Triggered by targeted decision
	immediate = {
		FROM = { save_event_target_as = dwtw_steward } # We go ahead and save the event target for processing stuff later
		if = {
			limit = {
				FROM = {
					is_female = no # Our Chancellor is a man
				}
			}
			narrative_event = { id = DWTweaksSteward.4001 }
			break = yes # We exit the immediate block
		}
		# If we get here, our Chancellor is a woman
		narrative_event = { id = DWTweaksSteward.4003 }
	}
}
# .4001 Motivate Male Chancellor in the Fabrication of Claims (player)
narrative_event = {
	id = DWTweaksSteward.4001
	desc = "DWTweaks3001"
	picture = steward_default
	title = dwtw_steward_claim_motivation
	is_triggered_only = yes # Triggered by .4000
	option = { #Some extra coin for bribes
		trigger = {
			treasury = 250 # Is there enough coin to handle some bribes?
		}
		name = "DWTweaks3001A"	
		treasury = -250
		if = {
			limit = {
				event_target:dwtw_steward = {
					intrigue = 10 #If our diplomat has at least an intrigue of 10, they're successful in their bribe attempts
				}
			}
			event_target:dwtw_steward = { character_event = { id = DWTweaksSteward.4005 days = 14 }} # Leads to the claim being successfully fabricated
			break = yes # Removes us from this option block
		}
		# This processes if our chancellor has a intrigue below 10
		random_list = {
			50 = { narrative_event = { id = DWTweaksSteward.4009 days = 21 }} # Liege notified that the bribe failed
			50 = { event_target:dwtw_steward = { character_event = { id = DWTweaksSteward.4005 days = 21 }} } # Leads to the claim being successfully fabricated
		}
	}
	option = { #A lovers caress can inspire
		trigger = {
			is_adult = yes # only adult players should see this
			NOR = {  # And the player shouldn't be chaste
				trait = chaste
				trait = celibate
				trait = eunuch
				trait = dwf_ghost
			}
			NOT = { event_target:dwtw_steward = { trait = chaste } } # And nor should our target
		}
		name = "DWTweaks3001B"
		character_event = {	id = DWTweaksSteward.4010 }		
	}
	
	option = { #Provide the Chancellor some dirt to blackmail people.
		name = "DWTweaks3001E"
		trigger = { diplomacy = 18 }
		tooltip_info = diplomacy
		event_target:dwtw_steward = { character_event = { id = DWTweaksSteward.4005 days = 14 }}
	}

	option = {
		name = "DWTweaks3001F" #Player opts to let the Chancellor do their thing
	}	
}
# .4003 Motivate Female Chancellor in the Fabrication of Claims (player)
narrative_event = {
	id = DWTweaksSteward.4003
	desc = "DWTweaks3001"
	picture = steward__female_default
	title = dwtw_steward_claim_motivation
	is_triggered_only = yes # Triggered by .4000
	option = { #Some extra coin for bribes
		trigger = {
			treasury = 250 # Is there enough coin to handle some bribes?
		}
		name = "DWTweaks3001A"	
		treasury = -250
		if = {
			limit = {
				event_target:dwtw_steward = {
					intrigue = 10 #If our diplomat has at least an intrigue of 10, they're successful in their bribe attempts
				}
			}
			event_target:dwtw_steward = { character_event = { id = DWTweaksSteward.4005 days = 14 }} # Leads to the claim being successfully fabricated
			break = yes # Removes us from this option block
		}
		# This processes if our chancellor has a intrigue below 10
		random_list = {
			50 = { narrative_event = { id = DWTweaksSteward.4009 days = 21 }} # Liege notified that the bribe failed
			50 = { event_target:dwtw_steward = { character_event = { id = DWTweaksSteward.4005 days = 21 }} } # Leads to the claim being successfully fabricated
		}
	}
	option = { #A lovers caress can inspire
		trigger = {
			is_adult = yes # only adult players should see this
			NOR = {  # And the player shouldn't be chaste
				trait = chaste
				trait = celibate
				trait = eunuch
				trait = dwf_ghost
			}
			NOT = { event_target:dwtw_steward = { trait = chaste } } # And nor should our target
		}
		name = "DWTweaks3001B"
		character_event = {	id = DWTweaksSteward.4010 }		
	}

	option = { #Provide the Chancellor some dirt to blackmail people.
		name = "DWTweaks3001E"
		trigger = { diplomacy = 18 }
		tooltip_info = diplomacy
		event_target:dwtw_steward = { character_event = { id = DWTweaksSteward.4005 days = 14 }}
	}

	option = {
		name = "DWTweaks3001F" #Player opts to let the Chancellor do their thing
	}	
}
# .4005 Chancellor check to ensure has_job_action = action_settle_tribe is still valid before triggering the Successful Fabrication event (hidden, chancellor)
character_event = {
	id = DWTweaksSteward.4005
	hide_window = yes # Nothing to see here
	is_triggered_only = yes # Triggered by .4001/.4003
	trigger = { 
		has_job_action = action_settle_tribe # If this is not true, then the immediate action below shouldn't run
	}
	immediate = {
		character_event = { id = 925}
	}
}
# .4009 Liege notified by Chancellor that the bribe failed (liege)
narrative_event = {
	id = DWTweaksSteward.4009
	desc = "DWTweaks3009"
	picture = steward_default
	title = dwtw_steward_claim_motivation
	is_triggered_only = yes # Triggered by .4001/.4003
	trigger = { 
		has_job_action = action_settle_tribe # If this is not true, then the immediate action below shouldn't run
	}
	option = { # Bah, incompetence
		name = "DWTweaks3009A"
	}
}

# .4010 Liege motivates Chancellor with sex - routing check (liege - hidden)
character_event = {
	id = DWTweaksSteward.4010
	hide_window = yes # Nothing to see
	is_triggered_only = yes # Triggered from .4001/.4003
	immediate = {
		if = {
			limit = { # Both liege and chancellor are women
				is_female = yes
				event_target:dwtw_steward = {
					is_female = yes
					OR = {
						event_target:dwtw_steward = {
							trait = homosexual
						}
						is_lover = event_target:dwtw_steward
					}				
				}
			}
			narrative_event = { id = DWTweaksSteward.4011 } # Lesbian event
		}
		else_if = {
			limit = { # Liege is woman and chancellor is a man
				is_female = yes
				event_target:dwtw_steward = {
					is_female = no
					NOT = {
						trait = homosexual
					}
				}
			}
			# No sex denied events at this time, some may be added in the future as a TODO
			narrative_event = { id = DWTweaksSteward.4013 } # Sex event
		}
		else_if = {
			limit = { # Both liege and chancellor are men
				is_female = no
				event_target:dwtw_steward = {
					is_female = no
					OR = {
						event_target:dwtw_steward = {
							trait = homosexual
						}
						is_lover = event_target:dwtw_steward
					}					
				}
			}
			narrative_event = { id = DWTweaksSteward.4012 } # Gay event	
		}
		else_if = {
			limit = { # Liege is man and chancellor is a woman
				is_female = no
				event_target:dwtw_steward = {
					is_female = yes
				}
			}
			# No sex denied events at this time, some may be added in the future as a TODO
			narrative_event = { id = DWTweaksSteward.4014 } # Sex Event
		}
		# If we reach this point, then the liege and chancellor are not a match and the chancellor will refuse the offer
		else_if = {
			limit = {
				event_target:dw_chancellor = {
					OR = {
						trait = chaste
						trait = celibate
						trait = eunuch
					}
				}
				narrative_event = { id = DWCourt.3019 } # Liege DENIED
			}
		}
		else = {
			narrative_event = { id = DWTweaksSteward.4019 } # Liege DENIED
		}
	}
}
# .4011 Liege and Chancellor Lesbian scene (liege)
narrative_event = {
	id = DWTweaksSteward.4011
	desc = "DWTweaks3011"
	picture = chancellor_female_female_1
	title = dwtw_steward_claim_motivation
	is_triggered_only = yes # Triggered by .4010
	option = { # Well worth the motivation
		name = "DWTweaks3011A"
		event_target:dwtw_steward = {
			character_event = { id = DWTweaksSteward.4005 days = 14 }
		}
	}
}
# .4012 Liege and Chancellor Lesbian scene (liege)
narrative_event = {
	id = DWTweaksSteward.4012
	desc = "DWTweaks3012"
	picture = chancellor_male_male_1
	title = dwtw_steward_claim_motivation
	is_triggered_only = yes # Triggered by .4010
	option = { # Well worth the motivation
		name = "DWTweaks3012A"
		event_target:dwtw_steward = {
			character_event = { id = DWTweaksSteward.4005 days = 14 }
		}
	}
}
# .4013 Female Liege and Male Chancellor sex scene (liege)
narrative_event = {
	id = DWTweaksSteward.4013
	desc = "DWTweaks3013"
	picture = chancellor_male_female_1
	title = dwtw_steward_claim_motivation
	is_triggered_only = yes # Triggered by .4010
	option = { # Well worth the motivation
		name = "DWTweaks3013A"
		event_target:dwtw_steward = {
			character_event = { id = DWTweaksSteward.4005 days = 14 }
			character_event = { id = DWCore.9005 } # Pregnancy check
		}
	}
}
# .4014 Female Liege and Male Chancellor sex scene (liege)
narrative_event = {
	id = DWTweaksSteward.4014
	desc = "DWTweaks3014"
	picture = chancellor_male_female_1
	title = dwtw_steward_claim_motivation
	is_triggered_only = yes # Triggered by .4010
	option = { # Well worth the motivation
		name = "DWTweaks3014A"
		event_target:dwtw_steward = {
			character_event = { id = DWTweaksSteward.4005 days = 14 }
			character_event = { id = DWCore.9000 } # Pregnancy check
		}
	}
}
# .4019 Liege advance denied by Chancellor (liege)
narrative_event = {
	id = DWTweaksSteward.4019
	desc = "DWTweaks3019"
	picture = denied
	title = dwtw_steward_claim_motivation
	is_triggered_only = yes # Triggered by .4010
	option = { # Bah, they don't know what they're missing
		name = "DWTweaks3019A"
	}
}