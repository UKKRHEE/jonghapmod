namespace = dag_cdo_slave_interaction_event

####################
#  BRANDING EVENT  #
####################

#I brand someone
dag_cdo_slave_interaction_event.1020 = {
	type = character_event
	title = dag_cdo_slave_interaction_event.1020.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { scope:recipient = { is_adult = yes } }
				desc = {
					desc = dag_cdo_slave_interaction_event.1020.start.desc
					first_valid = {
						triggered_desc = {
							trigger = {
								OR = {
									ai_compassion < 0
									has_relation_rival = scope:recipient
								}
							}
							desc = dag_cdo_slave_interaction_event.1020.cruel.desc
						}
						desc = dag_cdo_slave_interaction_event.1020.compassionate.desc
					}
				}
			}
			desc = dag_cdo_slave_interaction_event.1020.child.desc
		}
	}
	theme = prison
	left_portrait = {
		character = root
		animation = schadenfreude

	}
	right_portrait = {
		character = scope:recipient
		animation = fear
	}

	trigger = { scope:recipient = { is_at_same_location = scope:actor } }

	on_trigger_fail = {
		scope:recipient = {
			if = {
				limit = { has_character_flag = is_being_tortured }
				remove_character_flag = is_being_tortured
			}
		}
	}

	immediate = {
		play_music_cue = "mx_cue_prison"

		hidden_effect = {
			# For the portrait
			scope:recipient = {
				add_character_flag = {
					flag = is_naked
					days = 1
				}
			}
			#For the text
			save_court_physician_as_effect = { SCOPE_NAME = physician }
			if = {
				limit = { NOT = { exists = scope:physician } }
				random_dummy_gender_physician_effect = yes
				scope:dummy_physician_gender = { save_scope_as = physician }
			}
		}
	}
	
	option = {
		name = {
			trigger = {
				OR = {
					has_trait = sadistic
					has_relation_rival = scope:recipient
				}
				scope:recipient = { is_adult = yes }
			}
			text = dag_cdo_slave_interaction_event.1020.a
		}
		name = {
			trigger = {
				NAND = {
					OR = {
						has_trait = sadistic
						has_relation_rival = scope:recipient
					}
					scope:recipient = { is_adult = yes }
				}
			}
			text = dag_cdo_slave_interaction_event.1020.b
		}
		dag_cdo_brand_effect = {
			ACTOR = scope:actor
			VICTIM = scope:recipient
		}
#		#I do not understand why it was done like this
#		show_as_tooltip = { 
#			dag_cdo_brand_effect = {
#				ACTOR = scope:actor
#				VICTIM = scope:recipient
#			}
#		}
#		scope:recipient = {
#			trigger_event = dag_cdo_slave_interaction_event.1021
#		}
	}
}